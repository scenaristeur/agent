(self["webpackChunkagent"]=self["webpackChunkagent"]||[]).push([[288],{73288:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" Solid Soukai person : "+e._s(e.person)+" "),n("hr"),e._v(" persons : "+e._s(e.persons)+" "),n("hr")])},i=[],o=n(16198),a=n(92751),s=n(76133),u=n(99418),c=n(49161),l=n(23796),f=(n(78975),n(21249),n(52262),n(24506),n(53161)),h=n.n(f),d=n(67696),p=n(63754),y=n(61519),v=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n)}(f.SolidModel);(0,l.Z)(v,"rdfContexts",{foaf:"http://xmlns.com/foaf/0.1/",vcard:"http://www.w3.org/2006/vcard/ns#"}),(0,l.Z)(v,"rdfsClasses",["foaf:Person"]),(0,l.Z)(v,"fields",{name:{type:d.FieldType.String,rdfProperty:"foaf:name"}});var b=n(50476),g=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n)}(f.SolidModel);(0,l.Z)(g,"rdfsClasses",["http://xmlns.com/foaf/0.1/Person"]),(0,l.Z)(g,"fields",{name:{type:d.FieldType.String,rdfProperty:"http://xmlns.com/foaf/0.1/name"}}),h().loadSolidModels(),d.Soukai.loadModels({Person:g,UserSolid:v}),d.Soukai.useEngine(new f.SolidEngine(p.fetch.bind(window)));var m={name:"SoukaiSolidTest",data:function(){return{person:null,persons:null}},mounted:function(){this.test1()},methods:{test1:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var n,r,i,o,a,s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null==e.pod){t.next=27;break}return n="https://pod.inrupt.com/andriesvh/profile/card#me",b.log(n),t.next=5,v.from(n).all();case 5:return r=t.sent,t.next=8,r.map((function(e){return e.getAttributes()}));case 8:return i=t.sent,b.log(i),b.log("user pod",i),o="https://spoggy-test2.solidcommunity.net/public/soukai-test/",t.next=14,g.from(o).all();case 14:return a=t.sent,t.next=17,a.map((function(e){return e.getAttributes()}));case 17:return e.persons=t.sent,s={name:"John Doe",url:o+(0,y.Z)()+"#it"},t.next=21,g.at("https://spoggy-test2.solidcommunity.net/public/soukai-test/").create(s);case 21:return u=t.sent,t.t0=b,t.next=25,u;case 25:t.t1=t.sent,t.t0.log.call(t.t0,"person",t.t1);case 27:case"end":return t.stop()}}),t)})))()}},watch:{pod:function(){this.test1()}},computed:{pod:function(){return this.$store.state.solid.pod}}},w=m,x=n(1001),_=(0,x.Z)(w,r,i,!1,null,null,null),E=_.exports},6790:function(e,t,n){"use strict";var r=n(17854),i=n(43157),o=n(26244),a=n(49974),s=r.TypeError,u=function(e,t,n,r,c,l,f,h){var d,p,y=c,v=0,b=!!f&&a(f,h);while(v<r){if(v in n){if(d=b?b(n[v],v,t):n[v],l>0&&i(d))p=o(d),y=u(e,t,d,p,y,l-1)-1;else{if(y>=9007199254740991)throw s("Exceed the acceptable array length");e[y]=d}y++}v++}return y};e.exports=u},20403:function(e){var t=Math.log,n=Math.LOG10E;e.exports=Math.log10||function(e){return t(e)*n}},84944:function(e,t,n){"use strict";var r=n(82109),i=n(6790),o=n(47908),a=n(26244),s=n(19303),u=n(65417);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=a(t),r=u(t,0);return r.length=i(r,t,t,n,0,void 0===e?1:s(e)),r}})},33792:function(e,t,n){var r=n(51223);r("flat")},4855:function(e,t,n){"use strict";var r=n(60614),i=n(70111),o=n(3070),a=n(79518),s=n(5112),u=n(56339),c=s("hasInstance"),l=Function.prototype;c in l||o.f(l,c,{value:u((function(e){if(!r(this)||!i(e))return!1;var t=this.prototype;if(!i(t))return e instanceof this;while(e=a(e))if(t===e)return!0;return!1}),c)})},31354:function(e,t,n){"use strict";var r=n(82109),i=n(17854),o=n(1702),a=n(19303),s=n(50863),u=n(38415),c=n(20403),l=n(47293),f=i.RangeError,h=i.String,d=i.isFinite,p=Math.abs,y=Math.floor,v=Math.pow,b=Math.round,g=o(1..toExponential),m=o(u),w=o("".slice),x="-6.9000e-11"===g(-69e-12,4)&&"1.25e+0"===g(1.255,2)&&"1.235e+4"===g(12345,3)&&"3e+1"===g(25,0),_=l((function(){g(1,1/0)}))&&l((function(){g(1,-1/0)})),E=!l((function(){g(1/0,1/0)}))&&!l((function(){g(NaN,1/0)})),k=!x||!_||!E;r({target:"Number",proto:!0,forced:k},{toExponential:function(e){var t=s(this);if(void 0===e)return g(t);var n=a(e);if(!d(t))return h(t);if(n<0||n>20)throw f("Incorrect fraction digits");if(x)return g(t,n);var r="",i="",o=0,u="",l="";if(t<0&&(r="-",t=-t),0===t)o=0,i=m("0",n+1);else{var _=c(t);o=y(_);var E=0,k=v(10,o-n);E=b(t/k),2*t>=(2*E+1)*k&&(E+=1),E>=v(10,n+1)&&(E/=10,o+=1),i=h(E)}return 0!==n&&(i=w(i,0,1)+"."+w(i,1)),0===o?(u="+",l="0"):(u=o>0?"+":"-",l=h(p(o))),i+="e"+u+l,r+i}})},52586:function(e,t,n){var r=n(82109),i=n(19670),o=n(31236).f;r({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=o(i(e),t);return!(n&&!n.configurable)&&delete e[t]}})},83593:function(e,t,n){var r=n(82109),i=n(46916),o=n(19670),a=n(70111),s=n(45032),u=n(47293),c=n(3070),l=n(31236),f=n(79518),h=n(79114);function d(e,t,n){var r,u,p,y=arguments.length<4?e:arguments[3],v=l.f(o(e),t);if(!v){if(a(u=f(e)))return d(u,t,n,y);v=h(0)}if(s(v)){if(!1===v.writable||!a(y))return!1;if(r=l.f(y,t)){if(r.get||r.set||!1===r.writable)return!1;r.value=n,c.f(y,t,r)}else c.f(y,t,h(0,n))}else{if(p=v.set,void 0===p)return!1;i(p,y,n)}return!0}var p=u((function(){var e=function(){},t=c.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}));r({target:"Reflect",stat:!0,forced:p},{set:d})},92401:function(e,t,n){var r=n(97235);r("hasInstance")},66760:function(e,t,n){n(41539),n(81299),n(74819),n(38880);var r=n(96338);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get,e.exports.__esModule=!0,e.exports["default"]=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},e.exports.__esModule=!0,e.exports["default"]=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},96338:function(e,t,n){var r=n(40358);function i(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=r(e),null===e)break;return e}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports},30020:function(e,t,n){var r=n(88484),i=n(68777),o=n(94950),a=n(97740);function s(e){return r(e)||i(e)||o(e)||a()}e.exports=s,e.exports.__esModule=!0,e.exports["default"]=e.exports},74384:function(e,t,n){"use strict";var r=n(17964)["default"];n(83753),n(38862),n(41539),n(2707),n(47941),e.exports=function e(t){return null===t||"object"!==r(t)||null!=t.toJSON?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((function(t,n,i){var o=0===i?"":",",a=void 0===n||"symbol"===r(n)?null:n;return t+o+e(a)}),"")+"]":"{"+Object.keys(t).sort().reduce((function(n,i,o){if(void 0===t[i]||"symbol"===r(t[i]))return n;var a=0===n.length?"":",";return n+a+e(i)+":"+e(t[i])}),"")+"}"}},81418:function(e,t,n){n(41539),n(78783),n(33948),n(41637),n(82526),n(41817),n(32165),n(18264),n(74916),n(77601),n(21703),n(21249),n(54747),n(36210),n(82472),n(48675),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016),n(69600),n(47042),n(39714),n(23123),n(73210),n(15306),n(87714),n(82801),n(1174),n(68309),function(e){(function(t){var n={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};function r(e){return e&&DataView.prototype.isPrototypeOf(e)}if(n.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&i.indexOf(Object.prototype.toString.call(e))>-1};function a(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function s(e){return"string"!==typeof e&&(e=String(e)),e}function u(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n.iterable&&(t[Symbol.iterator]=function(){return t}),t}function c(e){this.map={},e instanceof c?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function h(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function d(e){var t=new FileReader,n=f(t);return t.readAsText(e),n}function p(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:n.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:n.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():n.arrayBuffer&&n.blob&&r(e)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return d(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(p(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(e,t){e=a(e),t=s(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},c.prototype["delete"]=function(e){delete this.map[a(e)]},c.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},c.prototype.set=function(e,t){this.map[a(e)]=s(t)},c.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},c.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),u(e)},c.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),u(e)},c.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),u(e)},n.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(e){var t=e.toUpperCase();return b.indexOf(t)>-1?t:e}function m(e,t){t=t||{};var n=t.body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=g(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function x(e){var t=new c,n=e.replace(/\r?\n[\t ]+/g," ");return n.split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},v.call(m.prototype),v.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];_.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(S){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function k(e,r){return new Promise((function(i,o){var a=new m(e,r);if(a.signal&&a.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:x(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;i(new _(t,e))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new t.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&n.blob&&(s.responseType="blob"),a.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),a.signal&&(a.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",u)}),s.send("undefined"===typeof a._bodyInit?null:a._bodyInit)}))}k.polyfill=!0,e.fetch||(e.fetch=k,e.Headers=c,e.Request=m,e.Response=_),t.Headers=c,t.Request=m,t.Response=_,t.fetch=k,Object.defineProperty(t,"__esModule",{value:!0})})({})}("undefined"!==typeof self?self:this)},20157:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(37394),t),i(n(15707),t),i(n(62802),t),i(n(82240),t),i(n(38786),t),i(n(57331),t),i(n(443),t)},37394:function(e,t,n){"use strict";var r=n(13861)["default"],i=n(5276)["default"],o=n(16742)["default"],a=n(17964)["default"],s=n(20172)["default"],u=n(20378)["default"];n(78975),n(47941),n(92222),n(38862),n(69600),n(21703),n(23157),n(41539),n(78783),n(33948),n(21249),n(47042),n(74916),n(77601),Object.defineProperty(t,"__esModule",{value:!0}),t.defaultExpandOptions=t.ContextParser=void 0,n(81418);var c=n(15600),l=n(15707),f=n(62802),h=n(57331),d=n(443),p=n(74384),y=function(){function e(t){s(this,e),t=t||{},this.documentLoader=t.documentLoader||new f.FetchDocumentLoader,this.documentCache={},this.validateContext=!t.skipValidation,this.expandContentTypeToBase=!!t.expandContentTypeToBase,this.remoteContextsDepthLimit=t.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps=!("redirectSchemaOrgHttps"in t)||!!t.redirectSchemaOrgHttps}return u(e,[{key:"idifyReverseTerms",value:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],i=e[r];if(i&&"object"===a(i)&&i["@reverse"]&&!i["@id"]){if("string"!==typeof i["@reverse"]||d.Util.isValidKeyword(i["@reverse"]))throw new l.ErrorCoded("Invalid @reverse value, must be absolute IRI or blank node: '".concat(i["@reverse"],"'"),l.ERROR_CODES.INVALID_IRI_MAPPING);i["@id"]=i["@reverse"],d.Util.isPotentialKeyword(i["@reverse"])?delete i["@reverse"]:i["@reverse"]=!0}}return e}},{key:"expandPrefixedTerms",value:function(e,t){for(var n=e.getContextRaw(),r=0,i=Object.keys(n);r<i.length;r++){var o=i[r];if(d.Util.EXPAND_KEYS_BLACKLIST.indexOf(o)<0&&!d.Util.isReservedInternalKeyword(o)){var s=n[o];if(d.Util.isPotentialKeyword(o)&&d.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(o)>=0&&("@type"!==o||"object"===a(n[o])&&!n[o]["@protected"]&&"@set"!==n[o]["@container"]))throw new l.ErrorCoded("Keywords can not be aliased to something else.\nTried mapping ".concat(o," to ").concat(JSON.stringify(s)),l.ERROR_CODES.KEYWORD_REDEFINITION);if(d.Util.ALIAS_RANGE_BLACKLIST.indexOf(d.Util.getContextValueId(s))>=0)throw new l.ErrorCoded("Aliasing to certain keywords is not allowed.\nTried mapping ".concat(o," to ").concat(JSON.stringify(s)),l.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(s&&d.Util.isPotentialKeyword(d.Util.getContextValueId(s))&&!0===s["@prefix"])throw new l.ErrorCoded("Tried to use keyword aliases as prefix: '".concat(o,"': '").concat(JSON.stringify(s),"'"),l.ERROR_CODES.INVALID_TERM_DEFINITION);while(d.Util.isPrefixValue(n[o])){var u=n[o],c=!1;if("string"===typeof u)n[o]=e.expandTerm(u,!0),c=c||u!==n[o];else{var f=u["@id"],h=u["@type"],p=!("@prefix"in u)||d.Util.isValidIri(o);if("@id"in u)void 0!==f&&null!==f&&"string"===typeof f&&(n[o]["@id"]=e.expandTerm(f,!0),c=c||f!==n[o]["@id"]);else if(!d.Util.isPotentialKeyword(o)&&p){var y=e.expandTerm(o,!0);y!==o&&(n[o]["@id"]=y,c=!0)}!h||"string"!==typeof h||"@vocab"===h||u["@container"]&&u["@container"]["@type"]||!p||(n[o]["@type"]=e.expandTerm(h,!0),t&&h===n[o]["@type"]&&(n[o]["@type"]=e.expandTerm(h,!1)),c=c||h!==n[o]["@type"])}if(!c)break}}}}},{key:"normalize",value:function(e,t){var n=t.processingMode,r=t.normalizeLanguageTags;if(r||1===n)for(var i=0,o=Object.keys(e);i<o.length;i++){var s=o[i];if("@language"===s&&"string"===typeof e[s])e[s]=e[s].toLowerCase();else{var u=e[s];u&&"object"===a(u)&&"string"===typeof u["@language"]&&(u["@language"]=u["@language"].toLowerCase())}}}},{key:"containersToHash",value:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],s=e[r];if(s&&"object"===a(s))if("string"===typeof s["@container"])s["@container"]=o({},s["@container"],!0);else if(Array.isArray(s["@container"])){var u,c={},l=i(s["@container"]);try{for(l.s();!(u=l.n()).done;){var f=u.value;c[f]=!0}}catch(h){l.e(h)}finally{l.f()}s["@container"]=c}}}},{key:"applyScopedProtected",value:function(e,t){var n=t.processingMode;if(n&&n>=1.1&&e["@protected"]){for(var r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];if(!d.Util.isReservedInternalKeyword(o)&&(!d.Util.isPotentialKeyword(o)&&!d.Util.isTermProtected(e,o))){var s=e[o];s&&"object"===a(s)?"@protected"in e[o]||(e[o]["@protected"]=!0):e[o]={"@id":s,"@protected":!0}}}delete e["@protected"]}}},{key:"validateKeywordRedefinitions",value:function(e,t,n){for(var r=0,i=Object.keys(t);r<i.length;r++){var o=i[r];if(d.Util.isTermProtected(e,o)){if("string"===typeof t[o]){var a=d.Util.isSimpleTermDefinitionPrefix(t[o],n);t[o]={"@id":t[o]},a&&(t[o]["@prefix"]=!0,e[o]["@prefix"]=!0)}var s=p(e[o]);t[o]["@protected"]=!0;var u=p(t[o]);if(s!==u)throw new l.ErrorCoded("Attempted to override the protected keyword ".concat(o," from ").concat(JSON.stringify(d.Util.getContextValueId(e[o]))," to ").concat(JSON.stringify(d.Util.getContextValueId(t[o]))),l.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}}}},{key:"validate",value:function(t,n){for(var r=n.processingMode,i=0,o=Object.keys(t);i<o.length;i++){var s=o[i];if(!d.Util.isReservedInternalKeyword(s)){if(""===s)throw new l.ErrorCoded("The empty term is not allowed, got: '".concat(s,"': '").concat(JSON.stringify(t[s]),"'"),l.ERROR_CODES.INVALID_TERM_DEFINITION);var u=t[s],c=a(u);if(d.Util.isPotentialKeyword(s)){switch(s.substr(1)){case"vocab":if(null!==u&&"string"!==c)throw new l.ErrorCoded("Found an invalid @vocab IRI: ".concat(u),l.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(null!==u&&"string"!==c)throw new l.ErrorCoded("Found an invalid @base IRI: ".concat(t[s]),l.ERROR_CODES.INVALID_BASE_IRI);break;case"language":null!==u&&e.validateLanguage(u,!0,l.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(null!==u&&"number"!==c)throw new l.ErrorCoded("Found an invalid @version number: ".concat(u),l.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":null!==u&&e.validateDirection(u,!0);break;case"propagate":if(1===r)throw new l.ErrorCoded("Found an illegal @propagate keyword: ".concat(u),l.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(null!==u&&"boolean"!==c)throw new l.ErrorCoded("Found an invalid @propagate value: ".concat(u),l.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(d.Util.isValidKeyword(s)&&d.Util.isValidKeyword(d.Util.getContextValueId(u)))throw new l.ErrorCoded("Illegal keyword alias in term value, found: '".concat(s,"': '").concat(d.Util.getContextValueId(u),"'"),l.ERROR_CODES.KEYWORD_REDEFINITION)}else if(null!==u)switch(c){case"string":if(d.Util.getPrefix(u,t)===s)throw new l.ErrorCoded("Detected cyclical IRI mapping in context entry: '".concat(s,"': '").concat(JSON.stringify(u),"'"),l.ERROR_CODES.CYCLIC_IRI_MAPPING);if(d.Util.isValidIriWeak(s)){if("@type"===u)throw new l.ErrorCoded("IRIs can not be mapped to @type, found: '".concat(s,"': '").concat(u,"'"),l.ERROR_CODES.INVALID_IRI_MAPPING);if(d.Util.isValidIri(u)&&u!==new h.JsonLdContextNormalized(t).expandTerm(s))throw new l.ErrorCoded("IRIs can not be mapped to other IRIs, found: '".concat(s,"': '").concat(u,"'"),l.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!d.Util.isCompactIri(s)&&!("@id"in u)&&("@id"===u["@type"]?!t["@base"]:!t["@vocab"]))throw new l.ErrorCoded("Missing @id in context entry: '".concat(s,"': '").concat(JSON.stringify(u),"'"),l.ERROR_CODES.INVALID_IRI_MAPPING);for(var f=0,p=Object.keys(u);f<p.length;f++){var y=p[f],v=u[y];if(v)switch(y){case"@id":if(d.Util.isValidKeyword(v)&&"@type"!==v&&"@id"!==v&&"@graph"!==v)throw new l.ErrorCoded("Illegal keyword alias in term value, found: '".concat(s,"': '").concat(JSON.stringify(u),"'"),l.ERROR_CODES.INVALID_IRI_MAPPING);if(d.Util.isValidIriWeak(s)){if("@type"===v)throw new l.ErrorCoded("IRIs can not be mapped to @type, found: '".concat(s,"': '").concat(JSON.stringify(u),"'"),l.ERROR_CODES.INVALID_IRI_MAPPING);if(d.Util.isValidIri(v)&&v!==new h.JsonLdContextNormalized(t).expandTerm(s))throw new l.ErrorCoded("IRIs can not be mapped to other IRIs, found: '".concat(s,"': '").concat(JSON.stringify(u),"'"),l.ERROR_CODES.INVALID_IRI_MAPPING)}if("string"!==typeof v)throw new l.ErrorCoded("Detected non-string @id in context entry: '".concat(s,"': '").concat(JSON.stringify(u),"'"),l.ERROR_CODES.INVALID_IRI_MAPPING);if(d.Util.getPrefix(v,t)===s)throw new l.ErrorCoded("Detected cyclical IRI mapping in context entry: '".concat(s,"': '").concat(JSON.stringify(u),"'"),l.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if("@type"===u["@container"]&&"@id"!==v&&"@vocab"!==v)throw new l.ErrorCoded("@container: @type only allows @type: @id or @vocab, but got: '".concat(s,"': '").concat(v,"'"),l.ERROR_CODES.INVALID_TYPE_MAPPING);if("string"!==typeof v)throw new l.ErrorCoded("The value of an '@type' must be a string, got '".concat(JSON.stringify(c),"'"),l.ERROR_CODES.INVALID_TYPE_MAPPING);if("@id"!==v&&"@vocab"!==v&&(1===r||"@json"!==v)&&(1===r||"@none"!==v)&&("_"===v[0]||!d.Util.isValidIri(v)))throw new l.ErrorCoded("A context @type must be an absolute IRI, found: '".concat(s,"': '").concat(v,"'"),l.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if("string"===typeof v&&u["@id"]&&u["@id"]!==v)throw new l.ErrorCoded("Found non-matching @id and @reverse term values in '".concat(s,"':'").concat(v,"' and '").concat(u["@id"],"'"),l.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in u)throw new l.ErrorCoded("@nest is not allowed in the reverse property '".concat(s,"'"),l.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(1===r&&(Object.keys(v).length>1||d.Util.CONTAINERS_1_0.indexOf(Object.keys(v)[0])<0))throw new l.ErrorCoded("Invalid term @container for '".concat(s,"' ('").concat(Object.keys(v),"') in 1.0, must be only one of ").concat(d.Util.CONTAINERS_1_0.join(", ")),l.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(var b=0,g=Object.keys(v);b<g.length;b++){var m=g[b];if("@list"===m&&u["@reverse"])throw new l.ErrorCoded("Term value can not be @container: @list and @reverse at the same time on '".concat(s,"'"),l.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(d.Util.CONTAINERS.indexOf(m)<0)throw new l.ErrorCoded("Invalid term @container for '".concat(s,"' ('").concat(m,"'), must be one of ").concat(d.Util.CONTAINERS.join(", ")),l.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":e.validateLanguage(v,!0,l.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":e.validateDirection(v,!0);break;case"@prefix":if(null!==v&&"boolean"!==typeof v)throw new l.ErrorCoded("Found an invalid term @prefix boolean in: '".concat(s,"': '").concat(JSON.stringify(u),"'"),l.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in u)&&!d.Util.isValidIri(s))throw new l.ErrorCoded("Invalid @prefix definition for '".concat(s,"' ('").concat(JSON.stringify(u),"'"),l.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(1===r||!u["@container"]||!u["@container"]["@index"])throw new l.ErrorCoded("Attempt to add illegal key to value object: '".concat(s,"': '").concat(JSON.stringify(u),"'"),l.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(d.Util.isPotentialKeyword(v)&&"@nest"!==v)throw new l.ErrorCoded("Found an invalid term @nest value in: '".concat(s,"': '").concat(JSON.stringify(u),"'"),l.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new l.ErrorCoded("Found an invalid term value: '".concat(s,"': '").concat(u,"'"),l.ERROR_CODES.INVALID_TERM_DEFINITION)}}}}},{key:"applyBaseEntry",value:function(e,t,n){return"string"===typeof e||(n&&!("@base"in e)&&t.parentContext&&"object"===a(t.parentContext)&&"@base"in t.parentContext&&(e["@base"]=t.parentContext["@base"],t.parentContext["@__baseDocument"]&&(e["@__baseDocument"]=!0)),t.baseIRI&&!t.external&&("@base"in e?null===e["@base"]||"string"!==typeof e["@base"]||d.Util.isValidIri(e["@base"])||(e["@base"]=c.resolve(e["@base"],t.parentContext&&t.parentContext["@base"]||t.baseIRI)):(e["@base"]=t.baseIRI,e["@__baseDocument"]=!0))),e}},{key:"normalizeContextIri",value:function(e,t){if(!d.Util.isValidIri(e))try{e=c.resolve(e,t)}catch(n){throw new Error("Invalid context IRI: ".concat(e))}return this.redirectSchemaOrgHttps&&e.startsWith("http://schema.org")&&(e="https://schema.org/"),e}},{key:"parseInnerContexts",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n){var r,i,o,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=0,i=Object.keys(t);case 1:if(!(r<i.length)){e.next=24;break}if(o=i[r],s=t[o],!s||"object"!==a(s)){e.next=21;break}if(!("@context"in s)||null===s["@context"]||n.ignoreScopedContexts){e.next=21;break}if(!this.validateContext){e.next=18;break}return e.prev=7,u=Object.assign({},t),u[o]=Object.assign({},u[o]),delete u[o]["@context"],e.next=13,this.parse(s["@context"],Object.assign(Object.assign({},n),{parentContext:u,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}));case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e["catch"](7),new l.ErrorCoded(e.t0.message,l.ERROR_CODES.INVALID_SCOPED_CONTEXT);case 18:return e.next=20,this.parse(s["@context"],Object.assign(Object.assign({},n),{minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:t}));case 20:s["@context"]=e.sent.getContextRaw();case 21:r++,e.next=1;break;case 24:return e.abrupt("return",t);case 25:case"end":return e.stop()}}),e,this,[[7,15]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"parse",value:function(){var n=r(regeneratorRuntime.mark((function n(r){var i,s,u,c,f,p,y,v,b,g,m,w,x,_,E,k,S,R,O,C,I=this,D=arguments;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=D.length>1&&void 0!==D[1]?D[1]:{},s=i.baseIRI,u=i.parentContext,c=i.external,f=i.processingMode,p=void 0===f?e.DEFAULT_PROCESSING_MODE:f,y=i.normalizeLanguageTags,v=i.ignoreProtection,b=i.minimalProcessing,g=u,m=i.remoteContexts||{},!(Object.keys(m).length>=this.remoteContextsDepthLimit)){n.next=6;break}throw new l.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(m),l.ERROR_CODES.CONTEXT_OVERFLOW);case 6:if(null!==r&&void 0!==r){n.next=12;break}if(v||!g||!d.Util.hasProtectedTerms(g)){n.next=9;break}throw new l.ErrorCoded("Illegal context nullification when terms are protected",l.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);case 9:return n.abrupt("return",new h.JsonLdContextNormalized(this.applyBaseEntry({},i,!1)));case 12:if("string"!==typeof r){n.next=29;break}if(w=this.normalizeContextIri(r,s),x=this.getOverriddenLoad(w,i),!x){n.next=17;break}return n.abrupt("return",new h.JsonLdContextNormalized(x));case 17:return n.t0=this,n.next=20,this.load(w);case 20:return n.t1=n.sent,n.t2=Object.assign(Object.assign({},i),{baseIRI:w,external:!0,remoteContexts:Object.assign(Object.assign({},m),o({},w,!0))}),n.next=24,n.t0.parse.call(n.t0,n.t1,n.t2);case 24:return _=n.sent,this.applyBaseEntry(_.getContextRaw(),i,!0),n.abrupt("return",_);case 29:if(!Array.isArray(r)){n.next=43;break}return E=[],n.next=33,Promise.all(r.map((function(e,t){if("string"===typeof e){var n=I.normalizeContextIri(e,s);E[t]=n;var r=I.getOverriddenLoad(n,i);return r||I.load(n)}return e})));case 33:if(k=n.sent,!b){n.next=36;break}return n.abrupt("return",new h.JsonLdContextNormalized(k));case 36:return n.next=38,k.reduce((function(e,t,n){return e.then((function(e){return I.parse(t,Object.assign(Object.assign({},i),{baseIRI:E[n]||i.baseIRI,external:!!E[n]||i.external,parentContext:e.getContextRaw(),remoteContexts:E[n]?Object.assign(Object.assign({},m),o({},E[n],!0)):m}))}))}),Promise.resolve(new h.JsonLdContextNormalized(g||{})));case 38:return S=n.sent,this.applyBaseEntry(S.getContextRaw(),i,!0),n.abrupt("return",S);case 43:if("object"!==a(r)){n.next=82;break}if(!("@context"in r)){n.next=48;break}return n.next=47,this.parse(r["@context"],i);case 47:return n.abrupt("return",n.sent);case 48:if(r=JSON.parse(JSON.stringify(r)),g&&!b&&(g=JSON.parse(JSON.stringify(g))),R={},c&&delete r["@base"],this.applyBaseEntry(r,i,!0),this.containersToHash(r),!b){n.next=56;break}return n.abrupt("return",new h.JsonLdContextNormalized(r));case 56:if(O={},!("@import"in r)){n.next=68;break}if(!(p>=1.1)){n.next=67;break}if("string"===typeof r["@import"]){n.next=61;break}throw new l.ErrorCoded("An @import value must be a string, but got "+a(r["@import"]),l.ERROR_CODES.INVALID_IMPORT_VALUE);case 61:return n.next=63,this.loadImportContext(this.normalizeContextIri(r["@import"],s));case 63:O=n.sent,delete r["@import"],n.next=68;break;case 67:throw new l.ErrorCoded("Context importing is not supported in JSON-LD 1.0",l.ERROR_CODES.INVALID_CONTEXT_ENTRY);case 68:return R=Object.assign(Object.assign(Object.assign(Object.assign({},R),"object"===a(g)?g:{}),O),r),C=new h.JsonLdContextNormalized(R),n.next=72,this.parseInnerContexts(R,i);case 72:return(R&&R["@version"]||e.DEFAULT_PROCESSING_MODE)>=1.1&&(r["@vocab"]&&"string"===typeof r["@vocab"]||""===r["@vocab"])&&r["@vocab"].indexOf(":")<0&&g&&"@vocab"in g&&(R["@vocab"]=g["@vocab"]+r["@vocab"]),this.idifyReverseTerms(R),this.expandPrefixedTerms(C,this.expandContentTypeToBase),!v&&g&&p>=1.1&&this.validateKeywordRedefinitions(g,R,t.defaultExpandOptions),this.normalize(R,{processingMode:p,normalizeLanguageTags:y}),this.applyScopedProtected(R,{processingMode:p}),this.validateContext&&this.validate(R,{processingMode:p}),n.abrupt("return",C);case 82:throw new l.ErrorCoded("Tried parsing a context that is not a string, array or object, but got ".concat(r),l.ERROR_CODES.INVALID_LOCAL_CONTEXT);case 83:case"end":return n.stop()}}),n,this)})));function i(e){return n.apply(this,arguments)}return i}()},{key:"load",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.documentCache[t],!n){e.next=3;break}return e.abrupt("return","string"===typeof n?n:Array.isArray(n)?n.slice():Object.assign({},n));case 3:return e.prev=3,e.next=6,this.documentLoader.load(t);case 6:r=e.sent,e.next=12;break;case 9:throw e.prev=9,e.t0=e["catch"](3),new l.ErrorCoded("Failed to load remote context ".concat(t,": ").concat(e.t0.message),l.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED);case 12:if("@context"in r){e.next=14;break}throw new l.ErrorCoded("Missing @context in remote context at ".concat(t),l.ERROR_CODES.INVALID_REMOTE_CONTEXT);case 14:return e.abrupt("return",this.documentCache[t]=r["@context"]);case 15:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getOverriddenLoad",value:function(e,t){if(e in(t.remoteContexts||{})){if(t.ignoreRemoteScopedContexts)return e;throw new l.ErrorCoded("Detected a cyclic context inclusion of "+e,l.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}},{key:"loadImportContext",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.load(t);case 2:if(n=e.sent,"object"===a(n)&&!Array.isArray(n)){e.next=5;break}throw new l.ErrorCoded("An imported context must be a single object: "+t,l.ERROR_CODES.INVALID_REMOTE_CONTEXT);case 5:if(!("@import"in n)){e.next=7;break}throw new l.ErrorCoded("An imported context can not import another context: "+t,l.ERROR_CODES.INVALID_CONTEXT_ENTRY);case 7:return this.containersToHash(n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"validateLanguage",value:function(e,t,n){if("string"!==typeof e)throw new l.ErrorCoded("The value of an '@language' must be a string, got '".concat(JSON.stringify(e),"'"),n);if(!d.Util.REGEX_LANGUAGE_TAG.test(e)){if(t)throw new l.ErrorCoded("The value of an '@language' must be a valid language tag, got '".concat(JSON.stringify(e),"'"),n);return!1}return!0}},{key:"validateDirection",value:function(e,t){if("string"!==typeof e)throw new l.ErrorCoded("The value of an '@direction' must be a string, got '".concat(JSON.stringify(e),"'"),l.ERROR_CODES.INVALID_BASE_DIRECTION);if(!d.Util.REGEX_DIRECTION_TAG.test(e)){if(t)throw new l.ErrorCoded("The value of an '@direction' must be 'ltr' or 'rtl', got '".concat(JSON.stringify(e),"'"),l.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}}]),e}();t.ContextParser=y,y.DEFAULT_PROCESSING_MODE=1.1,t.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},15707:function(e,t,n){"use strict";var r=n(20378)["default"],i=n(20172)["default"],o=n(95967)["default"],a=n(13706)["default"],s=n(47254)["default"];n(21703),Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CODES=t.ErrorCoded=void 0;var u=function(e){o(n,e);var t=a(n);function n(e,r){var o;return i(this,n),o=t.call(this,e),o.code=r,o}return r(n)}(s(Error));t.ErrorCoded=u,function(e){e["COLLIDING_KEYWORDS"]="colliding keywords",e["CONFLICTING_INDEXES"]="conflicting indexes",e["CYCLIC_IRI_MAPPING"]="cyclic IRI mapping",e["INVALID_ID_VALUE"]="invalid @id value",e["INVALID_INDEX_VALUE"]="invalid @index value",e["INVALID_NEST_VALUE"]="invalid @nest value",e["INVALID_PREFIX_VALUE"]="invalid @prefix value",e["INVALID_PROPAGATE_VALUE"]="invalid @propagate value",e["INVALID_REVERSE_VALUE"]="invalid @reverse value",e["INVALID_IMPORT_VALUE"]="invalid @import value",e["INVALID_VERSION_VALUE"]="invalid @version value",e["INVALID_BASE_IRI"]="invalid base IRI",e["INVALID_CONTAINER_MAPPING"]="invalid container mapping",e["INVALID_CONTEXT_ENTRY"]="invalid context entry",e["INVALID_CONTEXT_NULLIFICATION"]="invalid context nullification",e["INVALID_DEFAULT_LANGUAGE"]="invalid default language",e["INVALID_INCLUDED_VALUE"]="invalid @included value",e["INVALID_IRI_MAPPING"]="invalid IRI mapping",e["INVALID_JSON_LITERAL"]="invalid JSON literal",e["INVALID_KEYWORD_ALIAS"]="invalid keyword alias",e["INVALID_LANGUAGE_MAP_VALUE"]="invalid language map value",e["INVALID_LANGUAGE_MAPPING"]="invalid language mapping",e["INVALID_LANGUAGE_TAGGED_STRING"]="invalid language-tagged string",e["INVALID_LANGUAGE_TAGGED_VALUE"]="invalid language-tagged value",e["INVALID_LOCAL_CONTEXT"]="invalid local context",e["INVALID_REMOTE_CONTEXT"]="invalid remote context",e["INVALID_REVERSE_PROPERTY"]="invalid reverse property",e["INVALID_REVERSE_PROPERTY_MAP"]="invalid reverse property map",e["INVALID_REVERSE_PROPERTY_VALUE"]="invalid reverse property value",e["INVALID_SCOPED_CONTEXT"]="invalid scoped context",e["INVALID_SCRIPT_ELEMENT"]="invalid script element",e["INVALID_SET_OR_LIST_OBJECT"]="invalid set or list object",e["INVALID_TERM_DEFINITION"]="invalid term definition",e["INVALID_TYPE_MAPPING"]="invalid type mapping",e["INVALID_TYPE_VALUE"]="invalid type value",e["INVALID_TYPED_VALUE"]="invalid typed value",e["INVALID_VALUE_OBJECT"]="invalid value object",e["INVALID_VALUE_OBJECT_VALUE"]="invalid value object value",e["INVALID_VOCAB_MAPPING"]="invalid vocab mapping",e["IRI_CONFUSED_WITH_PREFIX"]="IRI confused with prefix",e["KEYWORD_REDEFINITION"]="keyword redefinition",e["LOADING_DOCUMENT_FAILED"]="loading document failed",e["LOADING_REMOTE_CONTEXT_FAILED"]="loading remote context failed",e["MULTIPLE_CONTEXT_LINK_HEADERS"]="multiple context link headers",e["PROCESSING_MODE_CONFLICT"]="processing mode conflict",e["PROTECTED_TERM_REDEFINITION"]="protected term redefinition",e["CONTEXT_OVERFLOW"]="context overflow",e["INVALID_BASE_DIRECTION"]="invalid base direction",e["RECURSIVE_CONTEXT_INCLUSION"]="recursive context inclusion",e["INVALID_STREAMING_KEY_ORDER"]="invalid streaming key order"}(t.ERROR_CODES||(t.ERROR_CODES={}))},62802:function(e,t,n){"use strict";var r=n(5276)["default"],i=n(13861)["default"],o=n(20172)["default"],a=n(20378)["default"];n(78975),n(41539),n(54747),n(21703),Object.defineProperty(t,"__esModule",{value:!0}),t.FetchDocumentLoader=void 0,n(81418);var s=n(15707),u=n(12121),c=n(15600),l=function(){function e(t){o(this,e),this.fetcher=t}return a(e,[{key:"load",value:function(){var e=i(regeneratorRuntime.mark((function e(t){var n,i,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(this.fetcher||fetch)(t,{headers:new Headers({accept:"application/ld+json"})});case 2:if(n=e.sent,!n.ok||!n.headers){e.next=19;break}if(i=n.headers.get("Content-Type"),i&&(o=i.indexOf(";"),o>0&&(i=i.substr(0,o))),"application/ld+json"!==i){e.next=12;break}return e.next=9,n.json();case 9:return e.abrupt("return",e.sent);case 12:if(!n.headers.has("Link")){e.next=16;break}if(n.headers.forEach((function(e,n){if("link"===n){var i,o=u.parse(e),s=r(o.get("type","application/ld+json"));try{for(s.s();!(i=s.n()).done;){var l=i.value;if("alternate"===l.rel){if(a)throw new Error("Multiple JSON-LD alternate links were found on "+t);a=c.resolve(l.uri,t)}}}catch(f){s.e(f)}finally{s.f()}}})),!a){e.next=16;break}return e.abrupt("return",this.load(a));case 16:throw new s.ErrorCoded("Unsupported JSON-LD media type ".concat(i),s.ERROR_CODES.LOADING_DOCUMENT_FAILED);case 17:e.next=20;break;case 19:throw new Error(n.statusText||"Status code: ".concat(n.status));case 20:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t.FetchDocumentLoader=l},82240:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},38786:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},57331:function(e,t,n){"use strict";var r=n(20172)["default"],i=n(20378)["default"];n(92222),n(38862),n(23157),Object.defineProperty(t,"__esModule",{value:!0}),t.JsonLdContextNormalized=void 0;var o=n(15600),a=n(37394),s=n(15707),u=n(443),c=function(){function e(t){r(this,e),this.contextRaw=t}return i(e,[{key:"getContextRaw",value:function(){return this.contextRaw}},{key:"expandTerm",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.defaultExpandOptions,r=this.contextRaw[e];if(null===r||r&&null===r["@id"])return null;var i=!0;if(r&&t){var c=u.Util.getContextValueId(r);if(c&&c!==e){if("string"===typeof c&&(u.Util.isValidIri(c)||u.Util.isValidKeyword(c)))return c;u.Util.isPotentialKeyword(c)||(i=!1)}}var l=u.Util.getPrefix(e,this.contextRaw),f=this.contextRaw["@vocab"],h=(!!f||""===f)&&f.indexOf(":")<0,d=this.contextRaw["@base"],p=u.Util.isPotentialKeyword(e);if(l){var y=this.contextRaw[l],v=u.Util.getContextValueId(y);if(v){if("string"!==typeof y&&n.allowPrefixForcing){if("_"!==v[0]&&!p&&!y["@prefix"]&&!(e in this.contextRaw))return e}else if(!u.Util.isSimpleTermDefinitionPrefix(v,n))return e;return v+e.substr(l.length+1)}}else{if(t&&(f||""===f||n.allowVocabRelativeToBase&&d&&h)&&!p&&!u.Util.isCompactIri(e)){if(h){if(n.allowVocabRelativeToBase)return(f||d?o.resolve(f,d):"")+e;throw new s.ErrorCoded("Relative vocab expansion for term '".concat(e,"' with vocab '").concat(f,"' is not allowed."),s.ERROR_CODES.INVALID_VOCAB_MAPPING)}return f+e}if(!t&&d&&!p&&!u.Util.isCompactIri(e))return o.resolve(e,d)}if(i)return e;throw new s.ErrorCoded("Invalid IRI mapping found for context entry '".concat(e,"': '").concat(JSON.stringify(r),"'"),s.ERROR_CODES.INVALID_IRI_MAPPING)}},{key:"compactIri",value:function(e,t){if(t&&this.contextRaw["@vocab"]&&e.startsWith(this.contextRaw["@vocab"]))return e.substr(this.contextRaw["@vocab"].length);if(!t&&this.contextRaw["@base"]&&e.startsWith(this.contextRaw["@base"]))return e.substr(this.contextRaw["@base"].length);var n={prefix:"",suffix:e};for(var r in this.contextRaw){var i=this.contextRaw[r];if(i&&!u.Util.isPotentialKeyword(r)){var o=u.Util.getContextValueId(i);if(e.startsWith(o)){var a=e.substr(o.length);if(a)a.length<n.suffix.length&&(n.prefix=r,n.suffix=a);else if(t)return r}}}return n.prefix?n.prefix+":"+n.suffix:e}}]),e}();t.JsonLdContextNormalized=c},443:function(e,t,n){"use strict";var r=n(17964)["default"],i=n(20172)["default"],o=n(20378)["default"];n(74916),n(77601),n(47941),n(23157),Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;var a=function(){function e(){i(this,e)}return o(e,null,[{key:"isCompactIri",value:function(e){return e.indexOf(":")>0&&!(e&&"#"===e[0])}},{key:"getPrefix",value:function(e,t){if(e&&"#"===e[0])return null;var n=e.indexOf(":");if(n>=0){if(e.length>n+1&&"/"===e.charAt(n+1)&&"/"===e.charAt(n+2))return null;var r=e.substr(0,n);if("_"===r)return null;if(t[r])return r}return null}},{key:"getContextValueId",value:function(e){if(null===e||"string"===typeof e)return e;var t=e["@id"];return t||null}},{key:"isSimpleTermDefinitionPrefix",value:function(t,n){return!e.isPotentialKeyword(t)&&("_"===t[0]||n.allowPrefixNonGenDelims||e.isPrefixIriEndingWithGenDelim(t))}},{key:"isPotentialKeyword",value:function(t){return"string"===typeof t&&e.KEYWORD_REGEX.test(t)}},{key:"isPrefixIriEndingWithGenDelim",value:function(t){return e.ENDS_WITH_GEN_DELIM.test(t)}},{key:"isPrefixValue",value:function(e){return e&&("string"===typeof e||e&&"object"===r(e))}},{key:"isValidIri",value:function(t){return Boolean(t&&e.IRI_REGEX.test(t))}},{key:"isValidIriWeak",value:function(t){return!!t&&":"!==t[0]&&e.IRI_REGEX_WEAK.test(t)}},{key:"isValidKeyword",value:function(t){return e.VALID_KEYWORDS[t]}},{key:"isTermProtected",value:function(e,t){var n=e[t];return!("string"===typeof n)&&n&&n["@protected"]}},{key:"hasProtectedTerms",value:function(t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];if(e.isTermProtected(t,i))return!0}return!1}},{key:"isReservedInternalKeyword",value:function(e){return e.startsWith("@__")}}]),e}();t.Util=a,a.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,a.IRI_REGEX_WEAK=/(?::[^:])|\//,a.KEYWORD_REGEX=/^@[a-z]+$/i,a.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,a.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,a.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,a.VALID_KEYWORDS={"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},a.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],a.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],a.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],a.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],a.CONTAINERS_1_0=["@list","@set","@index"]},97077:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(64884),t)},95072:function(e,t,n){"use strict";var r=n(30020)["default"],i=n(20172)["default"],o=n(20378)["default"];n(47042),Object.defineProperty(t,"__esModule",{value:!0}),t.ContextTree=void 0;var a=function(){function e(){i(this,e),this.subTrees={}}return o(e,[{key:"getContext",value:function(e){if(e.length>0){var t=r(e),n=t[0],i=t.slice(1),o=this.subTrees[n];if(o){var a=o.getContext(i);if(a)return a.then((function(e){var t=e.context,n=e.depth;return{context:t,depth:n+1}}))}}return this.context?this.context.then((function(e){return{context:e,depth:0}})):null}},{key:"setContext",value:function(t,n){if(0===t.length)this.context=n;else{var i=r(t),o=i[0],a=i.slice(1),s=this.subTrees[o];s||(s=this.subTrees[o]=new e),s.setContext(a,n)}}},{key:"removeContext",value:function(e){this.setContext(e,null)}}]),e}();t.ContextTree=a},64884:function(e,t,n){"use strict";var r=n(5276)["default"],i=n(13861)["default"],o=n(20172)["default"],a=n(20378)["default"],s=n(159)["default"],u=n(95967)["default"],c=n(13706)["default"];n(78975),n(41539),n(21703),n(40561),n(47042),n(74916),n(77601),n(21249),n(43290),n(33948),n(2707),n(27852),n(54747),n(92222),Object.defineProperty(t,"__esModule",{value:!0}),t.JsonLdParser=void 0;var l=n(78296),f=n(20157),h=n(66639),d=n(54917),p=n(75288),y=n(59369),v=n(26016),b=n(94422),g=n(25323),m=n(30640),w=n(82822),x=n(25116),_=n(71867),E=n(64133),k=n(26453),S=n(989),R=n(51106),O=n(12121),C=function(e){u(n,e);var t=c(n);function n(e){var r;return o(this,n),r=t.call(this,{readableObjectMode:!0}),e=e||{},r.options=e,r.parsingContext=new S.ParsingContext(Object.assign({parser:s(r)},e)),r.util=new R.Util({dataFactory:e.dataFactory,parsingContext:r.parsingContext}),r.jsonParser=new l,r.contextJobs=[],r.typeJobs=[],r.contextAwaitingJobs=[],r.lastDepth=0,r.lastKeys=[],r.lastOnValueJob=Promise.resolve(),r.attachJsonParserListeners(),r.on("end",(function(){"undefined"!==typeof r.jsonParser.mode&&r.emit("error",new Error("Unclosed document"))})),r}return a(n,[{key:"import",value:function(e){var t=new h.PassThrough({readableObjectMode:!0});e.on("error",(function(e){return r.emit("error",e)})),e.on("data",(function(e){return t.push(e)})),e.on("end",(function(){return t.push(null)}));var r=t.pipe(new n(this.options));return r}},{key:"_transform",value:function(e,t,n){this.jsonParser.write(e),this.lastOnValueJob.then((function(){return n()}),(function(e){return n(e)}))}},{key:"newOnValueJob",value:function(){var e=i(regeneratorRuntime.mark((function e(t,i,o,a){var s,u,c,l,h,d,y,v,b,g,m,w;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=!0,!(a&&o<this.lastDepth)){e.next=13;break}return u=this.parsingContext.listPointerStack[this.lastDepth],u&&(u.value&&this.emit("data",this.util.dataFactory.quad(u.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),u.listId.listHead=!0,this.parsingContext.idStack[u.listRootDepth+1]=[u.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),e.next=6,p.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth);case 6:if(!e.sent){e.next=11;break}this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),s=!1,e.next=13;break;case 11:return e.next=13,this.flushBuffer(this.lastDepth,this.lastKeys);case 13:return e.next=15,this.util.unaliasKeyword(t[o],t,o);case 15:return c=e.sent,e.next=18,this.util.unaliasKeywordParent(t,o);case 18:l=e.sent,this.parsingContext.emittedStack[o]=!0,h=!0,f.Util.isValidKeyword(c)&&"@reverse"===l&&"@context"!==c&&this.emit("error",new f.ErrorCoded("Found the @id '".concat(i,"' inside an @reverse property"),f.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP)),d=!1,this.parsingContext.validationStack.length>1&&(d=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property),y=Math.max(1,this.parsingContext.validationStack.length-1);case 25:if(!(y<t.length-1)){e.next=42;break}if(e.t0=this.parsingContext.validationStack[y],e.t0){e.next=31;break}return e.next=30,this.validateKey(t.slice(0,y+1),y,d);case 30:e.t0=this.parsingContext.validationStack[y]=e.sent;case 31:if(v=e.t0,v.valid){e.next=38;break}return this.parsingContext.emittedStack[o]=!1,h=!1,e.abrupt("break",42);case 38:!d&&v.property&&(d=!0);case 39:y++,e.next=25;break;case 42:if(this.util.isLiteral(o)&&(h=!1),!h){e.next=67;break}b=r(n.ENTRY_HANDLERS),e.prev=45,b.s();case 47:if((g=b.n()).done){e.next=59;break}return m=g.value,e.next=51,m.test(this.parsingContext,this.util,c,t,o);case 51:if(w=e.sent,!w){e.next=57;break}return e.next=55,m.handle(this.parsingContext,this.util,c,t,i,o,w);case 55:return m.isStackProcessor()&&(this.parsingContext.processingStack[o]=!0),e.abrupt("break",59);case 57:e.next=47;break;case 59:e.next=64;break;case 61:e.prev=61,e.t1=e["catch"](45),b.e(e.t1);case 64:return e.prev=64,b.f(),e.finish(64);case 67:if(0!==o||!Array.isArray(i)){e.next=70;break}return e.next=70,this.util.validateValueIndexes(i);case 70:s&&o<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=o,this.lastKeys=t,this.parsingContext.unaliasedKeywordCacheStack.splice(o-1);case 74:case"end":return e.stop()}}),e,this,[[45,61,64,67]])})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"flushStacks",value:function(e){this.parsingContext.processingStack.splice(e,1),this.parsingContext.processingType.splice(e,1),this.parsingContext.emittedStack.splice(e,1),this.parsingContext.idStack.splice(e,1),this.parsingContext.graphStack.splice(e+1,1),this.parsingContext.graphContainerTermStack.splice(e,1),this.parsingContext.jsonLiteralStack.splice(e,1),this.parsingContext.validationStack.splice(e-1,2),this.parsingContext.literalStack.splice(e,this.parsingContext.literalStack.length-e)}},{key:"flushBuffer",value:function(){var e=i(regeneratorRuntime.mark((function e(t,n){var i,o,a,s,u,c,l,f,h,d,p,y,v,b,g,m,w,x,_,E,k,S,R,O,C;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=this.parsingContext.idStack[t],i||(i=this.parsingContext.idStack[t]=[this.util.dataFactory.blankNode()]),o=this.parsingContext.unidentifiedValuesBuffer[t],!o){e.next=49;break}a=r(i),e.prev=5,a.s();case 7:if((s=a.n()).done){e.next=38;break}return u=s.value,e.next=11,this.util.getDepthOffsetGraph(t,n);case 11:if(c=e.sent,!(this.parsingContext.graphStack[t]||c>=0)){e.next=16;break}e.t0=this.parsingContext.idStack[t-c-1],e.next=20;break;case 16:return e.next=18,this.util.getGraphContainerValue(n,t);case 18:e.t1=e.sent,e.t0=[e.t1];case 20:if(l=e.t0,!l){e.next=26;break}f=r(l);try{for(f.s();!(h=f.n()).done;){d=h.value,this.parsingContext.emittedStack[t]=!0,p=r(o);try{for(p.s();!(y=p.n()).done;)v=y.value,v.reverse?this.parsingContext.emitQuad(t,this.util.dataFactory.quad(v.object,v.predicate,u,d)):this.parsingContext.emitQuad(t,this.util.dataFactory.quad(u,v.predicate,v.object,d))}catch(I){p.e(I)}finally{p.f()}}}catch(I){f.e(I)}finally{f.f()}e.next=36;break;case 26:return e.t2=this.parsingContext,e.t3=t,e.next=30,this.util.getDepthOffsetGraph(t,n);case 30:e.t4=e.sent,e.t5=e.t3-e.t4,e.t6=e.t5-1,b=e.t2.getUnidentifiedGraphBufferSafe.call(e.t2,e.t6),g=r(o);try{for(g.s();!(m=g.n()).done;)w=m.value,w.reverse?b.push({object:u,predicate:w.predicate,subject:w.object}):b.push({object:w.object,predicate:w.predicate,subject:u})}catch(I){g.e(I)}finally{g.f()}case 36:e.next=7;break;case 38:e.next=43;break;case 40:e.prev=40,e.t7=e["catch"](5),a.e(e.t7);case 43:return e.prev=43,a.f(),e.finish(43);case 46:this.parsingContext.unidentifiedValuesBuffer.splice(t,1),this.parsingContext.literalStack.splice(t,1),this.parsingContext.jsonLiteralStack.splice(t,1);case 49:if(x=this.parsingContext.unidentifiedGraphsBuffer[t],x){_=r(i);try{for(_.s();!(E=_.n()).done;){k=E.value,S=1!==t||"BlankNode"!==k.termType||this.parsingContext.topLevelProperties?k:this.util.getDefaultGraph(),this.parsingContext.emittedStack[t]=!0,R=r(x);try{for(R.s();!(O=R.n()).done;)C=O.value,this.parsingContext.emitQuad(t,this.util.dataFactory.quad(C.subject,C.predicate,C.object,S))}catch(I){R.e(I)}finally{R.f()}}}catch(I){_.e(I)}finally{_.f()}this.parsingContext.unidentifiedGraphsBuffer.splice(t,1)}case 51:case"end":return e.stop()}}),e,this,[[5,40,43,46]])})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"validateKey",value:function(){var e=i(regeneratorRuntime.mark((function e(t,i,o){var a,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=r(n.ENTRY_HANDLERS),e.prev=1,a.s();case 3:if((s=a.n()).done){e.next=11;break}return u=s.value,e.next=7,u.validate(this.parsingContext,this.util,t,i,o);case 7:if(!e.sent){e.next=9;break}return e.abrupt("return",{valid:!0,property:o||u.isPropertyHandler()});case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),a.e(e.t0);case 16:return e.prev=16,a.f(),e.finish(16);case 19:return e.abrupt("return",{valid:!1,property:!1});case 20:case"end":return e.stop()}}),e,this,[[1,13,16,19]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"attachJsonParserListeners",value:function(){var e=this;this.jsonParser.onValue=function(t){var n=e.jsonParser.stack.length,r=new Array(n+1).fill(0).map((function(t,r){return r===n?e.jsonParser.key:e.jsonParser.stack[r].key}));if(!e.isParsingContextInner(n)){var i=function(){return e.newOnValueJob(r,t,n,!0)};if(e.parsingContext.streamingProfile||e.parsingContext.contextTree.getContext(r.slice(0,-1)))e.lastOnValueJob=e.lastOnValueJob.then(i);else if("@context"===r[n]){var o=e.contextJobs[n];o||(o=e.contextJobs[n]=[]),o.push(i)}else"@type"===r[n]||"number"===typeof r[n]&&"@type"===r[n-1]?e.typeJobs.push({job:i,keys:r.slice(0,r.length-1)}):e.contextAwaitingJobs.push({job:i,keys:r});e.parsingContext.streamingProfile||0!==n||(e.lastOnValueJob=e.lastOnValueJob.then((function(){return e.executeBufferedJobs()})))}},this.jsonParser.onError=function(t){e.emit("error",t)}}},{key:"isParsingContextInner",value:function(e){for(var t=e;t>0;t--)if("@context"===this.jsonParser.stack[t-1].key)return!0;return!1}},{key:"executeBufferedJobs",value:function(){var e=i(regeneratorRuntime.mark((function e(){var t,n,i,o,a,s,u,c,l,f,h,d,p,y,v,b,g,m,w,x,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=r(this.contextJobs),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=25;break}if(i=n.value,!i){e.next=23;break}o=r(i),e.prev=7,o.s();case 9:if((a=o.n()).done){e.next=15;break}return s=a.value,e.next=13,s();case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](7),o.e(e.t0);case 20:return e.prev=20,o.f(),e.finish(20);case 23:e.next=3;break;case 25:e.next=30;break;case 27:e.prev=27,e.t1=e["catch"](1),t.e(e.t1);case 30:return e.prev=30,t.f(),e.finish(30);case 33:this.parsingContext.unaliasedKeywordCacheStack.splice(0),u=r(this.contextAwaitingJobs),e.prev=35,u.s();case 37:if((c=u.n()).done){e.next=68;break}if(l=c.value,!(this.typeJobs.length>0)){e.next=64;break}for(f=[],h=[],d=0;d<this.typeJobs.length;d++)p=this.typeJobs[d],R.Util.isPrefixArray(p.keys,l.keys)&&(f.push(p),h.push(d));y=f.sort((function(e,t){return e.keys.length-t.keys.length})),v=r(y),e.prev=45,v.s();case 47:if((b=v.n()).done){e.next=53;break}return g=b.value,e.next=51,g.job();case 51:e.next=47;break;case 53:e.next=58;break;case 55:e.prev=55,e.t2=e["catch"](45),v.e(e.t2);case 58:return e.prev=58,v.f(),e.finish(58);case 61:m=h.sort().reverse(),w=r(m);try{for(w.s();!(x=w.n()).done;)_=x.value,this.typeJobs.splice(_,1)}catch(E){w.e(E)}finally{w.f()}case 64:return e.next=66,l.job();case 66:e.next=37;break;case 68:e.next=73;break;case 70:e.prev=70,e.t3=e["catch"](35),u.e(e.t3);case 73:return e.prev=73,u.f(),e.finish(73);case 76:case"end":return e.stop()}}),e,this,[[1,27,30,33],[7,17,20,23],[35,70,73,76],[45,55,58,61]])})));function t(){return e.apply(this,arguments)}return t}()}],[{key:"fromHttpResponse",value:function(e,t,i,o){var a,s;if("application/ld+json"!==t){if("application/json"!==t&&!t.endsWith("+json"))throw new f.ErrorCoded("Unsupported JSON-LD media type ".concat(t),f.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(i&&i.has("Link")&&i.forEach((function(t,n){if("link"===n){var i,o=O.parse(t),s=r(o.get("rel","http://www.w3.org/ns/json-ld#context"));try{for(s.s();!(i=s.n()).done;){var u=i.value;if(a)throw new f.ErrorCoded("Multiple JSON-LD context link headers were found on "+e,f.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);a=u.uri}}catch(c){s.e(c)}finally{s.f()}}})),!a&&!(null===o||void 0===o?void 0:o.ignoreMissingContextLinkHeader))throw new f.ErrorCoded("Missing context link header for media type ".concat(t," on ").concat(e),f.ERROR_CODES.LOADING_DOCUMENT_FAILED)}if(i&&i.has("Content-Type")){var u=i.get("Content-Type"),c=/; *profile=([^"]*)/.exec(u);c&&"http://www.w3.org/ns/json-ld#streaming"===c[1]&&(s=!0)}return new n(Object.assign({baseIRI:e,context:a,streamingProfile:s},o||{}))}}]),n}(h.Transform);t.JsonLdParser=C,C.DEFAULT_PROCESSING_MODE="1.1",C.ENTRY_HANDLERS=[new d.EntryHandlerArrayValue,new b.EntryHandlerKeywordContext,new m.EntryHandlerKeywordId,new w.EntryHandlerKeywordIncluded,new g.EntryHandlerKeywordGraph,new x.EntryHandlerKeywordNest,new _.EntryHandlerKeywordType,new k.EntryHandlerKeywordValue,new p.EntryHandlerContainer,new E.EntryHandlerKeywordUnknownFallback,new v.EntryHandlerPredicate,new y.EntryHandlerInvalidFallback]},989:function(e,t,n){"use strict";var r=n(5276)["default"],i=n(17964)["default"],o=n(13861)["default"],a=n(20172)["default"],s=n(20378)["default"];n(78975),n(41539),n(92222),n(47042),n(40561),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.ParsingContext=void 0;var u=n(20157),c=n(15707),l=n(95072),f=n(64884),h=function(){function e(t){var n=this;a(this,e),this.contextParser=new u.ContextParser({documentLoader:t.documentLoader,skipValidation:t.skipContextValidation}),this.streamingProfile=!!t.streamingProfile,this.baseIRI=t.baseIRI,this.produceGeneralizedRdf=!!t.produceGeneralizedRdf,this.allowSubjectList=!!t.allowSubjectList,this.processingMode=t.processingMode||f.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!t.strictValues,this.validateValueIndexes=!!t.validateValueIndexes,this.defaultGraph=t.defaultGraph,this.rdfDirection=t.rdfDirection,this.normalizeLanguageTags=t.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=t.streamingProfileAllowOutOfOrderPlainType,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new l.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=t.parser,t.context?(this.rootContext=this.parseContext(t.context),this.rootContext.then((function(e){return n.validateContext(e)}))):this.rootContext=Promise.resolve(new u.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}return s(e,[{key:"parseContext",value:function(){var e=o(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.contextParser.parse(t,{baseIRI:this.baseIRI,ignoreProtection:r,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:n,processingMode:this.activeProcessingMode}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"validateContext",value:function(e){var t=e.getContextRaw()["@version"];if(t){if(this.activeProcessingMode&&t>this.activeProcessingMode)throw new c.ErrorCoded("Unsupported JSON-LD version '".concat(t,"' under active processing mode ").concat(this.activeProcessingMode,"."),c.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&t<this.activeProcessingMode)throw new c.ErrorCoded("Invalid JSON-LD version ".concat(t," under active processing mode ").concat(this.activeProcessingMode,"."),c.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=t}}},{key:"getContext",value:function(){var e=o(regeneratorRuntime.mark((function e(t){var n,r,o,a,s,c,l,f,h,d,p=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=p.length>1&&void 0!==p[1]?p[1]:1,r=t;while("number"===typeof t[t.length-1])t=t.slice(0,t.length-1);return n&&(t=t.slice(0,-n)),e.next=6,this.getContextPropagationAware(t);case 6:o=e.sent,a=o.context,s=a.getContextRaw(),c=o.depth;case 10:if(!(c<r.length-n)){e.next=22;break}if(l=r[c],f=s[l],!f||"object"!==i(f)||!("@context"in f)){e.next=19;break}return e.next=16,this.parseContext(f,s,!0);case 16:h=e.sent.getContextRaw(),d=!(l in h)||h[l]["@context"]["@propagate"],!1===d&&c!==r.length-1-n||(s=h,delete s["@propagate"],s[l]=Object.assign({},s[l]),"@id"in f&&(s[l]["@id"]=f["@id"]),delete s[l]["@context"],!1!==d&&this.contextTree.setContext(r.slice(0,c+n),Promise.resolve(new u.JsonLdContextNormalized(s))));case 19:c++,e.next=10;break;case 22:return e.abrupt("return",new u.JsonLdContextNormalized(s));case 23:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getContextPropagationAware",value:function(){var e=o(regeneratorRuntime.mark((function e(t){var n,r,o,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.length,r=null;case 2:if(o=!1,!r||!("@__propagateFallback"in r.context.getContextRaw())){e.next=7;break}r.context=new u.JsonLdContextNormalized(r.context.getContextRaw()["@__propagateFallback"]),e.next=17;break;case 7:return r&&(t=t.slice(0,r.depth-1)),e.next=10,this.contextTree.getContext(t);case 10:if(e.t0=e.sent,e.t0){e.next=16;break}return e.next=14,this.rootContext;case 14:e.t1=e.sent,e.t0={context:e.t1,depth:0};case 16:r=e.t0;case 17:a=t[t.length-1],a in r.context.getContextRaw()&&(s=r.context.getContextRaw()[a],s&&"object"===i(s)&&"@context"in s&&(o=!0));case 19:if(r.depth>0&&!1===r.context.getContextRaw()["@propagate"]&&r.depth!==n&&!o){e.next=2;break}case 20:return 0===r.depth&&!1===r.context.getContextRaw()["@propagate"]&&r.depth!==n&&(r.context=new u.JsonLdContextNormalized({})),e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"newOnValueJob",value:function(){var e=o(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.parser.newOnValueJob(t,n,r,i);case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"handlePendingContainerFlushBuffers",value:function(){var e=o(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.pendingContainerFlushBuffers.length>0)){e.next=23;break}t=r(this.pendingContainerFlushBuffers),e.prev=2,t.s();case 4:if((n=t.n()).done){e.next=11;break}return i=n.value,e.next=8,this.parser.flushBuffer(i.depth,i.keys);case 8:this.parser.flushStacks(i.depth);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](2),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),e.abrupt("return",!0);case 23:return e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"emitQuad",value:function(e,t){1===e&&(this.topLevelProperties=!0),this.parser.push(t)}},{key:"emitError",value:function(e){this.parser.emit("error",e)}},{key:"emitContext",value:function(e){this.parser.emit("context",e)}},{key:"getUnidentifiedValueBufferSafe",value:function(e){var t=this.unidentifiedValuesBuffer[e];return t||(t=[],this.unidentifiedValuesBuffer[e]=t),t}},{key:"getUnidentifiedGraphBufferSafe",value:function(e){var t=this.unidentifiedGraphsBuffer[e];return t||(t=[],this.unidentifiedGraphsBuffer[e]=t),t}},{key:"getExpandOptions",value:function(){return e.EXPAND_OPTIONS[this.activeProcessingMode]}},{key:"shiftStack",value:function(e,t){var n=this.idStack[e+t];if(n&&(this.idStack[e]=n,this.emittedStack[e]=!0,delete this.idStack[e+t]),this.pendingContainerFlushBuffers.length){var i,o=r(this.pendingContainerFlushBuffers);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.depth>=e+t&&(a.depth-=t,a.keys.splice(e,t))}}catch(s){o.e(s)}finally{o.f()}}this.unidentifiedValuesBuffer[e+t]&&(this.unidentifiedValuesBuffer[e]=this.unidentifiedValuesBuffer[e+t],delete this.unidentifiedValuesBuffer[e+t])}}]),e}();t.ParsingContext=h,h.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}},51106:function(e,t,n){"use strict";var r=n(17964)["default"],i=n(5276)["default"],o=n(13861)["default"],a=n(20172)["default"],s=n(20378)["default"];n(92222),n(38862),n(21703),n(47941),n(47042),n(26833),n(41539),n(39714),n(33948),n(23157),n(35192),n(9653),n(74916),n(15306),n(31354),n(33161),n(78975),Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;var u=n(20157),c=n(85561),l=n(75288),f=n(74384),h=function(){function e(t){a(this,e),this.parsingContext=t.parsingContext,this.dataFactory=t.dataFactory||new c.DataFactory,this.rdfFirst=this.dataFactory.namedNode(e.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(e.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(e.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(e.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(e.RDF+"JSON")}return s(e,[{key:"validateValueIndexes",value:function(){var e=o(regeneratorRuntime.mark((function e(t){var n,o,a,s,c,l,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.parsingContext.validateValueIndexes){e.next=25;break}n={},o=i(t),e.prev=3,o.s();case 5:if((a=o.n()).done){e.next=17;break}if(s=a.value,!s||"object"!==r(s)){e.next=15;break}if(c=s["@id"],l=s["@index"],!c||!l){e.next=15;break}if(f=n[c],!f||f===l){e.next=14;break}throw new u.ErrorCoded("Conflicting @index value for ".concat(c),u.ERROR_CODES.CONFLICTING_INDEXES);case 14:n[c]=l;case 15:e.next=5;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](3),o.e(e.t0);case 22:return e.prev=22,o.f(),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[3,19,22,25]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"valueToTerm",value:function(){var t=o(regeneratorRuntime.mark((function t(n,i,o,a,s){var c,l,f,h,d,p,y,v,b,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("@json"!==e.getContextValueType(n,i)){t.next=2;break}return t.abrupt("return",[this.dataFactory.literal(this.valueToJsonString(o),this.rdfJson)]);case 2:c=r(o),t.t0=c,t.next="object"===t.t0?6:"string"===t.t0?175:"boolean"===t.t0?185:"number"===t.t0?196:207;break;case 6:if(null!==o&&void 0!==o){t.next=8;break}return t.abrupt("return",[]);case 8:if(!Array.isArray(o)){t.next=18;break}if(!("@list"in e.getContextValueContainer(n,i))){t.next=15;break}if(0!==o.length){t.next=14;break}return t.abrupt("return",[this.rdfNil]);case 14:return t.abrupt("return",this.parsingContext.idStack[a+1]||[]);case 15:return t.next=17,this.validateValueIndexes(o);case 17:return t.abrupt("return",[]);case 18:return t.next=20,this.getContextSelfOrPropertyScoped(n,i);case 20:if(n=t.sent,!("@context"in o)){t.next=30;break}return t.t1=this.parsingContext,t.t2=o["@context"],t.next=26,this.parsingContext.getContext(s,0);case 26:return t.t3=t.sent.getContextRaw(),t.next=29,t.t1.parseContext.call(t.t1,t.t2,t.t3);case 29:n=t.sent;case 30:return t.next=32,this.unaliasKeywords(o,s,a,n);case 32:if(o=t.sent,!("@value"in o)){t.next=108;break}t.t4=regeneratorRuntime.keys(o);case 35:if((t.t5=t.t4()).done){t.next=54;break}i=t.t5.value,y=o[i],t.t6=i,t.next="@value"===t.t6?41:"@language"===t.t6?43:"@direction"===t.t6?45:"@type"===t.t6?47:"@index"===t.t6?49:51;break;case 41:return l=y,t.abrupt("break",52);case 43:return f=y,t.abrupt("break",52);case 45:return h=y,t.abrupt("break",52);case 47:return d=y,t.abrupt("break",52);case 49:return p=y,t.abrupt("break",52);case 51:throw new u.ErrorCoded("Unknown value entry '".concat(i,"' in @value: ").concat(JSON.stringify(o)),u.ERROR_CODES.INVALID_VALUE_OBJECT);case 52:t.next=35;break;case 54:return t.next=56,this.unaliasKeyword(d,s,a,!0,n);case 56:if(t.t7=t.sent,"@json"!==t.t7){t.next=59;break}return t.abrupt("return",[this.dataFactory.literal(this.valueToJsonString(l),this.rdfJson)]);case 59:if(null!==l){t.next=61;break}return t.abrupt("return",[]);case 61:if("object"!==r(l)){t.next=63;break}throw new u.ErrorCoded("The value of an '@value' can not be an object, got '".concat(JSON.stringify(l),"'"),u.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);case 63:if(!this.parsingContext.validateValueIndexes||!p||"string"===typeof p){t.next=65;break}throw new u.ErrorCoded("The value of an '@index' must be a string, got '".concat(JSON.stringify(p),"'"),u.ERROR_CODES.INVALID_INDEX_VALUE);case 65:if(!f){t.next=71;break}if("string"===typeof l){t.next=68;break}throw new u.ErrorCoded("When an '@language' is set, the value of '@value' must be a string, got '".concat(JSON.stringify(l),"'"),u.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);case 68:if(u.ContextParser.validateLanguage(f,this.parsingContext.strictValues,u.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING)){t.next=70;break}return t.abrupt("return",[]);case 70:(this.parsingContext.normalizeLanguageTags||1===this.parsingContext.activeProcessingMode)&&(f=f.toLowerCase());case 71:if(!h){t.next=76;break}if("string"===typeof l){t.next=74;break}throw new Error("When an '@direction' is set, the value of '@value' must be a string, got '".concat(JSON.stringify(l),"'"));case 74:if(u.ContextParser.validateDirection(h,this.parsingContext.strictValues)){t.next=76;break}return t.abrupt("return",[]);case 76:if(!(f&&h&&this.parsingContext.rdfDirection)){t.next=82;break}if(!d){t.next=79;break}throw new u.ErrorCoded("Can not have '@language', '@direction' and '@type' in a value: '".concat(JSON.stringify(o),"'"),u.ERROR_CODES.INVALID_VALUE_OBJECT);case 79:return t.abrupt("return",this.nullableTermToArray(this.createLanguageDirectionLiteral(a,l,f,h)));case 82:if(!f){t.next=88;break}if(!d){t.next=85;break}throw new u.ErrorCoded("Can not have both '@language' and '@type' in a value: '".concat(JSON.stringify(o),"'"),u.ERROR_CODES.INVALID_VALUE_OBJECT);case 85:return t.abrupt("return",[this.dataFactory.literal(l,f)]);case 88:if(!h||!this.parsingContext.rdfDirection){t.next=94;break}if(!d){t.next=91;break}throw new u.ErrorCoded("Can not have both '@direction' and '@type' in a value: '".concat(JSON.stringify(o),"'"),u.ERROR_CODES.INVALID_VALUE_OBJECT);case 91:return t.abrupt("return",this.nullableTermToArray(this.createLanguageDirectionLiteral(a,l,f,h)));case 94:if(!d){t.next=103;break}if("string"===typeof d){t.next=97;break}throw new u.ErrorCoded("The value of an '@type' must be a string, got '".concat(JSON.stringify(d),"'"),u.ERROR_CODES.INVALID_TYPED_VALUE);case 97:if(v=this.createVocabOrBaseTerm(n,d),v){t.next=100;break}throw new u.ErrorCoded("Invalid '@type' value, got '".concat(JSON.stringify(d),"'"),u.ERROR_CODES.INVALID_TYPED_VALUE);case 100:if("NamedNode"===v.termType){t.next=102;break}throw new u.ErrorCoded("Illegal value type (".concat(v.termType,"): ").concat(d),u.ERROR_CODES.INVALID_TYPED_VALUE);case 102:return t.abrupt("return",[this.dataFactory.literal(l,v)]);case 103:return t.next=105,this.valueToTerm(new u.JsonLdContextNormalized({}),i,l,a,s);case 105:return t.abrupt("return",t.sent);case 108:if(!("@set"in o)){t.next=114;break}if(!(Object.keys(o).length>1)){t.next=111;break}throw new u.ErrorCoded("Found illegal neighbouring entries next to @set for key: '".concat(i,"'"),u.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);case 111:return t.abrupt("return",[]);case 114:if(!("@list"in o)){t.next=139;break}if(!(Object.keys(o).length>1)){t.next=117;break}throw new u.ErrorCoded("Found illegal neighbouring entries next to @list for key: '".concat(i,"'"),u.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);case 117:if(b=o["@list"],!Array.isArray(b)){t.next=126;break}if(0!==b.length){t.next=123;break}return t.abrupt("return",[this.rdfNil]);case 123:return t.abrupt("return",this.parsingContext.idStack[a+1]||[]);case 124:t.next=137;break;case 126:return t.t8=this,t.next=129,this.parsingContext.getContext(s);case 129:return t.t9=t.sent,t.t10=i,t.t11=b,t.t12=a-1,t.t13=s.slice(0,-1),t.next=136,t.t8.valueToTerm.call(t.t8,t.t9,t.t10,t.t11,t.t12,t.t13);case 136:return t.abrupt("return",t.sent);case 137:t.next=175;break;case 139:if(!("@reverse"in o)||"boolean"!==typeof o["@reverse"]){t.next=143;break}return t.abrupt("return",[]);case 143:return t.t14=e,t.next=146,this.parsingContext.getContext(s);case 146:if(t.t15=t.sent,t.t16=i,t.t17=t.t14.getContextValueContainer.call(t.t14,t.t15,t.t16),!("@graph"in t.t17)){t.next=154;break}return g=this.parsingContext.graphContainerTermStack[a+1],t.abrupt("return",g?Object.values(g):[this.dataFactory.blankNode()]);case 154:if(!("@id"in o)){t.next=170;break}if(!(Object.keys(o).length>1)){t.next=159;break}return t.next=158,this.parsingContext.getContext(s,0);case 158:n=t.sent;case 159:if(!("@context"in o)){t.next=163;break}return t.next=162,this.parsingContext.parseContext(o["@context"],n.getContextRaw());case 162:n=t.sent;case 163:if("@vocab"!==o["@type"]){t.next=167;break}return t.abrupt("return",this.nullableTermToArray(this.createVocabOrBaseTerm(n,o["@id"])));case 167:return t.abrupt("return",this.nullableTermToArray(this.resourceToTerm(n,o["@id"])));case 168:t.next=175;break;case 170:if(!(this.parsingContext.emittedStack[a+1]||o&&"object"===r(o)&&0===Object.keys(o).length)){t.next=174;break}return t.abrupt("return",this.parsingContext.idStack[a+1]||(this.parsingContext.idStack[a+1]=[this.dataFactory.blankNode()]));case 174:return t.abrupt("return",[]);case 175:return t.t18=this,t.t19=this,t.t20=a,t.next=180,this.getContextSelfOrPropertyScoped(n,i);case 180:return t.t21=t.sent,t.t22=i,t.t23=o,t.t24=t.t19.stringValueToTerm.call(t.t19,t.t20,t.t21,t.t22,t.t23,null),t.abrupt("return",t.t18.nullableTermToArray.call(t.t18,t.t24));case 185:return t.t25=this,t.t26=this,t.t27=a,t.next=190,this.getContextSelfOrPropertyScoped(n,i);case 190:return t.t28=t.sent,t.t29=i,t.t30=Boolean(o).toString(),t.t31=this.dataFactory.namedNode(e.XSD_BOOLEAN),t.t32=t.t26.stringValueToTerm.call(t.t26,t.t27,t.t28,t.t29,t.t30,t.t31),t.abrupt("return",t.t25.nullableTermToArray.call(t.t25,t.t32));case 196:return t.t33=this,t.t34=this,t.t35=a,t.next=201,this.getContextSelfOrPropertyScoped(n,i);case 201:return t.t36=t.sent,t.t37=i,t.t38=o,t.t39=this.dataFactory.namedNode(o%1===0&&o<1e21?e.XSD_INTEGER:e.XSD_DOUBLE),t.t40=t.t34.stringValueToTerm.call(t.t34,t.t35,t.t36,t.t37,t.t38,t.t39),t.abrupt("return",t.t33.nullableTermToArray.call(t.t33,t.t40));case 207:return this.parsingContext.emitError(new Error("Could not determine the RDF type of a ".concat(c))),t.abrupt("return",[]);case 209:case"end":return t.stop()}}),t,this)})));function n(e,n,r,i,o){return t.apply(this,arguments)}return n}()},{key:"getContextSelfOrPropertyScoped",value:function(){var e=o(regeneratorRuntime.mark((function e(t,n){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.getContextRaw()[n],!i||"object"!==r(i)||!("@context"in i)){e.next=5;break}return e.next=4,this.parsingContext.parseContext(i,t.getContextRaw(),!0);case 4:t=e.sent;case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"nullableTermToArray",value:function(e){return e?[e]:[]}},{key:"predicateToTerm",value:function(t,n){var r=t.expandTerm(n,!0,this.parsingContext.getExpandOptions());return r?"_"===r[0]&&":"===r[1]?this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(r.substr(2)):null:e.isValidIri(r)?this.dataFactory.namedNode(r):r&&this.parsingContext.strictValues?(this.parsingContext.emitError(new u.ErrorCoded("Invalid predicate IRI: ".concat(r),u.ERROR_CODES.INVALID_IRI_MAPPING)),null):null:null}},{key:"resourceToTerm",value:function(t,n){if(n.startsWith("_:"))return this.dataFactory.blankNode(n.substr(2));var r=t.expandTerm(n,!1,this.parsingContext.getExpandOptions());if(!e.isValidIri(r)){if(!r||!this.parsingContext.strictValues)return null;this.parsingContext.emitError(new Error("Invalid resource IRI: ".concat(r)))}return this.dataFactory.namedNode(r)}},{key:"createVocabOrBaseTerm",value:function(t,n){if(n.startsWith("_:"))return this.dataFactory.blankNode(n.substr(2));var r=this.parsingContext.getExpandOptions(),i=t.expandTerm(n,!0,r);if(i===n&&(i=t.expandTerm(n,!1,r)),!e.isValidIri(i)){if(!i||!this.parsingContext.strictValues||i.startsWith("@"))return null;this.parsingContext.emitError(new Error("Invalid term IRI: ".concat(i)))}return this.dataFactory.namedNode(i)}},{key:"intToString",value:function(t,n){if("number"===typeof t){if(Number.isFinite(t)){var r=t%1===0;return!r||n&&n.value===e.XSD_DOUBLE?t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):Number(t).toString()}return t>0?"INF":"-INF"}return t}},{key:"stringValueToTerm",value:function(t,n,r,i,o){var a=e.getContextValueType(n,r);if(a)if("@id"===a){if(!o)return this.resourceToTerm(n,this.intToString(i,o))}else if("@vocab"===a){if(!o)return this.createVocabOrBaseTerm(n,this.intToString(i,o))}else o=this.dataFactory.namedNode(a);if(!o){var s=e.getContextValueLanguage(n,r),u=e.getContextValueDirection(n,r);return u&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(t,this.intToString(i,o),s,u):this.dataFactory.literal(this.intToString(i,o),s)}return this.dataFactory.literal(this.intToString(i,o),o)}},{key:"createLanguageDirectionLiteral",value:function(t,n,r,i){if("i18n-datatype"===this.parsingContext.rdfDirection)return r||(r=""),this.dataFactory.literal(n,this.dataFactory.namedNode("https://www.w3.org/ns/i18n#".concat(r,"_").concat(i)));var o=this.dataFactory.blankNode(),a=this.getDefaultGraph();return this.parsingContext.emitQuad(t,this.dataFactory.quad(o,this.dataFactory.namedNode(e.RDF+"value"),this.dataFactory.literal(n),a)),r&&this.parsingContext.emitQuad(t,this.dataFactory.quad(o,this.dataFactory.namedNode(e.RDF+"language"),this.dataFactory.literal(r),a)),this.parsingContext.emitQuad(t,this.dataFactory.quad(o,this.dataFactory.namedNode(e.RDF+"direction"),this.dataFactory.literal(i),a)),o}},{key:"valueToJsonString",value:function(e){return f(e)}},{key:"unaliasKeyword",value:function(){var e=o(regeneratorRuntime.mark((function e(t,n,i,o,a){var s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Number.isInteger(t)){e.next=2;break}return e.abrupt("return",t);case 2:if(o){e.next=6;break}if(s=this.parsingContext.unaliasedKeywordCacheStack[i],!s){e.next=6;break}return e.abrupt("return",s);case 6:if(u.Util.isPotentialKeyword(t)){e.next=16;break}if(e.t0=a,e.t0){e.next=12;break}return e.next=11,this.parsingContext.getContext(n);case 11:e.t0=e.sent;case 12:a=e.t0,c=a.getContextRaw()[t],c&&"object"===r(c)&&(c=c["@id"]),u.Util.isValidKeyword(c)&&(t=c);case 16:return e.abrupt("return",o?t:this.parsingContext.unaliasedKeywordCacheStack[i]=t);case 17:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"unaliasKeywordParent",value:function(){var e=o(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.unaliasKeyword(n>0&&t[n-1],t,n-1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"unaliasKeywords",value:function(){var e=o(regeneratorRuntime.mark((function e(t,n,r,i){var o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o={},e.t0=regeneratorRuntime.keys(t);case 2:if((e.t1=e.t0()).done){e.next=10;break}return a=e.t1.value,e.next=6,this.unaliasKeyword(a,n,r+1,!0,i);case 6:e.t2=e.sent,o[e.t2]=t[a],e.next=2;break;case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i){return e.apply(this,arguments)}return t}()},{key:"isLiteral",value:function(e){for(var t=e;t>=0;t--)if(this.parsingContext.literalStack[t]||this.parsingContext.jsonLiteralStack[t])return!0;return!1}},{key:"getDepthOffsetGraph",value:function(){var e=o(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t-1;case 1:if(!(r>0)){e.next=15;break}return e.next=4,this.unaliasKeyword(n[r],n,r);case 4:if(e.t0=e.sent,"@graph"!==e.t0){e.next=12;break}return e.next=8,l.EntryHandlerContainer.getContainerHandler(this.parsingContext,n,r);case 8:if(i=e.sent.containers,!l.EntryHandlerContainer.isComplexGraphContainer(i)){e.next=11;break}return e.abrupt("return",-1);case 11:return e.abrupt("return",t-r-1);case 12:r--,e.next=1;break;case 15:return e.abrupt("return",-1);case 16:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"validateReverseSubject",value:function(e){if("Literal"===e.termType)throw new u.ErrorCoded("Found illegal literal in subject position: ".concat(e.value),u.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}},{key:"getDefaultGraph",value:function(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}},{key:"getGraphContainerValue",value:function(){var e=o(regeneratorRuntime.mark((function e(t,n){var r,i,o,a,s,u,c,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.getDefaultGraph(),e.next=3,l.EntryHandlerContainer.getContainerHandler(this.parsingContext,t,n);case 3:if(i=e.sent,o=i.containers,a=i.depth,!("@graph"in o)){e.next=28;break}if(s=l.EntryHandlerContainer.getContainerGraphIndex(o,a,t),u=this.parsingContext.graphContainerTermStack[a],r=u?u[s]:null,r){e.next=28;break}if(c=null,!("@id"in o)){e.next=25;break}return e.next=15,this.getContainerKey(t[a],t,a);case 15:if(f=e.sent,null===f){e.next=25;break}return e.t0=this,e.next=20,this.parsingContext.getContext(t);case 20:return e.t1=e.sent,e.t2=f,e.next=24,e.t0.resourceToTerm.call(e.t0,e.t1,e.t2);case 24:c=e.sent;case 25:c||(c=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[a]||(this.parsingContext.graphContainerTermStack[a]={}),r=this.parsingContext.graphContainerTermStack[a][s]=c;case 28:return e.abrupt("return",r);case 29:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getPropertiesDepth",value:function(){var e=o(regeneratorRuntime.mark((function e(t,n){var r,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=n,i=n-1;case 2:if(!(i>0)){e.next=19;break}if("number"===typeof t[i]){e.next=16;break}return e.next=6,this.unaliasKeyword(t[i],t,i);case 6:if(o=e.sent,"@reverse"!==o){e.next=11;break}return e.abrupt("return",i);case 11:if("@nest"!==o){e.next=15;break}r=i,e.next=16;break;case 15:return e.abrupt("return",r);case 16:i--,e.next=2;break;case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getContainerKey",value:function(){var e=o(regeneratorRuntime.mark((function e(t,n,r){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.unaliasKeyword(t,n,r);case 2:return i=e.sent,e.abrupt("return","@none"===i?null:i);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()}],[{key:"getContextValue",value:function(e,t,n,r){var i=e.getContextRaw()[n];if(!i)return r;var o=i[t];return void 0===o?r:o}},{key:"getContextValueContainer",value:function(t,n){return e.getContextValue(t,"@container",n,{"@set":!0})}},{key:"getContextValueType",value:function(t,n){var r=e.getContextValue(t,"@type",n,null);return"@none"===r?null:r}},{key:"getContextValueLanguage",value:function(t,n){return e.getContextValue(t,"@language",n,t.getContextRaw()["@language"]||null)}},{key:"getContextValueDirection",value:function(t,n){return e.getContextValue(t,"@direction",n,t.getContextRaw()["@direction"]||null)}},{key:"isContextValueReverse",value:function(t,n){return!!e.getContextValue(t,"@reverse",n,null)}},{key:"getContextValueIndex",value:function(t,n){return e.getContextValue(t,"@index",n,t.getContextRaw()["@index"]||null)}},{key:"isPropertyReverse",value:function(t,n,r){return"@reverse"===r!==e.isContextValueReverse(t,n)}},{key:"isValidIri",value:function(e){return null!==e&&u.Util.isValidIri(e)}},{key:"isPrefixArray",value:function(e,t){if(e.length>t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}}]),e}();t.Util=h,h.XSD="http://www.w3.org/2001/XMLSchema#",h.XSD_BOOLEAN=h.XSD+"boolean",h.XSD_INTEGER=h.XSD+"integer",h.XSD_DOUBLE=h.XSD+"double",h.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#"},57277:function(e,t,n){"use strict";var r=n(13861)["default"],i=n(20172)["default"],o=n(20378)["default"];n(78975),n(41539),Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerHandlerIdentifier=void 0;var a=function(){function e(){i(this,e)}return o(e,[{key:"canCombineWithGraph",value:function(){return!0}},{key:"handle",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r,i,o,a){var s,u,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.emittedStack[a+1]||!n.idStack[a+1]){e.next=4;break}s=n.idStack[a+1][0],e.next=25;break;case 4:return e.next=6,r.getContainerKey(i[a],i,a);case 6:if(u=e.sent,null===u){e.next=18;break}return e.t1=r,e.next=11,n.getContext(i);case 11:return e.t2=e.sent,e.t3=i[a],e.next=15,e.t1.resourceToTerm.call(e.t1,e.t2,e.t3);case 15:e.t0=e.sent,e.next=19;break;case 18:e.t0=r.dataFactory.blankNode();case 19:if(c=e.t0,c){e.next=23;break}return n.emittedStack[a]=!1,e.abrupt("return");case 23:s=c,n.idStack[a+1]=[s];case 25:return l=n.idStack[a],l||(l=n.idStack[a]=[]),l.some((function(e){return e.equals(s)}))||l.push(s),e.next=30,n.handlePendingContainerFlushBuffers();case 30:if(e.sent){e.next=32;break}n.emittedStack[a]=!1;case 32:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()}]),e}();t.ContainerHandlerIdentifier=a},64405:function(e,t,n){"use strict";var r=n(5276)["default"],i=n(17964)["default"],o=n(13861)["default"],a=n(20172)["default"],s=n(20378)["default"];n(78975),n(47042),Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerHandlerIndex=void 0;var u=n(20157),c=n(26016),l=n(51106),f=function(){function e(){a(this,e)}return s(e,[{key:"canCombineWithGraph",value:function(){return!0}},{key:"handle",value:function(){var e=o(regeneratorRuntime.mark((function e(t,n,o,a,s,f){var h,d,p,y,v,b,g,m,w,x,_,E,k,S,R;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Array.isArray(s)){e.next=60;break}return h="@graph"in t,e.next=4,n.getContext(a);case 4:if(d=e.sent,p=a[f-1],y=l.Util.getContextValueIndex(d,p),!y){e.next=55;break}if(!u.Util.isPotentialKeyword(y)){e.next=10;break}throw new u.ErrorCoded("Keywords can not be used as @index value, got: ".concat(y),u.ERROR_CODES.INVALID_TERM_DEFINITION);case 10:if("string"===typeof y){e.next=12;break}throw new u.ErrorCoded("@index values must be strings, got: ".concat(y),u.ERROR_CODES.INVALID_TERM_DEFINITION);case 12:if("object"===i(s)){e.next=17;break}if("@id"===l.Util.getContextValueType(d,p)){e.next=15;break}throw new u.ErrorCoded("Property-based index containers require nodes as values or strings with @type: @id, but got: ".concat(s),u.ERROR_CODES.INVALID_VALUE_OBJECT);case 15:v=o.resourceToTerm(d,s),v&&(n.idStack[f+1]=[v]);case 17:if(b=o.createVocabOrBaseTerm(d,y),!b){e.next=55;break}return e.t0=o,e.t1=d,e.t2=y,e.next=24,o.getContainerKey(a[f],a,f);case 24:return e.t3=e.sent,e.t4=f,e.t5=a,e.next=29,e.t0.valueToTerm.call(e.t0,e.t1,e.t2,e.t3,e.t4,e.t5);case 29:if(g=e.sent,!h){e.next=38;break}return e.next=33,o.getGraphContainerValue(a,f+1);case 33:m=e.sent,w=r(g);try{for(w.s();!(x=w.n()).done;)_=x.value,n.emitQuad(f,o.dataFactory.quad(m,b,_,o.getDefaultGraph()))}catch(O){w.e(O)}finally{w.f()}e.next=55;break;case 38:E=r(g),e.prev=39,E.s();case 41:if((k=E.n()).done){e.next=47;break}return S=k.value,e.next=45,c.EntryHandlerPredicate.handlePredicateObject(n,o,a,f+1,b,S,!1);case 45:e.next=41;break;case 47:e.next=52;break;case 49:e.prev=49,e.t6=e["catch"](39),E.e(e.t6);case 52:return e.prev=52,E.f(),e.finish(52);case 55:return R=h?2:1,e.next=58,n.newOnValueJob(a.slice(0,a.length-R),s,f-R,!0);case 58:return e.next=60,n.handlePendingContainerFlushBuffers();case 60:n.emittedStack[f]=!1;case 61:case"end":return e.stop()}}),e,null,[[39,49,52,55]])})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()}]),e}();t.ContainerHandlerIndex=f},40190:function(e,t,n){"use strict";var r=n(13861)["default"],i=n(20172)["default"],o=n(20378)["default"];n(78975),n(21249),n(38862),n(47042),Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerHandlerLanguage=void 0;var a=n(20157),s=function(){function e(){i(this,e)}return o(e,[{key:"canCombineWithGraph",value:function(){return!1}},{key:"handle",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r,i,o,s){var u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.getContainerKey(i[s],i,s);case 2:if(u=e.sent,!Array.isArray(o)){e.next=7;break}o=o.map((function(e){return{"@value":e,"@language":u}})),e.next=10;break;case 7:if("string"===typeof o){e.next=9;break}throw new a.ErrorCoded("Got invalid language map value, got '".concat(JSON.stringify(o),"', but expected string"),a.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);case 9:o={"@value":o,"@language":u};case 10:return e.next=12,n.newOnValueJob(i.slice(0,i.length-1),o,s-1,!0);case 12:n.emittedStack[s]=!1;case 13:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()}]),e}();t.ContainerHandlerLanguage=s},78864:function(e,t,n){"use strict";var r=n(13861)["default"],i=n(20172)["default"],o=n(20378)["default"];n(78975),n(47042),Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerHandlerType=void 0;var a=n(26016),s=n(51106),u=function(){function e(){i(this,e)}return o(e,[{key:"canCombineWithGraph",value:function(){return!1}},{key:"handle",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r,i,o,u){var c,l,f,h,d,p,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Array.isArray(o)){e.next=47;break}if("string"!==typeof o){e.next=23;break}return e.next=4,n.getContext(i);case 4:if(c=e.sent,l=s.Util.getContextValueType(c,i[u-1]),"@vocab"!==l){e.next=12;break}return e.next=9,r.createVocabOrBaseTerm(c,o);case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,r.resourceToTerm(c,o);case 14:e.t0=e.sent;case 15:if(f=e.t0,!f){e.next=21;break}return h={"@id":"NamedNode"===f.termType?f.value:o},e.next=20,n.newOnValueJob(i.slice(0,i.length-1),h,u-1,!0);case 20:n.idStack[u+1]=[f];case 21:e.next=28;break;case 23:return d=!!n.idStack[u+1],d||delete n.idStack[u],e.next=27,n.newOnValueJob(i.slice(0,i.length-1),o,u-1,!0);case 27:d||(n.idStack[u+1]=n.idStack[u]);case 28:return e.next=30,r.getContainerKey(i[u],i,u);case 30:if(p=e.sent,null===p){e.next=40;break}return e.t2=r,e.next=35,n.getContext(i);case 35:e.t3=e.sent,e.t4=p,e.t1=e.t2.createVocabOrBaseTerm.call(e.t2,e.t3,e.t4),e.next=41;break;case 40:e.t1=null;case 41:if(y=e.t1,!y){e.next=45;break}return e.next=45,a.EntryHandlerPredicate.handlePredicateObject(n,r,i,u+1,r.rdfType,y,!1);case 45:return e.next=47,n.handlePendingContainerFlushBuffers();case 47:n.emittedStack[u]=!1;case 48:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()}]),e}();t.ContainerHandlerType=u},54917:function(e,t,n){"use strict";var r=n(5276)["default"],i=n(13861)["default"],o=n(20172)["default"],a=n(20378)["default"];n(78975),n(74916),n(77601),n(47042),Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerArrayValue=void 0;var s=n(51106),u=function(){function e(){o(this,e)}return a(e,[{key:"isPropertyHandler",value:function(){return!1}},{key:"isStackProcessor",value:function(){return!0}},{key:"validate",value:function(){var e=i(regeneratorRuntime.mark((function e(t,n,r,i,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.test(t,n,null,r,i));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"test",value:function(){var e=i(regeneratorRuntime.mark((function e(t,n,r,i,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return","number"===typeof i[o]);case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"handle",value:function(){var e=i(regeneratorRuntime.mark((function e(t,n,i,o,a,u){var c,l,f,h,d,p,y,v,b,g,m,w,x,_,E;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.unaliasKeywordParent(o,u);case 2:if(c=e.sent,"@list"!==c){e.next=50;break}l=null,f=0,h=u-2;case 7:if(!(h>0)){e.next=16;break}if(d=o[h],"string"!==typeof d&&"number"!==typeof d){e.next=13;break}return f=h,l=d,e.abrupt("break",16);case 13:h--,e.next=7;break;case 16:if(null===l){e.next=48;break}return e.t0=n,e.next=20,t.getContext(o);case 20:return e.t1=e.sent,e.t2=l,e.t3=a,e.t4=u,e.t5=o,e.next=27,e.t0.valueToTerm.call(e.t0,e.t1,e.t2,e.t3,e.t4,e.t5);case 27:p=e.sent,y=r(p),e.prev=29,y.s();case 31:if((v=y.n()).done){e.next=37;break}return b=v.value,e.next=35,this.handleListElement(t,n,b,a,u,o.slice(0,f),f);case 35:e.next=31;break;case 37:e.next=42;break;case 39:e.prev=39,e.t6=e["catch"](29),y.e(e.t6);case 42:return e.prev=42,y.f(),e.finish(42);case 45:if(0!==p.length){e.next=48;break}return e.next=48,this.handleListElement(t,n,null,a,u,o.slice(0,f),f);case 48:e.next=108;break;case 50:if("@set"!==c){e.next=55;break}return e.next=53,t.newOnValueJob(o.slice(0,-2),a,u-2,!1);case 53:e.next=108;break;case 55:if(void 0===c||"@type"===c){e.next=108;break}g=u-1;case 57:if(!(g>0)){e.next=66;break}if("number"===typeof o[g]){e.next=63;break}return e.next=61,n.unaliasKeyword(o[g],o,g);case 61:return c=e.sent,e.abrupt("break",66);case 63:g--,e.next=57;break;case 66:return e.next=68,t.getContext(o.slice(0,-1));case 68:if(m=e.sent,!("@list"in s.Util.getContextValueContainer(m,c))){e.next=104;break}return t.emittedStack[u+1]=!0,e.t7=n,e.next=74,t.getContext(o);case 74:return e.t8=e.sent,e.t9=c,e.t10=a,e.t11=u,e.t12=o,e.next=81,e.t7.valueToTerm.call(e.t7,e.t8,e.t9,e.t10,e.t11,e.t12);case 81:w=e.sent,x=r(w),e.prev=83,x.s();case 85:if((_=x.n()).done){e.next=91;break}return E=_.value,e.next=89,this.handleListElement(t,n,E,a,u,o.slice(0,-1),u-1);case 89:e.next=85;break;case 91:e.next=96;break;case 93:e.prev=93,e.t13=e["catch"](83),x.e(e.t13);case 96:return e.prev=96,x.f(),e.finish(96);case 99:if(0!==w.length){e.next=102;break}return e.next=102,this.handleListElement(t,n,null,a,u,o.slice(0,-1),u-1);case 102:e.next=108;break;case 104:return t.shiftStack(u,1),e.next=107,t.newOnValueJob(o.slice(0,-1),a,u-1,!1);case 107:t.contextTree.removeContext(o.slice(0,-1));case 108:case"end":return e.stop()}}),e,this,[[29,39,42,45],[83,93,96,99]])})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()},{key:"handleListElement",value:function(){var e=i(regeneratorRuntime.mark((function e(t,n,r,i,o,a,s){var u,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(u=t.listPointerStack[o],e.t0=null!==i,!e.t0){e.next=7;break}return e.next=5,n.unaliasKeywords(i,a,o);case 5:e.t1=e.sent["@value"],e.t0=null!==e.t1;case 7:if(!e.t0){e.next=12;break}u&&u.value?(l=n.dataFactory.blankNode(),t.emitQuad(o,n.dataFactory.quad(u.value,n.rdfRest,l,n.getDefaultGraph())),u.value=l):(c=n.dataFactory.blankNode(),u={value:c,listRootDepth:s,listId:c}),r&&t.emitQuad(o,n.dataFactory.quad(u.value,n.rdfFirst,r,n.getDefaultGraph())),e.next=13;break;case 12:u||(u={listRootDepth:s,listId:n.rdfNil});case 13:t.listPointerStack[o]=u;case 14:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o,a,s){return e.apply(this,arguments)}return t}()}]),e}();t.EntryHandlerArrayValue=u},75288:function(e,t,n){"use strict";var r=n(13861)["default"],i=n(20172)["default"],o=n(20378)["default"];n(78975),n(74916),n(77601),n(41539),n(33948),n(47941),Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerContainer=void 0;var a=n(57277),s=n(64405),u=n(40190),c=n(78864),l=n(51106),f=function(){function e(){i(this,e)}return o(e,[{key:"isPropertyHandler",value:function(){return!1}},{key:"isStackProcessor",value:function(){return!0}},{key:"validate",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r,i,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.test(t,n,null,r,i);case 2:return e.abrupt("return",!!e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"test",value:function(){var t=r(regeneratorRuntime.mark((function t(n,r,i,o,a){var s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=l.Util,t.next=3,n.getContext(o,2);case 3:t.t1=t.sent,t.t2=o[a-1],s=t.t0.getContextValueContainer.call(t.t0,t.t1,t.t2),t.t3=regeneratorRuntime.keys(e.CONTAINER_HANDLERS);case 7:if((t.t4=t.t3()).done){t.next=13;break}if(u=t.t4.value,!s[u]){t.next=11;break}return t.abrupt("return",{containers:s,handler:e.CONTAINER_HANDLERS[u]});case 11:t.next=7;break;case 13:return t.abrupt("return",null);case 14:case"end":return t.stop()}}),t)})));function n(e,n,r,i,o){return t.apply(this,arguments)}return n}()},{key:"handle",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r,i,o,a,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s.handler.handle(s.containers,t,n,i,o,a));case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o,a,s){return e.apply(this,arguments)}return t}()}],[{key:"isSimpleGraphContainer",value:function(e){return"@graph"in e&&("@set"in e&&2===Object.keys(e).length||1===Object.keys(e).length)}},{key:"isComplexGraphContainer",value:function(e){return"@graph"in e&&("@set"in e&&Object.keys(e).length>2||!("@set"in e)&&Object.keys(e).length>1)}},{key:"getContainerGraphIndex",value:function(t,n,r){for(var i=e.isSimpleGraphContainer(t),o="",a=n;a<r.length;a++)i&&"number"!==typeof r[a]||(o+=":"+r[a]),i||"number"===typeof r[a]||(i=!0);return o}},{key:"getContainerHandler",value:function(){var t=r(regeneratorRuntime.mark((function t(n,r,i){var o,a,s,u,c,f,h,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o={containers:{"@set":!0},depth:i,fallback:!0},a=!1,t.next=4,n.getContext(r,2);case 4:s=t.sent,u=i-1;case 6:if(!(u>=0)){t.next=42;break}if("number"===typeof r[u]){t.next=39;break}if(c=l.Util.getContextValue(s,"@container",r[u],!1),!c||!e.isSimpleGraphContainer(c)){t.next=11;break}return t.abrupt("return",{containers:c,depth:u+1,fallback:!1});case 11:if(f=l.Util.getContextValue(s,"@container",r[u-1],!1),f){t.next=18;break}if(!a){t.next=15;break}return t.abrupt("return",o);case 15:a=!0,t.next=39;break;case 18:h="@graph"in f,t.t0=regeneratorRuntime.keys(e.CONTAINER_HANDLERS);case 20:if((t.t1=t.t0()).done){t.next=38;break}if(d=t.t1.value,!f[d]){t.next=36;break}if(!h){t.next=31;break}if(!e.CONTAINER_HANDLERS[d].canCombineWithGraph()){t.next=28;break}return t.abrupt("return",{containers:f,depth:u,fallback:!1});case 28:return t.abrupt("return",o);case 29:t.next=36;break;case 31:if(!a){t.next=35;break}return t.abrupt("return",o);case 35:return t.abrupt("return",{containers:f,depth:u,fallback:!1});case 36:t.next=20;break;case 38:return t.abrupt("return",o);case 39:u--,t.next=6;break;case 42:return t.abrupt("return",o);case 43:case"end":return t.stop()}}),t)})));function n(e,n,r){return t.apply(this,arguments)}return n}()},{key:"isBufferableContainerHandler",value:function(){var t=r(regeneratorRuntime.mark((function t(n,r,i){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getContainerHandler(n,r,i);case 2:return o=t.sent,t.abrupt("return",!o.fallback&&!("@graph"in o.containers));case 4:case"end":return t.stop()}}),t)})));function n(e,n,r){return t.apply(this,arguments)}return n}()}]),e}();t.EntryHandlerContainer=f,f.CONTAINER_HANDLERS={"@id":new a.ContainerHandlerIdentifier,"@index":new s.ContainerHandlerIndex,"@language":new u.ContainerHandlerLanguage,"@type":new c.ContainerHandlerType}},59369:function(e,t,n){"use strict";var r=n(13861)["default"],i=n(20172)["default"],o=n(20378)["default"];n(78975),Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerInvalidFallback=void 0;var a=function(){function e(){i(this,e)}return o(e,[{key:"isPropertyHandler",value:function(){return!1}},{key:"isStackProcessor",value:function(){return!0}},{key:"validate",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r,i,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"test",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r,i,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"handle",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r,i,o,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.emittedStack[a]=!1;case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()}]),e}();t.EntryHandlerInvalidFallback=a},26016:function(e,t,n){"use strict";var r=n(5276)["default"],i=n(13861)["default"],o=n(20172)["default"],a=n(20378)["default"];n(78975),Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerPredicate=void 0;var s=n(20157),u=n(51106),c=function(){function e(){o(this,e)}return a(e,[{key:"isPropertyHandler",value:function(){return!0}},{key:"isStackProcessor",value:function(){return!0}},{key:"validate",value:function(){var e=i(regeneratorRuntime.mark((function e(t,n,r,i,o){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=r[i],!a){e.next=13;break}return e.next=4,t.getContext(r);case 4:if(s=e.sent,e.t0=!t.jsonLiteralStack[i],!e.t0){e.next=10;break}return e.next=9,n.predicateToTerm(s,r[i]);case 9:e.t0=e.sent;case 10:if(!e.t0){e.next=13;break}return"@json"===u.Util.getContextValueType(s,a)&&(t.jsonLiteralStack[i+1]=!0),e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"test",value:function(){var e=i(regeneratorRuntime.mark((function e(t,n,r,i,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i[o]);case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"handle",value:function(){var t=i(regeneratorRuntime.mark((function t(n,i,o,a,c,l,f){var h,d,p,y,v,b,g,m,w,x;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return h=a[l],t.next=3,n.getContext(a);case 3:return d=t.sent,t.next=6,i.predicateToTerm(d,o);case 6:if(p=t.sent,!p){t.next=42;break}return t.next=10,i.valueToTerm(d,o,c,l,a);case 10:if(y=t.sent,!y.length){t.next=42;break}v=r(y),t.prev=13,v.s();case 15:if((b=v.n()).done){t.next=34;break}return g=b.value,t.t0=u.Util,t.t1=d,t.t2=h,t.next=22,i.unaliasKeywordParent(a,l);case 22:if(t.t3=t.sent,m=t.t0.isPropertyReverse.call(t.t0,t.t1,t.t2,t.t3),!c){t.next=30;break}if(w="@list"in u.Util.getContextValueContainer(d,o),!w&&!c["@list"]){t.next=30;break}if((w&&!Array.isArray(c)&&!c["@list"]||c["@list"]&&!Array.isArray(c["@list"]))&&g!==i.rdfNil&&(x=i.dataFactory.blankNode(),n.emitQuad(l,i.dataFactory.quad(x,i.rdfRest,i.rdfNil,i.getDefaultGraph())),n.emitQuad(l,i.dataFactory.quad(x,i.rdfFirst,g,i.getDefaultGraph())),g=x),!m||n.allowSubjectList){t.next=30;break}throw new s.ErrorCoded("Found illegal list value in subject position at ".concat(o),s.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE);case 30:return t.next=32,e.handlePredicateObject(n,i,a,l,p,g,m);case 32:t.next=15;break;case 34:t.next=39;break;case 36:t.prev=36,t.t4=t["catch"](13),v.e(t.t4);case 39:return t.prev=39,v.f(),t.finish(39);case 42:case"end":return t.stop()}}),t,null,[[13,36,39,42]])})));function n(e,n,r,i,o,a,s){return t.apply(this,arguments)}return n}()}],[{key:"handlePredicateObject",value:function(){var e=i(regeneratorRuntime.mark((function e(t,n,i,o,a,s,u){var c,l,f,h,d,p,y,v,b,g,m,w,x;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.getPropertiesDepth(i,o);case 2:return c=e.sent,e.next=5,n.getDepthOffsetGraph(o,i);case 5:if(l=e.sent,f=o-l,h=t.idStack[c],!h){e.next=36;break}d=r(h),e.prev=10,d.s();case 12:if((p=d.n()).done){e.next=26;break}if(y=p.value,v=l>=0,!v){e.next=20;break}if(b=t.idStack[f-1],b){g=r(b);try{for(g.s();!(m=g.n()).done;)w=m.value,u?(n.validateReverseSubject(s),t.emitQuad(o,n.dataFactory.quad(s,a,y,w))):t.emitQuad(o,n.dataFactory.quad(y,a,s,w))}catch(_){g.e(_)}finally{g.f()}}else u?(n.validateReverseSubject(s),t.getUnidentifiedGraphBufferSafe(f-1).push({subject:s,predicate:a,object:y})):t.getUnidentifiedGraphBufferSafe(f-1).push({subject:y,predicate:a,object:s});e.next=24;break;case 20:return e.next=22,n.getGraphContainerValue(i,c);case 22:x=e.sent,u?(n.validateReverseSubject(s),t.emitQuad(o,n.dataFactory.quad(s,a,y,x))):t.emitQuad(o,n.dataFactory.quad(y,a,s,x));case 24:e.next=12;break;case 26:e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](10),d.e(e.t0);case 31:return e.prev=31,d.f(),e.finish(31);case 34:e.next=38;break;case 36:u&&n.validateReverseSubject(s),t.getUnidentifiedValueBufferSafe(c).push({predicate:a,object:s,reverse:u});case 38:case"end":return e.stop()}}),e,null,[[10,28,31,34]])})));function t(t,n,r,i,o,a,s){return e.apply(this,arguments)}return t}()}]),e}();t.EntryHandlerPredicate=c},522:function(e,t,n){"use strict";var r=n(13861)["default"],i=n(20172)["default"],o=n(20378)["default"];n(78975),Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeyword=void 0;var a=function(){function e(t){i(this,e),this.keyword=t}return o(e,[{key:"isPropertyHandler",value:function(){return!1}},{key:"isStackProcessor",value:function(){return!0}},{key:"validate",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r,i,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"test",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r,i,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r===this.keyword);case 1:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()}]),e}();t.EntryHandlerKeyword=a},94422:function(e,t,n){"use strict";var r=n(13861)["default"],i=n(20172)["default"],o=n(20378)["default"],a=n(95967)["default"],s=n(13706)["default"];n(78975),n(47042),Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordContext=void 0;var u=n(20157),c=n(522),l=function(e){a(n,e);var t=s(n);function n(){return i(this,n),t.call(this,"@context")}return o(n,[{key:"isStackProcessor",value:function(){return!1}},{key:"handle",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r,i,o,a){var s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.streamingProfile&&(t.processingStack[a]||t.processingType[a]||void 0!==t.idStack[a])&&t.emitError(new u.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",u.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),s=t.getContext(i),e.t0=t,e.t1=o,e.next=6,s;case 6:return e.t2=e.sent.getContextRaw(),c=e.t0.parseContext.call(e.t0,e.t1,e.t2),t.contextTree.setContext(i.slice(0,-1),c),t.emitContext(o),e.t3=t,e.next=13,c;case 13:return e.t4=e.sent,e.next=16,e.t3.validateContext.call(e.t3,e.t4);case 16:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()}]),n}(c.EntryHandlerKeyword);t.EntryHandlerKeywordContext=l},25323:function(e,t,n){"use strict";var r=n(13861)["default"],i=n(20172)["default"],o=n(20378)["default"],a=n(95967)["default"],s=n(13706)["default"];n(78975),Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordGraph=void 0;var u=n(522),c=function(e){a(n,e);var t=s(n);function n(){return i(this,n),t.call(this,"@graph")}return o(n,[{key:"handle",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r,i,o,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.graphStack[a+1]=!0;case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()}]),n}(u.EntryHandlerKeyword);t.EntryHandlerKeywordGraph=c},30640:function(e,t,n){"use strict";var r=n(13861)["default"],i=n(20172)["default"],o=n(20378)["default"],a=n(95967)["default"],s=n(13706)["default"];n(78975),n(92222),Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordId=void 0;var u=n(20157),c=n(522),l=function(e){a(n,e);var t=s(n);function n(){return i(this,n),t.call(this,"@id")}return o(n,[{key:"isStackProcessor",value:function(){return!1}},{key:"handle",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r,i,o,a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"string"!==typeof o&&t.emitError(new u.ErrorCoded("Found illegal @id '".concat(o,"'"),u.ERROR_CODES.INVALID_ID_VALUE)),e.next=3,n.getPropertiesDepth(i,a);case 3:return s=e.sent,void 0!==t.idStack[s]&&(t.idStack[s][0].listHead?t.emitError(new u.ErrorCoded("Found illegal neighbouring entries next to @list for key: '".concat(i[a-1],"'"),u.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):t.emitError(new u.ErrorCoded("Found duplicate @ids '".concat(t.idStack[s][0].value,"' and '").concat(o,"'"),u.ERROR_CODES.COLLIDING_KEYWORDS))),e.t0=n,e.t1=n,e.next=9,t.getContext(i);case 9:return e.t2=e.sent,e.t3=o,e.next=13,e.t1.resourceToTerm.call(e.t1,e.t2,e.t3);case 13:e.t4=e.sent,t.idStack[s]=e.t0.nullableTermToArray.call(e.t0,e.t4);case 15:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()}]),n}(c.EntryHandlerKeyword);t.EntryHandlerKeywordId=l},82822:function(e,t,n){"use strict";var r=n(17964)["default"],i=n(13861)["default"],o=n(20172)["default"],a=n(20378)["default"],s=n(95967)["default"],u=n(13706)["default"];n(78975),n(38862),Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordIncluded=void 0;var c=n(20157),l=n(522),f=function(e){s(n,e);var t=u(n);function n(){return o(this,n),t.call(this,"@included")}return a(n,[{key:"handle",value:function(){var e=i(regeneratorRuntime.mark((function e(t,n,i,o,a,s){var u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"object"!==r(a)&&t.emitError(new c.ErrorCoded("Found illegal @included '".concat(a,"'"),c.ERROR_CODES.INVALID_INCLUDED_VALUE)),e.t0=n,e.t1=a,e.t2=o,e.t3=s,e.next=7,t.getContext(o);case 7:return e.t4=e.sent,e.next=10,e.t0.unaliasKeywords.call(e.t0,e.t1,e.t2,e.t3,e.t4);case 10:u=e.sent,"@value"in u&&t.emitError(new c.ErrorCoded("Found an illegal @included @value node '".concat(JSON.stringify(a),"'"),c.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in u&&t.emitError(new c.ErrorCoded("Found an illegal @included @list node '".concat(JSON.stringify(a),"'"),c.ERROR_CODES.INVALID_INCLUDED_VALUE)),t.emittedStack[s]=!1;case 14:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()}]),n}(l.EntryHandlerKeyword);t.EntryHandlerKeywordIncluded=f},25116:function(e,t,n){"use strict";var r=n(17964)["default"],i=n(13861)["default"],o=n(20172)["default"],a=n(20378)["default"],s=n(95967)["default"],u=n(13706)["default"];n(78975),n(92222),Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordNest=void 0;var c=n(20157),l=n(522),f=function(e){s(n,e);var t=u(n);function n(){return o(this,n),t.call(this,"@nest")}return a(n,[{key:"handle",value:function(){var e=i(regeneratorRuntime.mark((function e(t,n,i,o,a,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"object"!==r(a)&&t.emitError(new c.ErrorCoded("Found invalid @nest entry for '".concat(i,"': '").concat(a,"'"),c.ERROR_CODES.INVALID_NEST_VALUE)),e.t0=n,e.t1=a,e.t2=o,e.t3=s,e.next=7,t.getContext(o);case 7:return e.t4=e.sent,e.next=10,e.t0.unaliasKeywords.call(e.t0,e.t1,e.t2,e.t3,e.t4);case 10:if(e.t5=e.sent,!("@value"in e.t5)){e.next=13;break}t.emitError(new c.ErrorCoded("Found an invalid @value node for '".concat(i,"'"),c.ERROR_CODES.INVALID_NEST_VALUE));case 13:t.emittedStack[s]=!1;case 14:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()}]),n}(l.EntryHandlerKeyword);t.EntryHandlerKeywordNest=f},71867:function(e,t,n){"use strict";var r=n(5276)["default"],i=n(13861)["default"],o=n(20172)["default"],a=n(20378)["default"],s=n(95967)["default"],u=n(13706)["default"];n(78975),n(41539),n(47042),n(2707),Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordType=void 0;var c=n(20157),l=n(51106),f=n(26016),h=n(522),d=function(e){s(n,e);var t=u(n);function n(){return o(this,n),t.call(this,"@type")}return a(n,[{key:"isStackProcessor",value:function(){return!1}},{key:"handle",value:function(){var e=i(regeneratorRuntime.mark((function e(t,n,i,o,a,s){var u,h,d,p,y,v,b,g,m,w,x,_,E,k;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u=o[s],e.next=3,t.getContext(o);case 3:return h=e.sent,d=n.rdfType,e.t0=l.Util,e.t1=h,e.t2=u,e.next=10,n.unaliasKeywordParent(o,s);case 10:e.t3=e.sent,p=e.t0.isPropertyReverse.call(e.t0,e.t1,e.t2,e.t3),y=Array.isArray(a)?a:[a],v=r(y),e.prev=14,v.s();case 16:if((b=v.n()).done){e.next=25;break}if(g=b.value,"string"!==typeof g&&t.emitError(new c.ErrorCoded("Found illegal @type '".concat(g,"'"),c.ERROR_CODES.INVALID_TYPE_VALUE)),m=n.createVocabOrBaseTerm(h,g),!m){e.next=23;break}return e.next=23,f.EntryHandlerPredicate.handlePredicateObject(t,n,o,s,d,m,p);case 23:e.next=16;break;case 25:e.next=30;break;case 27:e.prev=27,e.t4=e["catch"](14),v.e(e.t4);case 30:return e.prev=30,v.f(),e.finish(30);case 33:w=Promise.resolve(h),x=!1,_=r(y.sort());try{for(k=function(){var e=E.value,n=l.Util.getContextValue(h,"@context",e,null);n&&(x=!0,w=w.then((function(e){return t.parseContext(n,e.getContextRaw())})))},_.s();!(E=_.n()).done;)k()}catch(i){_.e(i)}finally{_.f()}!t.streamingProfile||!x&&t.streamingProfileAllowOutOfOrderPlainType||!t.processingStack[s]&&!t.idStack[s]||t.emitError(new c.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",c.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),x&&(w=w.then((function(e){return"@propagate"in e.getContextRaw()||(e.getContextRaw()["@propagate"]=!1),!1===e.getContextRaw()["@propagate"]&&(e.getContextRaw()["@__propagateFallback"]=h.getContextRaw()),e})),t.contextTree.setContext(o.slice(0,o.length-1),w)),t.processingType[s]=!0;case 40:case"end":return e.stop()}}),e,null,[[14,27,30,33]])})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()}]),n}(h.EntryHandlerKeyword);t.EntryHandlerKeywordType=d},64133:function(e,t,n){"use strict";var r=n(17964)["default"],i=n(13861)["default"],o=n(20172)["default"],a=n(20378)["default"];n(92222),n(21703),n(78975),Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordUnknownFallback=void 0;var s=n(20157),u=function(){function e(){o(this,e)}return a(e,[{key:"isPropertyHandler",value:function(){return!1}},{key:"isStackProcessor",value:function(){return!0}},{key:"validate",value:function(){var e=i(regeneratorRuntime.mark((function e(t,n,r,i,o){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.unaliasKeyword(r[i],r,i);case 2:if(a=e.sent,!s.Util.isPotentialKeyword(a)){e.next=8;break}if(o){e.next=7;break}if("@list"!==a){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"test",value:function(){var e=i(regeneratorRuntime.mark((function e(t,n,r,i,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s.Util.isPotentialKeyword(r));case 1:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"handle",value:function(){var t=i(regeneratorRuntime.mark((function t(n,i,o,a,u,c){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:l=e.VALID_KEYWORDS_TYPES[o],void 0!==l?l&&r(u)!==l.type&&n.emitError(new s.ErrorCoded("Invalid value type for '".concat(o,"' with value '").concat(u,"'"),l.errorCode)):n.strictValues&&n.emitError(new Error("Unknown keyword '".concat(o,"' with value '").concat(u,"'"))),n.emittedStack[c]=!1;case 3:case"end":return t.stop()}}),t)})));function n(e,n,r,i,o,a){return t.apply(this,arguments)}return n}()}]),e}();t.EntryHandlerKeywordUnknownFallback=u,u.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:s.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:s.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null}},26453:function(e,t,n){"use strict";var r=n(13861)["default"],i=n(20172)["default"],o=n(20378)["default"],a=n(66760)["default"],s=n(40358)["default"],u=n(95967)["default"],c=n(13706)["default"];n(78975),n(74916),n(77601),n(47042),Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordValue=void 0;var l=n(522),f=function(e){u(n,e);var t=c(n);function n(){return i(this,n),t.call(this,"@value")}return o(n,[{key:"validate",value:function(){var e=r(regeneratorRuntime.mark((function e(t,r,i,o,u){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=i[o],e.t0=c&&!t.literalStack[o],!e.t0){e.next=6;break}return e.next=5,this.test(t,r,c,i,o);case 5:e.t0=e.sent;case 6:if(!e.t0){e.next=8;break}t.literalStack[o]=!0;case 8:return e.abrupt("return",a(s(n.prototype),"validate",this).call(this,t,r,i,o,u));case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"test",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r,i,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.unaliasKeyword(i[o],i.slice(0,i.length-1),o-1,!0);case 2:return e.t0=e.sent,e.abrupt("return","@value"===e.t0);case 4:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()},{key:"handle",value:function(){var e=r(regeneratorRuntime.mark((function e(t,n,r,i,o,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.literalStack[a]=!0,delete t.unidentifiedValuesBuffer[a],delete t.unidentifiedGraphsBuffer[a],t.emittedStack[a]=!1;case 4:case"end":return e.stop()}}),e)})));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}()}]),n}(l.EntryHandlerKeyword);t.EntryHandlerKeywordValue=f},34229:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(66631),t),i(n(61721),t)},66631:function(e,t,n){"use strict";var r=n(13861)["default"],i=n(20172)["default"],o=n(20378)["default"],a=n(95967)["default"],s=n(13706)["default"];n(78975),n(41539),n(21249),n(38862),n(69600),n(74916),n(23123),n(82481),Object.defineProperty(t,"__esModule",{value:!0}),t.JsonLdSerializer=void 0;var u=n(20157),c=n(66639),l=n(82687),f=n(61721),h=function(e){a(n,e);var t=s(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,n),e=t.call(this,{objectMode:!0}),e.indentation=0,e.options=r,e.options.baseIRI&&!e.options.context&&(e.options.context={"@base":e.options.baseIRI}),e.options.context?(e.originalContext=e.options.context,e.context=(new u.ContextParser).parse(e.options.context,{baseIRI:e.options.baseIRI})):e.context=Promise.resolve(new u.JsonLdContextNormalized({})),e}return o(n,[{key:"import",value:function(e){var t=new c.PassThrough({objectMode:!0});e.on("error",(function(e){return r.emit("error",e)})),e.on("data",(function(e){return t.push(e)})),e.on("end",(function(){return t.push(null)}));var r=t.pipe(new n(this.options));return r}},{key:"_transform",value:function(e,t,n){var r=this;this.context.then((function(t){r.transformQuad(e,t),n()})).catch(n)}},{key:"list",value:function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.context;case 2:return n=e.sent,e.abrupt("return",{"@list":t.map((function(e){return f.Util.termToValue(e,n,r.options)}))});case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_flush",value:function(e){return this.opened||this.pushDocumentStart(),this.lastPredicate&&this.endPredicate(),this.lastSubject&&this.endSubject(),this.lastGraph&&"DefaultGraph"!==this.lastGraph.termType&&this.endGraph(),this.endDocument(),e(null,null)}},{key:"transformQuad",value:function(e,t){this.opened||this.pushDocumentStart();var n=this.lastGraph&&"DefaultGraph"!==this.lastGraph.termType&&this.lastGraph.equals(e.subject);if(!n&&(!this.lastGraph||!e.graph.equals(this.lastGraph))){var r="DefaultGraph"!==e.graph.termType&&this.lastSubject&&this.lastSubject.equals(e.graph);this.lastGraph&&("DefaultGraph"!==this.lastGraph.termType?(this.endPredicate(),this.endSubject(),this.endGraph(!0),r=!1):r?(this.endPredicate(!0),this.lastSubject=null):(this.endPredicate(),this.endSubject(!0))),"DefaultGraph"!==e.graph.termType&&(r||this.pushId(e.graph,t),this.pushSeparator(this.options.space?l.SeparatorType.GRAPH_FIELD_NONCOMPACT:l.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++),this.lastGraph=e.graph}this.lastSubject&&e.subject.equals(this.lastSubject)||(n?(this.endPredicate(),this.endSubject(),this.indentation--,this.pushSeparator(l.SeparatorType.ARRAY_END_COMMA),this.lastGraph=e.graph):(this.lastSubject&&(this.endPredicate(),this.endSubject(!0)),this.pushId(e.subject,t)),this.lastSubject=e.subject),this.lastPredicate&&e.predicate.equals(this.lastPredicate)||(this.lastPredicate&&this.endPredicate(!0),this.pushPredicate(e.predicate,t)),this.pushObject(e.object,t)}},{key:"pushDocumentStart",value:function(){this.opened=!0,this.originalContext&&!this.options.excludeContext?(this.pushSeparator(l.SeparatorType.OBJECT_START),this.indentation++,this.pushSeparator(l.SeparatorType.CONTEXT_FIELD),this.pushIndented(JSON.stringify(this.originalContext,null,this.options.space)+","),this.pushSeparator(this.options.space?l.SeparatorType.GRAPH_FIELD_NONCOMPACT:l.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++):(this.pushSeparator(l.SeparatorType.ARRAY_START),this.indentation++)}},{key:"pushId",value:function(e,t){var n="BlankNode"===e.termType?"_:"+e.value:t.compactIri(e.value,!1);this.pushSeparator(l.SeparatorType.OBJECT_START),this.indentation++,this.pushIndented(this.options.space?'"@id": "'.concat(n,'",'):'"@id":"'.concat(n,'",'))}},{key:"pushPredicate",value:function(e,t){var n=e.value;this.options.useRdfType||n!==f.Util.RDF_TYPE||(n="@type",this.objectOptions=Object.assign(Object.assign({},this.options),{compactIds:!0,vocab:!0}));var r=t.compactIri(n,!0);this.pushIndented(this.options.space?'"'.concat(r,'": ['):'"'.concat(r,'":[')),this.indentation++,this.lastPredicate=e}},{key:"pushObject",value:function(e,t){var n;this.hadObjectForPredicate?this.pushSeparator(l.SeparatorType.COMMA):this.hadObjectForPredicate=!0;try{n=e["@list"]?e:f.Util.termToValue(e,t,this.objectOptions||this.options)}catch(r){return this.emit("error",r)}this.pushIndented(JSON.stringify(n,null,this.options.space))}},{key:"endDocument",value:function(){this.opened=!1,this.originalContext&&!this.options.excludeContext?(this.indentation--,this.pushSeparator(l.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(l.SeparatorType.OBJECT_END)):(this.indentation--,this.pushSeparator(l.SeparatorType.ARRAY_END))}},{key:"endPredicate",value:function(e){this.indentation--,this.pushSeparator(e?l.SeparatorType.ARRAY_END_COMMA:l.SeparatorType.ARRAY_END),this.hadObjectForPredicate=!1,this.objectOptions=null,this.lastPredicate=null}},{key:"endSubject",value:function(e){this.indentation--,this.pushSeparator(e?l.SeparatorType.OBJECT_END_COMMA:l.SeparatorType.OBJECT_END),this.lastSubject=null}},{key:"endGraph",value:function(e){this.indentation--,this.pushSeparator(l.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(e?l.SeparatorType.OBJECT_END_COMMA:l.SeparatorType.OBJECT_END),this.lastGraph=null}},{key:"pushSeparator",value:function(e){this.pushIndented(e.label)}},{key:"pushIndented",value:function(e){var t=this.getIndentPrefix(),n=e.split("\n").map((function(e){return t+e})).join("\n");this.push(n),this.options.space&&this.push("\n")}},{key:"getIndentPrefix",value:function(){return this.options.space?this.options.space.repeat(this.indentation):""}}]),n}(c.Transform);t.JsonLdSerializer=h},82687:function(e,t,n){"use strict";var r=n(20378)["default"],i=n(20172)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.SeparatorType=void 0;var o=r((function e(t){i(this,e),this.label=t}));t.SeparatorType=o,o.COMMA=new o(","),o.OBJECT_START=new o("{"),o.OBJECT_END=new o("}"),o.OBJECT_END_COMMA=new o("},"),o.ARRAY_START=new o("["),o.ARRAY_END=new o("]"),o.ARRAY_END_COMMA=new o("],"),o.GRAPH_FIELD_NONCOMPACT=new o('"@graph": ['),o.GRAPH_FIELD_COMPACT=new o('"@graph":['),o.CONTEXT_FIELD=new o('"@context":')},61721:function(e,t,n){"use strict";var r=n(94673)["default"],i=n(20172)["default"],o=n(20378)["default"];n(23157),n(74916),n(23123),n(21703),Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;var a=n(20157),s=function(){function e(){i(this,e)}return o(e,null,[{key:"termToValue",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{compactIds:!1,useNativeTypes:!1};switch(t.termType){case"NamedNode":var o=n.compactIri(t.value,i.vocab);return i.compactIds?o:{"@id":o};case"DefaultGraph":return i.compactIds?t.value:{"@id":t.value};case"BlankNode":var s="_:".concat(t.value);return i.compactIds?s:{"@id":s};case"Literal":if(t.datatype.value===e.RDF_JSON){var u;try{u=JSON.parse(t.value)}catch(y){throw new a.ErrorCoded("Invalid JSON literal: "+y.message,a.ERROR_CODES.INVALID_JSON_LITERAL)}return{"@value":u,"@type":"@json"}}if("i18n-datatype"===i.rdfDirection&&t.datatype.value.startsWith(e.I18N)){var c=t.datatype.value.substr(e.I18N.length,t.datatype.value.length).split("_"),l=r(c,2),f=l[0],h=l[1];return Object.assign(Object.assign({"@value":t.value},f?{"@language":f}:{}),h?{"@direction":h}:{})}var d=t.datatype.value===e.XSD_STRING,p={"@value":!d&&i.useNativeTypes?e.stringToNativeType(t.value,t.datatype.value):t.value};return t.language?Object.assign(Object.assign({},p),{"@language":t.language}):d||"string"!==typeof p["@value"]?p:Object.assign(Object.assign({},p),{"@type":t.datatype.value})}}},{key:"stringToNativeType",value:function(t,n){if(n.startsWith(e.XSD)){var r=n.substr(e.XSD.length);switch(r){case"boolean":if("true"===t)return!0;if("false"===t)return!1;throw new Error("Invalid xsd:boolean value '".concat(t,"'"));case"integer":case"number":case"int":case"byte":case"long":var i=parseInt(t,10);if(isNaN(i))throw new Error("Invalid xsd:integer value '".concat(t,"'"));return i;case"float":case"double":var o=parseFloat(t);if(isNaN(o))throw new Error("Invalid xsd:float value '".concat(t,"'"));return o}}return t}}]),e}();t.Util=s,s.XSD="http://www.w3.org/2001/XMLSchema#",s.XSD_STRING=s.XSD+"string",s.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s.RDF_TYPE=s.RDF+"type",s.RDF_JSON=s.RDF+"JSON",s.I18N="https://www.w3.org/ns/i18n#"},78296:function(e,t,n){var r=n(89914)["Buffer"];n(47941),n(41539),n(39714),n(21703),n(38862),n(9653),n(74916),n(4723);var i={},o=i.LEFT_BRACE=1,a=i.RIGHT_BRACE=2,s=i.LEFT_BRACKET=3,u=i.RIGHT_BRACKET=4,c=i.COLON=5,l=i.COMMA=6,f=i.TRUE=7,h=i.FALSE=8,d=i.NULL=9,p=i.STRING=10,y=i.NUMBER=11,v=i.START=17,b=i.STOP=18,g=i.TRUE1=33,m=i.TRUE2=34,w=i.TRUE3=35,x=i.FALSE1=49,_=i.FALSE2=50,E=i.FALSE3=51,k=i.FALSE4=52,S=i.NULL1=65,R=i.NULL2=66,O=i.NULL3=67,C=i.NUMBER1=81,I=i.NUMBER3=83,D=i.STRING1=97,T=i.STRING2=98,A=i.STRING3=99,N=i.STRING4=100,P=i.STRING5=101,j=i.STRING6=102,L=i.VALUE=113,M=i.KEY=114,U=i.OBJECT=129,V=i.ARRAY=130,F="\\".charCodeAt(0),B="/".charCodeAt(0),G="\b".charCodeAt(0),J="\f".charCodeAt(0),K="\n".charCodeAt(0),q="\r".charCodeAt(0),H="\t".charCodeAt(0),W=65536;function z(){this.tState=v,this.value=void 0,this.string=void 0,this.stringBuffer=r.alloc?r.alloc(W):new r(W),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=L,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new r(2),3:new r(3),4:new r(4)},this.offset=-1}z.toknam=function(e){for(var t=Object.keys(i),n=0,r=t.length;n<r;n++){var o=t[n];if(i[o]===e)return o}return e&&"0x"+e.toString(16)};var $=z.prototype;$.onError=function(e){throw e},$.charError=function(e,t){this.tState=b,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(e[t]))+" at position "+t+" in state "+z.toknam(this.tState)))},$.appendStringChar=function(e){this.stringBufferOffset>=W&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=e},$.appendStringBuf=function(e,t,n){var r=e.length;"number"===typeof t&&(r="number"===typeof n?n<0?e.length-t+n:n-t:e.length-t),r<0&&(r=0),this.stringBufferOffset+r>W&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),e.copy(this.stringBuffer,this.stringBufferOffset,t,n),this.stringBufferOffset+=r},$.write=function(e){var t;"string"===typeof e&&(e=new r(e));for(var n=0,i=e.length;n<i;n++)if(this.tState===v){if(t=e[n],this.offset++,123===t)this.onToken(o,"{");else if(125===t)this.onToken(a,"}");else if(91===t)this.onToken(s,"[");else if(93===t)this.onToken(u,"]");else if(58===t)this.onToken(c,":");else if(44===t)this.onToken(l,",");else if(116===t)this.tState=g;else if(102===t)this.tState=x;else if(110===t)this.tState=S;else if(34===t)this.string="",this.stringBufferOffset=0,this.tState=D;else if(45===t)this.string="-",this.tState=C;else if(t>=48&&t<64)this.string=String.fromCharCode(t),this.tState=I;else if(32!==t&&9!==t&&10!==t&&13!==t)return this.charError(e,n)}else if(this.tState===D)if(t=e[n],this.bytes_remaining>0){for(var b=0;b<this.bytes_remaining;b++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+b]=e[b];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,n=n+b-1}else if(0===this.bytes_remaining&&t>=128){if(t<=193||t>244)return this.onError(new Error("Invalid UTF-8 character at position "+n+" in state "+z.toknam(this.tState)));if(t>=194&&t<=223&&(this.bytes_in_sequence=2),t>=224&&t<=239&&(this.bytes_in_sequence=3),t>=240&&t<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+n>e.length){for(var L=0;L<=e.length-1-n;L++)this.temp_buffs[this.bytes_in_sequence][L]=e[n+L];this.bytes_remaining=n+this.bytes_in_sequence-e.length,n=e.length-1}else this.appendStringBuf(e,n,n+this.bytes_in_sequence),n=n+this.bytes_in_sequence-1}else if(34===t)this.tState=v,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(p,this.string),this.offset+=r.byteLength(this.string,"utf8")+1,this.string=void 0;else if(92===t)this.tState=T;else{if(!(t>=32))return this.charError(e,n);this.appendStringChar(t)}else if(this.tState===T)if(t=e[n],34===t)this.appendStringChar(t),this.tState=D;else if(92===t)this.appendStringChar(F),this.tState=D;else if(47===t)this.appendStringChar(B),this.tState=D;else if(98===t)this.appendStringChar(G),this.tState=D;else if(102===t)this.appendStringChar(J),this.tState=D;else if(110===t)this.appendStringChar(K),this.tState=D;else if(114===t)this.appendStringChar(q),this.tState=D;else if(116===t)this.appendStringChar(H),this.tState=D;else{if(117!==t)return this.charError(e,n);this.unicode="",this.tState=A}else if(this.tState===A||this.tState===N||this.tState===P||this.tState===j){if(t=e[n],!(t>=48&&t<64||t>64&&t<=70||t>96&&t<=102))return this.charError(e,n);if(this.unicode+=String.fromCharCode(t),this.tState++===j){var M=parseInt(this.unicode,16);this.unicode=void 0,void 0!==this.highSurrogate&&M>=56320&&M<57344?(this.appendStringBuf(new r(String.fromCharCode(this.highSurrogate,M))),this.highSurrogate=void 0):void 0===this.highSurrogate&&M>=55296&&M<56320?this.highSurrogate=M:(void 0!==this.highSurrogate&&(this.appendStringBuf(new r(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new r(String.fromCharCode(M)))),this.tState=D}}else if(this.tState===C||this.tState===I)switch(t=e[n],t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(t),this.tState=I;break;default:this.tState=v;var U=Number(this.string);if(isNaN(U))return this.charError(e,n);this.string.match(/[0-9]+/)==this.string&&U.toString()!=this.string?this.onToken(p,this.string):this.onToken(y,U),this.offset+=this.string.length-1,this.string=void 0,n--;break}else if(this.tState===g){if(114!==e[n])return this.charError(e,n);this.tState=m}else if(this.tState===m){if(117!==e[n])return this.charError(e,n);this.tState=w}else if(this.tState===w){if(101!==e[n])return this.charError(e,n);this.tState=v,this.onToken(f,!0),this.offset+=3}else if(this.tState===x){if(97!==e[n])return this.charError(e,n);this.tState=_}else if(this.tState===_){if(108!==e[n])return this.charError(e,n);this.tState=E}else if(this.tState===E){if(115!==e[n])return this.charError(e,n);this.tState=k}else if(this.tState===k){if(101!==e[n])return this.charError(e,n);this.tState=v,this.onToken(h,!1),this.offset+=4}else if(this.tState===S){if(117!==e[n])return this.charError(e,n);this.tState=R}else if(this.tState===R){if(108!==e[n])return this.charError(e,n);this.tState=O}else if(this.tState===O){if(108!==e[n])return this.charError(e,n);this.tState=v,this.onToken(d,null),this.offset+=3}},$.onToken=function(e,t){},$.parseError=function(e,t){this.tState=b,this.onError(new Error("Unexpected "+z.toknam(e)+(t?"("+JSON.stringify(t)+")":"")+" in state "+z.toknam(this.state)))},$.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},$.pop=function(){var e=this.value,t=this.stack.pop();this.value=t.value,this.key=t.key,this.mode=t.mode,this.emit(e),this.mode||(this.state=L)},$.emit=function(e){this.mode&&(this.state=l),this.onValue(e)},$.onValue=function(e){},$.onToken=function(e,t){if(this.state===L)if(e===p||e===y||e===f||e===h||e===d)this.value&&(this.value[this.key]=t),this.emit(t);else if(e===o)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=M,this.mode=U;else if(e===s)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=V,this.state=L;else if(e===a){if(this.mode!==U)return this.parseError(e,t);this.pop()}else{if(e!==u)return this.parseError(e,t);if(this.mode!==V)return this.parseError(e,t);this.pop()}else if(this.state===M)if(e===p)this.key=t,this.state=c;else{if(e!==a)return this.parseError(e,t);this.pop()}else if(this.state===c){if(e!==c)return this.parseError(e,t);this.state=L}else{if(this.state!==l)return this.parseError(e,t);if(e===l)this.mode===V?(this.key++,this.state=L):this.mode===U&&(this.state=M);else{if(!(e===u&&this.mode===V||e===a&&this.mode===U))return this.parseError(e,t);this.pop()}}},z.C=i,e.exports=z},85272:function(e,t,n){"use strict";n.r(t),n.d(t,{BlankNode:function(){return l.DP},DataFactory:function(){return l.ZP},DefaultGraph:function(){return l.Xy},Lexer:function(){return r.Z},Literal:function(){return l.t$},NamedNode:function(){return l.jJ},Parser:function(){return i.Z},Quad:function(){return l.lD},Store:function(){return R},StreamParser:function(){return I},StreamWriter:function(){return D},Term:function(){return l.Rh},Triple:function(){return l.PL},Util:function(){return f},Variable:function(){return l._w},Writer:function(){return m},default:function(){return T},termFromId:function(){return l.LQ},termToId:function(){return l.dW}});var r=n(22366),i=n(80057),o=n(76133),a=n(92751),s=n(99418),u=n(49161),c=(n(74916),n(77601),n(24603),n(28450),n(88386),n(39714),n(92222),n(27852),n(69600),n(21249),n(15306),n(21703),n(41539),n(51010)),l=n(56181),f=n(36626),h=l.ZP.defaultGraph(),d=c.Z.rdf,p=c.Z.xsd,y=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,v=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,b={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"},g=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"equals",value:function(){return!1}}]),n}(l.Rh),m=function(){function e(t,n){if((0,o.Z)(this,e),this._prefixRegex=/$0^/,t&&"function"!==typeof t.write&&(n=t,t=null),n=n||{},this._lists=n.lists,t)this._outputStream=t,this._endStream=void 0===n.end||!!n.end;else{var r="";this._outputStream={write:function(e,t,n){r+=e,n&&n()},end:function(e){e&&e(null,r)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(n.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=h,this._prefixIRIs=Object.create(null),n.prefixes&&this.addPrefixes(n.prefixes),n.baseIRI&&(this._baseMatcher=new RegExp("^".concat(x(n.baseIRI)).concat(n.baseIRI.endsWith("/")?"":"[#?]")),this._baseLength=n.baseIRI.length))}return(0,a.Z)(e,[{key:"_inDefaultGraph",get:function(){return h.equals(this._graph)}},{key:"_write",value:function(e,t){this._outputStream.write(e,"utf8",t)}},{key:"_writeQuad",value:function(e,t,n,r,i){try{r.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(h.equals(r)?"":"".concat(this._encodeIriOrBlank(r)," {\n"))),this._graph=r,this._subject=null),e.equals(this._subject)?t.equals(this._predicate)?this._write(", ".concat(this._encodeObject(n)),i):this._write(";\n    ".concat(this._encodePredicate(this._predicate=t)," ").concat(this._encodeObject(n)),i):this._write("".concat((null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)," ").concat(this._encodePredicate(this._predicate=t)," ").concat(this._encodeObject(n)),i)}catch(o){i&&i(o)}}},{key:"_writeQuadLine",value:function(e,t,n,r,i){delete this._prefixMatch,this._write(this.quadToString(e,t,n,r),i)}},{key:"quadToString",value:function(e,t,n,r){return"".concat(this._encodeSubject(e)," ").concat(this._encodeIriOrBlank(t)," ").concat(this._encodeObject(n)).concat(r&&r.value?" ".concat(this._encodeIriOrBlank(r)," .\n"):" .\n")}},{key:"quadsToString",value:function(e){var t=this;return e.map((function(e){return t.quadToString(e.subject,e.predicate,e.object,e.graph)})).join("")}},{key:"_encodeSubject",value:function(e){return"Quad"===e.termType?this._encodeQuad(e):this._encodeIriOrBlank(e)}},{key:"_encodeIriOrBlank",value:function(e){if("NamedNode"!==e.termType)return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:"_:".concat(e.value);var t=e.value;this._baseMatcher&&this._baseMatcher.test(t)&&(t=t.substr(this._baseLength)),y.test(t)&&(t=t.replace(v,w));var n=this._prefixRegex.exec(t);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:t:"<".concat(t,">")}},{key:"_encodeLiteral",value:function(e){var t=e.value;if(y.test(t)&&(t=t.replace(v,w)),e.language)return'"'.concat(t,'"@').concat(e.language);if(this._lineMode){if(e.datatype.value===p.string)return'"'.concat(t,'"')}else switch(e.datatype.value){case p.string:return'"'.concat(t,'"');case p.boolean:if("true"===t||"false"===t)return t;break;case p.integer:if(/^[+-]?\d+$/.test(t))return t;break;case p.decimal:if(/^[+-]?\d*\.\d+$/.test(t))return t;break;case p.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(t))return t;break}return'"'.concat(t,'"^^').concat(this._encodeIriOrBlank(e.datatype))}},{key:"_encodePredicate",value:function(e){return e.value===d.type?"a":this._encodeIriOrBlank(e)}},{key:"_encodeObject",value:function(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}},{key:"_encodeQuad",value:function(e){var t=e.subject,n=e.predicate,r=e.object,i=e.graph;return"<<".concat(this._encodeSubject(t)," ").concat(this._encodePredicate(n)," ").concat(this._encodeObject(r)).concat((0,f.isDefaultGraph)(i)?"":" ".concat(this._encodeIriOrBlank(i)),">>")}},{key:"_blockedWrite",value:function(){throw new Error("Cannot write because the writer has been closed.")}},{key:"addQuad",value:function(e,t,n,r,i){void 0===n?this._writeQuad(e.subject,e.predicate,e.object,e.graph,t):"function"===typeof r?this._writeQuad(e,t,n,h,r):this._writeQuad(e,t,n,r||h,i)}},{key:"addQuads",value:function(e){for(var t=0;t<e.length;t++)this.addQuad(e[t])}},{key:"addPrefix",value:function(e,t,n){var r={};r[e]=t,this.addPrefixes(r,n)}},{key:"addPrefixes",value:function(e,t){if(!this._prefixIRIs)return t&&t();var n=!1;for(var r in e){var i=e[r];"string"!==typeof i&&(i=i.value),n=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[i]=r+=":",this._write("@prefix ".concat(r," <").concat(i,">.\n"))}if(n){var o="",a="";for(var s in this._prefixIRIs)o+=o?"|".concat(s):s,a+=(a?"|":"")+this._prefixIRIs[s];o=x(o,/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:".concat(a,")[^/]*$|")+"^(".concat(o,")([a-zA-Z][\\-_a-zA-Z0-9]*)$"))}this._write(n?"\n":"",t)}},{key:"blank",value:function(e,t){var n,r,i=e;switch(void 0===e?i=[]:e.termType?i=[{predicate:e,object:t}]:"length"in e||(i=[e]),r=i.length){case 0:return new g("[]");case 1:if(n=i[0],!(n.object instanceof g))return new g("[ ".concat(this._encodePredicate(n.predicate)," ").concat(this._encodeObject(n.object)," ]"));default:for(var o="[",a=0;a<r;a++)n=i[a],n.predicate.equals(e)?o+=", ".concat(this._encodeObject(n.object)):(o+="".concat((a?";\n  ":"\n  ")+this._encodePredicate(n.predicate)," ").concat(this._encodeObject(n.object)),e=n.predicate);return new g("".concat(o,"\n]"))}}},{key:"list",value:function(e){for(var t=e&&e.length||0,n=new Array(t),r=0;r<t;r++)n[r]=this._encodeObject(e[r]);return new g("(".concat(n.join(" "),")"))}},{key:"end",value:function(e){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;var t=e&&function(n,r){t=null,e(n,r)};if(this._endStream)try{return this._outputStream.end(t)}catch(n){}t&&t()}}]),e}();function w(e){var t=b[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}function x(e){return e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var _=n(43263),E=n(68932),k=n(62032),S=(n(78975),n(47941),n(33948),n(43371),n(78783),n(54747),n(32165),n(82526),n(41817),n(5701)),R=function(e){function t(e,n){(0,o.Z)(this,t),this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,n||!e||e[0]||(n=e,e=null),n=n||{},this._factory=n.factory||l.ZP,e&&this.addQuads(e)}return(0,a.Z)(t,[{key:"size",get:function(){var e=this._size;if(null!==e)return e;e=0;var t,n,r=this._graphs;for(var i in r)for(var o in t=r[i].subjects)for(var a in n=t[o])e+=Object.keys(n[a]).length;return this._size=e}},{key:"_addToIndex",value:function(e,t,n,r){var i=e[t]||(e[t]={}),o=i[n]||(i[n]={}),a=r in o;return a||(o[r]=null),!a}},{key:"_removeFromIndex",value:function(e,t,n,r){var i=e[t],o=i[n];for(var a in delete o[r],o)return;for(var s in delete i[n],i)return;delete e[t]}},{key:"_findInIndex",value:regeneratorRuntime.mark((function e(t,n,r,i,o,a,s,u){var c,f,h,d,p,y,v,b,g,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d=this._entities,p=(0,l.LQ)(u,this._factory),y={subject:null,predicate:null,object:null},n&&((c=t,t={})[n]=c[n]),e.t0=regeneratorRuntime.keys(t);case 5:if((e.t1=e.t0()).done){e.next=28;break}if(v=e.t1.value,!(f=t[v])){e.next=26;break}y[o]=(0,l.LQ)(d[v],this._factory),r&&((c=f,f={})[r]=c[r]),e.t2=regeneratorRuntime.keys(f);case 11:if((e.t3=e.t2()).done){e.next=26;break}if(b=e.t3.value,!(h=f[b])){e.next=24;break}y[a]=(0,l.LQ)(d[b],this._factory),g=i?i in h?[i]:[]:Object.keys(h),m=0;case 17:if(!(m<g.length)){e.next=24;break}return y[s]=(0,l.LQ)(d[g[m]],this._factory),e.next=21,this._factory.quad(y.subject,y.predicate,y.object,p);case 21:m++,e.next=17;break;case 24:e.next=11;break;case 26:e.next=5;break;case 28:case"end":return e.stop()}}),e,this)}))},{key:"_loop",value:function(e,t){for(var n in e)t(n)}},{key:"_loopByKey0",value:function(e,t,n){var r,i;if(r=e[t])for(i in r)n(i)}},{key:"_loopByKey1",value:function(e,t,n){var r,i;for(r in e)i=e[r],i[t]&&n(r)}},{key:"_loopBy2Keys",value:function(e,t,n,r){var i,o,a;if((i=e[t])&&(o=i[n]))for(a in o)r(a)}},{key:"_countInIndex",value:function(e,t,n,r){var i,o,a,s=0;for(var u in t&&((i=e,e={})[t]=i[t]),e)if(o=e[u])for(var c in n&&((i=o,o={})[n]=i[n]),o)(a=o[c])&&(r?r in a&&s++:s+=Object.keys(a).length);return s}},{key:"_getGraphs",value:function(e){if(!O(e))return this._graphs;var t={};return t[e]=this._graphs[e],t}},{key:"_uniqueEntities",value:function(e){var t=this,n=Object.create(null);return function(r){r in n||(n[r]=!0,e((0,l.LQ)(t._entities[r],t._factory)))}}},{key:"add",value:function(e){return this.addQuad(e),this}},{key:"addQuad",value:function(e,t,n,r){t||(r=e.graph,n=e.object,t=e.predicate,e=e.subject),e=(0,l.dW)(e),t=(0,l.dW)(t),n=(0,l.dW)(n),r=(0,l.dW)(r);var i=this._graphs[r];i||(i=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(i));var o=this._ids,a=this._entities;e=o[e]||(o[a[++this._id]=e]=this._id),t=o[t]||(o[a[++this._id]=t]=this._id),n=o[n]||(o[a[++this._id]=n]=this._id);var s=this._addToIndex(i.subjects,e,t,n);return this._addToIndex(i.predicates,t,n,e),this._addToIndex(i.objects,n,e,t),this._size=null,s}},{key:"addQuads",value:function(e){for(var t=0;t<e.length;t++)this.addQuad(e[t])}},{key:"delete",value:function(e){return this.removeQuad(e),this}},{key:"has",value:function(e,t,n,r){if(e&&e.subject){var i=e;e=i.subject,t=i.predicate,n=i.object,r=i.graph}return!this.readQuads(e,t,n,r).next().done}},{key:"import",value:function(e){var t=this;return e.on("data",(function(e){t.addQuad(e)})),e}},{key:"removeQuad",value:function(e,t,n,r){t||(r=e.graph,n=e.object,t=e.predicate,e=e.subject),e=(0,l.dW)(e),t=(0,l.dW)(t),n=(0,l.dW)(n),r=(0,l.dW)(r);var i,o,a,s=this._ids,u=this._graphs;if(!(e=s[e])||!(t=s[t])||!(n=s[n])||!(i=u[r])||!(o=i.subjects[e])||!(a=o[t])||!(n in a))return!1;for(e in this._removeFromIndex(i.subjects,e,t,n),this._removeFromIndex(i.predicates,t,n,e),this._removeFromIndex(i.objects,n,e,t),null!==this._size&&this._size--,i.subjects)return!0;return delete u[r],!0}},{key:"removeQuads",value:function(e){for(var t=0;t<e.length;t++)this.removeQuad(e[t])}},{key:"remove",value:function(e){var t=this;return e.on("data",(function(e){t.removeQuad(e)})),e}},{key:"removeMatches",value:function(e,t,n,r){var i=this,o=new S.Readable({objectMode:!0});return o._read=function(){var a,s=(0,k.Z)(i.readQuads(e,t,n,r));try{for(s.s();!(a=s.n()).done;){var u=a.value;o.push(u)}}catch(c){s.e(c)}finally{s.f()}o.push(null)},this.remove(o)}},{key:"deleteGraph",value:function(e){return this.removeMatches(null,null,null,e)}},{key:"getQuads",value:function(e,t,n,r){return(0,E.Z)(this.readQuads(e,t,n,r))}},{key:"readQuads",value:regeneratorRuntime.mark((function e(t,n,r,i){var o,a,s,u,c,f,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=t&&(0,l.dW)(t),n=n&&(0,l.dW)(n),r=r&&(0,l.dW)(r),i=i&&(0,l.dW)(i),o=this._getGraphs(i),a=this._ids,!(O(t)&&!(u=a[t])||O(n)&&!(c=a[n])||O(r)&&!(f=a[r]))){e.next=7;break}return e.abrupt("return");case 7:e.t0=regeneratorRuntime.keys(o);case 8:if((e.t1=e.t0()).done){e.next=30;break}if(h=e.t1.value,!(s=o[h])){e.next=28;break}if(!u){e.next=19;break}if(!f){e.next=16;break}return e.delegateYield(this._findInIndex(s.objects,f,u,c,"object","subject","predicate",h),"t2",14);case 14:e.next=17;break;case 16:return e.delegateYield(this._findInIndex(s.subjects,u,c,null,"subject","predicate","object",h),"t3",17);case 17:e.next=28;break;case 19:if(!c){e.next=23;break}return e.delegateYield(this._findInIndex(s.predicates,c,f,null,"predicate","object","subject",h),"t4",21);case 21:e.next=28;break;case 23:if(!f){e.next=27;break}return e.delegateYield(this._findInIndex(s.objects,f,null,null,"object","subject","predicate",h),"t5",25);case 25:e.next=28;break;case 27:return e.delegateYield(this._findInIndex(s.subjects,null,null,null,"subject","predicate","object",h),"t6",28);case 28:e.next=8;break;case 30:case"end":return e.stop()}}),e,this)}))},{key:"match",value:function(e,t,n,r){return new C(this,e,t,n,r)}},{key:"countQuads",value:function(e,t,n,r){e=e&&(0,l.dW)(e),t=t&&(0,l.dW)(t),n=n&&(0,l.dW)(n),r=r&&(0,l.dW)(r);var i,o,a,s,u=this._getGraphs(r),c=this._ids,f=0;if(O(e)&&!(o=c[e])||O(t)&&!(a=c[t])||O(n)&&!(s=c[n]))return 0;for(var h in u)(i=u[h])&&(f+=e?n?this._countInIndex(i.objects,s,o,a):this._countInIndex(i.subjects,o,a,s):t?this._countInIndex(i.predicates,a,s,o):this._countInIndex(i.objects,s,o,a));return f}},{key:"forEach",value:function(e,t,n,r,i){this.some((function(t){return e(t),!1}),t,n,r,i)}},{key:"every",value:function(e,t,n,r,i){var o=!1,a=!this.some((function(t){return o=!0,!e(t)}),t,n,r,i);return o&&a}},{key:"some",value:function(e,t,n,r,i){var o,a=(0,k.Z)(this.readQuads(t,n,r,i));try{for(a.s();!(o=a.n()).done;){var s=o.value;if(e(s))return!0}}catch(u){a.e(u)}finally{a.f()}return!1}},{key:"getSubjects",value:function(e,t,n){var r=[];return this.forSubjects((function(e){r.push(e)}),e,t,n),r}},{key:"forSubjects",value:function(e,t,n,r){t=t&&(0,l.dW)(t),n=n&&(0,l.dW)(n),r=r&&(0,l.dW)(r);var i,o,a,s=this._ids,u=this._getGraphs(r);if(e=this._uniqueEntities(e),!(O(t)&&!(o=s[t])||O(n)&&!(a=s[n])))for(r in u)(i=u[r])&&(o?a?this._loopBy2Keys(i.predicates,o,a,e):this._loopByKey1(i.subjects,o,e):a?this._loopByKey0(i.objects,a,e):this._loop(i.subjects,e))}},{key:"getPredicates",value:function(e,t,n){var r=[];return this.forPredicates((function(e){r.push(e)}),e,t,n),r}},{key:"forPredicates",value:function(e,t,n,r){t=t&&(0,l.dW)(t),n=n&&(0,l.dW)(n),r=r&&(0,l.dW)(r);var i,o,a,s=this._ids,u=this._getGraphs(r);if(e=this._uniqueEntities(e),!(O(t)&&!(o=s[t])||O(n)&&!(a=s[n])))for(r in u)(i=u[r])&&(o?a?this._loopBy2Keys(i.objects,a,o,e):this._loopByKey0(i.subjects,o,e):a?this._loopByKey1(i.predicates,a,e):this._loop(i.predicates,e))}},{key:"getObjects",value:function(e,t,n){var r=[];return this.forObjects((function(e){r.push(e)}),e,t,n),r}},{key:"forObjects",value:function(e,t,n,r){t=t&&(0,l.dW)(t),n=n&&(0,l.dW)(n),r=r&&(0,l.dW)(r);var i,o,a,s=this._ids,u=this._getGraphs(r);if(e=this._uniqueEntities(e),!(O(t)&&!(o=s[t])||O(n)&&!(a=s[n])))for(r in u)(i=u[r])&&(o?a?this._loopBy2Keys(i.subjects,o,a,e):this._loopByKey1(i.objects,o,e):a?this._loopByKey0(i.predicates,a,e):this._loop(i.objects,e))}},{key:"getGraphs",value:function(e,t,n){var r=[];return this.forGraphs((function(e){r.push(e)}),e,t,n),r}},{key:"forGraphs",value:function(e,t,n,r){for(var i in this._graphs)this.some((function(t){return e(t.graph),!0}),t,n,r,i)}},{key:"createBlankNode",value:function(e){var t,n;if(e){t=e="_:".concat(e),n=1;while(this._ids[t])t=e+n++}else do{t="_:b".concat(this._blankNodeIndex++)}while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2))}},{key:"extractLists",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.remove,r=void 0!==n&&n,i=t.ignoreErrors,o=void 0!==i&&i,a={},s=o?function(){return!0}:function(e,t){throw new Error("".concat(e.value," ").concat(t))},u=this.getQuads(null,c.Z.rdf.rest,c.Z.rdf.nil,null),l=r?(0,E.Z)(u):[];return u.forEach((function(t){var n,i,o=[],u=!1,f=t.graph,h=t.subject;while(h&&!u){for(var d=e.getQuads(null,null,h,null),p=e.getQuads(h,null,null,null),y=void 0,v=null,b=null,g=null,m=0;m<p.length&&!u;m++)y=p[m],y.graph.equals(f)?n?u=s(h,"has non-list arcs out"):y.predicate.value===c.Z.rdf.first?v?u=s(h,"has multiple rdf:first arcs"):l.push(v=y):y.predicate.value===c.Z.rdf.rest?b?u=s(h,"has multiple rdf:rest arcs"):l.push(b=y):d.length?u=s(h,"can't be subject and object"):(n=y,i="subject"):u=s(h,"not confined to single graph");for(var w=0;w<d.length&&!u;++w)y=d[w],n?u=s(h,"can't have coreferences"):y.predicate.value===c.Z.rdf.rest?g?u=s(h,"has incoming rdf:rest arcs"):g=y:(n=y,i="object");v?o.unshift(v.object):u=s(h,"has no list head"),h=g&&g.subject}u?r=!1:n&&(a[n[i].value]=o)})),r&&this.removeQuads(l),a}},{key:e,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.delegateYield(this.readQuads(),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);function O(e){return"string"===typeof e||e instanceof String}var C=function(e,t){(0,s.Z)(r,e);var n=(0,u.Z)(r);function r(e,t,i,a,s){var u;return(0,o.Z)(this,r),u=n.call(this,{objectMode:!0}),Object.assign((0,_.Z)(u),{n3Store:e,subject:t,predicate:i,object:a,graph:s}),u}return(0,a.Z)(r,[{key:"filtered",get:function(){if(!this._filtered){var e,t=this.n3Store,n=this.graph,r=this.object,i=this.predicate,o=this.subject,a=this._filtered=new R({factory:t._factory}),s=(0,k.Z)(t.readQuads(o,i,r,n));try{for(s.s();!(e=s.n()).done;){var u=e.value;a.addQuad(u)}}catch(c){s.e(c)}finally{s.f()}}return this._filtered}},{key:"size",get:function(){return this.filtered.size}},{key:"_read",value:function(){var e,t=(0,k.Z)(this);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.push(n)}}catch(r){t.e(r)}finally{t.f()}this.push(null)}},{key:"add",value:function(e){return this.filtered.add(e)}},{key:"delete",value:function(e){return this.filtered.delete(e)}},{key:"has",value:function(e){return this.filtered.has(e)}},{key:"match",value:function(e,t,n,i){return new r(this.filtered,e,t,n,i)}},{key:t,value:regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.delegateYield(this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph),"t0",1);case 1:case"end":return e.stop()}}),e,this)}))}]),r}(S.Readable,Symbol.iterator),I=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;(0,o.Z)(this,n),r=t.call(this,{decodeStrings:!0}),r._readableState.objectMode=!0;var a,s,u=new i.Z(e);return u.parse({on:function(e,t){switch(e){case"data":a=t;break;case"end":s=t;break}}},(function(e,t){e&&r.emit("error",e)||t&&r.push(t)}),(function(e,t){r.emit("prefix",e,t)})),r._transform=function(e,t,n){a(e),n()},r._flush=function(e){s(),e()},r}return(0,a.Z)(n,[{key:"import",value:function(e){var t=this;return e.on("data",(function(e){t.write(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.emit("error",e)})),this}}]),n}(S.Transform),D=function(e){(0,s.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;(0,o.Z)(this,n),r=t.call(this,{encoding:"utf8",writableObjectMode:!0});var i=r._writer=new m({write:function(e,t,n){r.push(e),n&&n()},end:function(e){r.push(null),e&&e()}},e);return r._transform=function(e,t,n){i.addQuad(e,n)},r._flush=function(e){i.end(e)},r}return(0,a.Z)(n,[{key:"import",value:function(e){var t=this;return e.on("data",(function(e){t.write(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.emit("error",e)})),e.on("prefix",(function(e,n){t._writer.addPrefix(e,n)})),this}}]),n}(S.Transform),T={Lexer:r.Z,Parser:i.Z,Writer:m,Store:R,StreamParser:I,StreamWriter:D,Util:f,DataFactory:l.ZP,Term:l.Rh,NamedNode:l.jJ,Literal:l.t$,BlankNode:l.DP,Variable:l._w,DefaultGraph:l.Xy,Quad:l.lD,Triple:l.PL,termFromId:l.LQ,termToId:l.dW}},85561:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(54124),t),i(n(99083),t),i(n(35739),t),i(n(12794),t),i(n(34898),t),i(n(67457),t),i(n(60432),t)},54124:function(e,t,n){"use strict";var r=n(20172)["default"],i=n(20378)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.BlankNode=void 0;var o=function(){function e(t){r(this,e),this.termType="BlankNode",this.value=t}return i(e,[{key:"equals",value:function(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}}]),e}();t.BlankNode=o},99083:function(e,t,n){"use strict";var r=n(20172)["default"],i=n(20378)["default"];n(92222),Object.defineProperty(t,"__esModule",{value:!0}),t.DataFactory=void 0;var o=n(54124),a=n(35739),s=n(12794),u=n(34898),c=n(67457),l=n(60432),f=0,h=function(){function e(t){r(this,e),this.blankNodeCounter=0,t=t||{},this.blankNodePrefix=t.blankNodePrefix||"df_".concat(f++,"_")}return i(e,[{key:"namedNode",value:function(e){return new u.NamedNode(e)}},{key:"blankNode",value:function(e){return new o.BlankNode(e||"".concat(this.blankNodePrefix).concat(this.blankNodeCounter++))}},{key:"literal",value:function(e,t){return new s.Literal(e,t)}},{key:"variable",value:function(e){return new l.Variable(e)}},{key:"defaultGraph",value:function(){return a.DefaultGraph.INSTANCE}},{key:"quad",value:function(e,t,n,r){return new c.Quad(e,t,n,r||this.defaultGraph())}},{key:"fromTerm",value:function(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(s.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}},{key:"fromQuad",value:function(e){return this.fromTerm(e)}},{key:"resetBlankNodeCounter",value:function(){this.blankNodeCounter=0}}]),e}();t.DataFactory=h},35739:function(e,t,n){"use strict";var r=n(20172)["default"],i=n(20378)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultGraph=void 0;var o=function(){function e(){r(this,e),this.termType="DefaultGraph",this.value=""}return i(e,[{key:"equals",value:function(e){return!!e&&"DefaultGraph"===e.termType}}]),e}();t.DefaultGraph=o,o.INSTANCE=new o},12794:function(e,t,n){"use strict";var r=n(20172)["default"],i=n(20378)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.Literal=void 0;var o=n(34898),a=function(){function e(t,n){r(this,e),this.termType="Literal",this.value=t,"string"===typeof n?(this.language=n,this.datatype=e.RDF_LANGUAGE_STRING):n?(this.language="",this.datatype=n):(this.language="",this.datatype=e.XSD_STRING)}return i(e,[{key:"equals",value:function(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}]),e}();t.Literal=a,a.RDF_LANGUAGE_STRING=new o.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),a.XSD_STRING=new o.NamedNode("http://www.w3.org/2001/XMLSchema#string")},34898:function(e,t,n){"use strict";var r=n(20172)["default"],i=n(20378)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.NamedNode=void 0;var o=function(){function e(t){r(this,e),this.termType="NamedNode",this.value=t}return i(e,[{key:"equals",value:function(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}}]),e}();t.NamedNode=o},67457:function(e,t,n){"use strict";var r=n(20172)["default"],i=n(20378)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.Quad=void 0;var o=function(){function e(t,n,i,o){r(this,e),this.termType="Quad",this.value="",this.subject=t,this.predicate=n,this.object=i,this.graph=o}return i(e,[{key:"equals",value:function(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}]),e}();t.Quad=o},60432:function(e,t,n){"use strict";var r=n(20172)["default"],i=n(20378)["default"];Object.defineProperty(t,"__esModule",{value:!0}),t.Variable=void 0;var o=function(){function e(t){r(this,e),this.termType="Variable",this.value=t}return i(e,[{key:"equals",value:function(e){return!!e&&"Variable"===e.termType&&e.value===this.value}}]),e}();t.Variable=o},78230:function(e,t,n){"use strict";var r=n(17964)["default"];function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n(21703),n(68309),n(21249),n(92222),n(69600),n(47042),n(74916),n(15306);var o={};function a(e,t,n){function r(e,n,r){return"string"===typeof t?t:t(e,n,r)}n||(n=Error);var a=function(e){function t(t,n,i){return e.call(this,r(t,n,i))||this}return i(t,e),t}(n);a.prototype.name=n.name,a.prototype.code=e,o[e]=a}function s(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}function u(e,t,n){return e.substr(!n||n<0?0:+n,t.length)===t}function c(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}function l(e,t,n){return"number"!==typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}a("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),a("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,o;if("string"===typeof t&&u(t,"not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be",c(e," argument"))o="The ".concat(e," ").concat(i," ").concat(s(t,"type"));else{var a=l(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(a," ").concat(i," ").concat(s(t,"type"))}return o+=". Received type ".concat(r(n)),o}),TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=o},91606:function(e,t,n){"use strict";var r=n(81921);n(47941);var i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=l;var o=n(92345),a=n(1607);n(66110)(l,o);for(var s=i(a.prototype),u=0;u<s.length;u++){var c=s[u];l.prototype[c]||(l.prototype[c]=a.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",f)))}function f(){this._writableState.ended||r.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},33091:function(e,t,n){"use strict";e.exports=i;var r=n(32784);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(66110)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},92345:function(e,t,n){"use strict";var r,i=n(81921);n(41539),n(82472),n(48675),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016),n(30489),n(40561),n(82526),n(41817),n(72443),n(69600),n(92222),e.exports=I,I.ReadableState=C;n(87041).EventEmitter;var o=function(e,t){return e.listeners(t).length},a=n(69767),s=n(89914).Buffer,u=n.g.Uint8Array||function(){};function c(e){return s.from(e)}function l(e){return s.isBuffer(e)||e instanceof u}var f,h=n(94616);f=h&&h.debuglog?h.debuglog("stream"):function(){};var d,p,y,v=n(33006),b=n(71437),g=n(28552),m=g.getHighWaterMark,w=n(78230).q,x=w.ERR_INVALID_ARG_TYPE,_=w.ERR_STREAM_PUSH_AFTER_EOF,E=w.ERR_METHOD_NOT_IMPLEMENTED,k=w.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(66110)(I,a);var S=b.errorOrDestroy,R=["error","close","destroy","pause","resume"];function O(e,t,n){if("function"===typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function C(e,t,i){r=r||n(91606),e=e||{},"boolean"!==typeof i&&(i=t instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",i),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(52225).s),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function I(e){if(r=r||n(91606),!(this instanceof I))return new I(e);var t=this instanceof r;this._readableState=new C(e,this,t),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function D(e,t,n,r,i){f("readableAddChunk",t);var o,a=e._readableState;if(null===t)a.reading=!1,L(e,a);else if(i||(o=A(a,t)),o)S(e,o);else if(a.objectMode||t&&t.length>0)if("string"===typeof t||a.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=c(t)),r)a.endEmitted?S(e,new k):T(e,a,t,!0);else if(a.ended)S(e,new _);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?T(e,a,t,!1):V(e,a)):T(e,a,t,!1)}else r||(a.reading=!1,V(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function T(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&M(e)),V(e,t)}function A(e,t){var n;return l(t)||"string"===typeof t||void 0===t||e.objectMode||(n=new x("chunk",["string","Buffer","Uint8Array"],t)),n}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),I.prototype.destroy=b.destroy,I.prototype._undestroy=b.undestroy,I.prototype._destroy=function(e,t){t(e)},I.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"===typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=s.from(e,t),t=""),n=!0),D(this,e,t,!1,n)},I.prototype.unshift=function(e){return D(this,e,null,!0,!1)},I.prototype.isPaused=function(){return!1===this._readableState.flowing},I.prototype.setEncoding=function(e){d||(d=n(52225).s);var t=new d(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;var r=this._readableState.buffer.head,i="";while(null!==r)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var N=1073741824;function P(e){return e>=N?e=N:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function j(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=P(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function L(e,t){if(f("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?M(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,U(e)))}}function M(e){var t=e._readableState;f("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(U,e))}function U(e){var t=e._readableState;f("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,H(e)}function V(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(F,e,t))}function F(e,t){while(!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length)){var n=t.length;if(f("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function B(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,H(e))}}function G(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function J(e){f("readable nexttick read 0"),e.read(0)}function K(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(q,e,t))}function q(e,t){f("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),H(e),t.flowing&&!t.reading&&e.read(0)}function H(e){var t=e._readableState;f("flow",t.flowing);while(t.flowing&&null!==e.read());}function W(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function z(e){var t=e._readableState;f("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick($,t,e))}function $(e,t){if(f("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function Y(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}I.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?z(this):M(this),null;if(e=j(e,t),0===e&&t.ended)return 0===t.length&&z(this),null;var r,i=t.needReadable;return f("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,f("length less than watermark",i)),t.ended||t.reading?(i=!1,f("reading or ended",i)):i&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=j(n,t))),r=e>0?W(e,t):null,null===r?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&z(this)),null!==r&&this.emit("data",r),r},I.prototype._read=function(e){S(this,new E("_read()"))},I.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e);break}r.pipesCount+=1,f("pipe count=%d opts=%j",r.pipesCount,t);var a=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr,s=a?c:g;function u(e,t){f("onunpipe"),e===n&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,d())}function c(){f("onend"),e.end()}r.endEmitted?i.nextTick(s):n.once("end",s),e.on("unpipe",u);var l=B(n);e.on("drain",l);var h=!1;function d(){f("cleanup"),e.removeListener("close",v),e.removeListener("finish",b),e.removeListener("drain",l),e.removeListener("error",y),e.removeListener("unpipe",u),n.removeListener("end",c),n.removeListener("end",g),n.removeListener("data",p),h=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||l()}function p(t){f("ondata");var i=e.write(t);f("dest.write",i),!1===i&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==Y(r.pipes,e))&&!h&&(f("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function y(t){f("onerror",t),g(),e.removeListener("error",y),0===o(e,"error")&&S(e,t)}function v(){e.removeListener("finish",b),g()}function b(){f("onfinish"),e.removeListener("close",v),g()}function g(){f("unpipe"),n.unpipe(e)}return n.on("data",p),O(e,"error",y),e.once("close",v),e.once("finish",b),e.emit("pipe",n),r.flowing||(f("pipe resume"),n.resume()),e},I.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=Y(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},I.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,f("on readable",r.length,r.reading),r.length?M(this):r.reading||i.nextTick(J,this))),n},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(e,t){var n=a.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(G,this),n},I.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||i.nextTick(G,this),t},I.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!e.readableListening,K(this,e)),e.paused=!1,this},I.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},I.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(f("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){if(f("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){var o=t.push(i);o||(r=!0,e.pause())}})),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<R.length;o++)e.on(R[o],this.emit.bind(this,R[o]));return this._read=function(t){f("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"===typeof Symbol&&(I.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=n(85660)),p(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),I._fromList=W,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(I.from=function(e,t){return void 0===y&&(y=n(76415)),y(I,e,t)})},32784:function(e,t,n){"use strict";e.exports=l;var r=n(78230).q,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,u=n(91606);function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}n(66110)(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}},1607:function(e,t,n){"use strict";var r,i=n(81921);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){q(t,e)}}n(41539),n(82472),n(48675),n(92990),n(18927),n(33105),n(35035),n(74345),n(7174),n(32846),n(44731),n(77209),n(96319),n(58867),n(37789),n(33739),n(29368),n(14483),n(12056),n(3462),n(30678),n(27462),n(33824),n(55021),n(12974),n(15016),n(82526),n(41817),n(92401),n(4855),e.exports=C,C.WritableState=O;var a={deprecate:n(94728)},s=n(69767),u=n(89914).Buffer,c=n.g.Uint8Array||function(){};function l(e){return u.from(e)}function f(e){return u.isBuffer(e)||e instanceof c}var h,d=n(71437),p=n(28552),y=p.getHighWaterMark,v=n(78230).q,b=v.ERR_INVALID_ARG_TYPE,g=v.ERR_METHOD_NOT_IMPLEMENTED,m=v.ERR_MULTIPLE_CALLBACK,w=v.ERR_STREAM_CANNOT_PIPE,x=v.ERR_STREAM_DESTROYED,_=v.ERR_STREAM_NULL_VALUES,E=v.ERR_STREAM_WRITE_AFTER_END,k=v.ERR_UNKNOWN_ENCODING,S=d.errorOrDestroy;function R(){}function O(e,t,i){r=r||n(91606),e=e||{},"boolean"!==typeof i&&(i=t instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=y(this,e,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){L(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function C(e){r=r||n(91606);var t=this instanceof r;if(!t&&!h.call(C,this))return new C(e);this._writableState=new O(e,this,t),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),s.call(this)}function I(e,t){var n=new E;S(e,n),i.nextTick(t,n)}function D(e,t,n,r){var o;return null===n?o=new _:"string"===typeof n||t.objectMode||(o=new b("chunk",["string","Buffer"],n)),!o||(S(e,o),i.nextTick(r,o),!1)}function T(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=u.from(t,n)),t}function A(e,t,n,r,i,o){if(!n){var a=T(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else N(e,t,!1,s,r,i,o);return u}function N(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new x("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function P(e,t,n,r,o){--t.pendingcb,n?(i.nextTick(o,r),i.nextTick(J,e,t),e._writableState.errorEmitted=!0,S(e,r)):(o(r),e._writableState.errorEmitted=!0,S(e,r),J(e,t))}function j(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function L(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if("function"!==typeof o)throw new m;if(j(n),t)P(e,n,r,t,o);else{var a=F(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||V(e,n),r?i.nextTick(M,e,n,a,o):M(e,n,a,o)}}function M(e,t,n,r){n||U(e,t),t.pendingcb--,r(),J(e,t)}function U(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function V(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;var s=0,u=!0;while(n)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,N(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{while(n){var c=n.chunk,l=n.encoding,f=n.callback,h=t.objectMode?1:c.length;if(N(e,t,!1,h,c,l,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function F(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function B(e,t){e._final((function(n){t.pendingcb--,n&&S(e,n),t.prefinished=!0,e.emit("prefinish"),J(e,t)}))}function G(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(B,e,t)))}function J(e,t){var n=F(t);if(n&&(G(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}function K(e,t,n){t.ending=!0,J(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function q(e,t,n){var r=e.entry;e.entry=null;while(r){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}n(66110)(C,s),O.prototype.getBuffer=function(){var e=this.bufferedRequest,t=[];while(e)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(O.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!h.call(this,e)||this===C&&(e&&e._writableState instanceof O)}})):h=function(e){return e instanceof this},C.prototype.pipe=function(){S(this,new w)},C.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&f(e);return o&&!u.isBuffer(e)&&(e=l(e)),"function"===typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!==typeof n&&(n=R),r.ending?I(this,n):(o||D(this,r,e,n))&&(r.pendingcb++,i=A(this,r,o,e,t,n)),i},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||V(this,e))},C.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new k(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(e,t,n){n(new g("_write()"))},C.prototype._writev=null,C.prototype.end=function(e,t,n){var r=this._writableState;return"function"===typeof e?(n=e,e=null,t=null):"function"===typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||K(this,r,n),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),C.prototype.destroy=d.destroy,C.prototype._undestroy=d.undestroy,C.prototype._destroy=function(e,t){t(e)}},85660:function(e,t,n){"use strict";var r,i=n(81921);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(82526),n(41817),n(41539),n(30489),n(72443);var a=n(32626),s=Symbol("lastResolve"),u=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),f=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function p(e,t){return{value:e,done:t}}function y(e){var t=e[s];if(null!==t){var n=e[d].read();null!==n&&(e[f]=null,e[s]=null,e[u]=null,t(p(n,!1)))}}function v(e){i.nextTick(y,e)}function b(e,t){return function(n,r){e.then((function(){t[l]?n(p(void 0,!0)):t[h](n,r)}),r)}}var g=Object.getPrototypeOf((function(){})),m=Object.setPrototypeOf((r={get stream(){return this[d]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(p(void 0,!0));if(this[d].destroyed)return new Promise((function(t,n){i.nextTick((function(){e[c]?n(e[c]):t(p(void 0,!0))}))}));var n,r=this[f];if(r)n=new Promise(b(r,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(p(o,!1));n=new Promise(this[h])}return this[f]=n,n}},o(r,Symbol.asyncIterator,(function(){return this})),o(r,"return",(function(){var e=this;return new Promise((function(t,n){e[d].destroy(null,(function(e){e?n(e):t(p(void 0,!0))}))}))})),r),g),w=function(e){var t,n=Object.create(m,(t={},o(t,d,{value:e,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,u,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,l,{value:e._readableState.endEmitted,writable:!0}),o(t,h,{value:function(e,t){var r=n[d].read();r?(n[f]=null,n[s]=null,n[u]=null,e(p(r,!1))):(n[s]=e,n[u]=t)},writable:!0}),t));return n[f]=null,a(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[u];return null!==t&&(n[f]=null,n[s]=null,n[u]=null,t(e)),void(n[c]=e)}var r=n[s];null!==r&&(n[f]=null,n[s]=null,n[u]=null,r(p(void 0,!0))),n[l]=!0})),e.on("readable",v.bind(null,n)),n};e.exports=w},33006:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}n(47941),n(82526),n(57327),n(41539),n(38880),n(54747),n(49337),n(21703),n(47042);var c=n(89914),l=c.Buffer,f=n(52361),h=f.inspect,d=h&&h.custom||"inspect";function p(e,t,n){l.prototype.copy.call(e,t,n)}e.exports=function(){function e(){a(this,e),this.head=null,this.tail=null,this.length=0}return u(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";var t=this.head,n=""+t.data;while(t=t.next)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return l.alloc(0);var t=l.allocUnsafe(e>>>0),n=this.head,r=0;while(n)p(n.data,t,r),r+=n.data.length,n=n.next;return t}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;e-=r.length;while(t=t.next){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),e-=o,0===e){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=l.allocUnsafe(e),n=this.head,r=1;n.data.copy(t),e-=n.data.length;while(n=n.next){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),e-=o,0===e){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:d,value:function(e,t){return h(this,i({},t,{depth:0,customInspect:!1}))}}]),e}()},71437:function(e,t,n){"use strict";var r=n(81921);function i(e,t){var n=this,i=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return i||s?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(u,this,e)):r.nextTick(u,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?n._writableState?n._writableState.errorEmitted?r.nextTick(a,n):(n._writableState.errorEmitted=!0,r.nextTick(o,n,e)):r.nextTick(o,n,e):t?(r.nextTick(a,n),t(e)):r.nextTick(a,n)})),this)}function o(e,t){u(e,t),a(e)}function a(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function u(e,t){e.emit("error",t)}function c(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}e.exports={destroy:i,undestroy:s,errorOrDestroy:c}},32626:function(e,t,n){"use strict";var r=n(78230).q.ERR_STREAM_PREMATURE_CLOSE;function i(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}function o(){}function a(e){return e.setHeader&&"function"===typeof e.abort}function s(e,t,n){if("function"===typeof t)return s(e,null,t);t||(t={}),n=i(n||o);var u=t.readable||!1!==t.readable&&e.readable,c=t.writable||!1!==t.writable&&e.writable,l=function(){e.writable||h()},f=e._writableState&&e._writableState.finished,h=function(){c=!1,f=!0,u||n.call(e)},d=e._readableState&&e._readableState.endEmitted,p=function(){u=!1,d=!0,c||n.call(e)},y=function(t){n.call(e,t)},v=function(){var t;return u&&!d?(e._readableState&&e._readableState.ended||(t=new r),n.call(e,t)):c&&!f?(e._writableState&&e._writableState.ended||(t=new r),n.call(e,t)):void 0},b=function(){e.req.on("finish",h)};return a(e)?(e.on("complete",h),e.on("abort",v),e.req?b():e.on("request",b)):c&&!e._writableState&&(e.on("end",l),e.on("close",l)),e.on("end",p),e.on("finish",h),!1!==t.error&&e.on("error",y),e.on("close",v),function(){e.removeListener("complete",h),e.removeListener("abort",v),e.removeListener("request",b),e.req&&e.req.removeListener("finish",h),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",h),e.removeListener("end",p),e.removeListener("error",y),e.removeListener("close",v)}}e.exports=s},76415:function(e,t,n){n(21703),e.exports=function(){throw new Error("Readable.from is not available in the browser")}},83329:function(e,t,n){"use strict";var r;function i(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}n(21249),n(41539),n(54747);var o=n(78230).q,a=o.ERR_MISSING_ARGS,s=o.ERR_STREAM_DESTROYED;function u(e){if(e)throw e}function c(e){return e.setHeader&&"function"===typeof e.abort}function l(e,t,o,a){a=i(a);var u=!1;e.on("close",(function(){u=!0})),void 0===r&&(r=n(32626)),r(e,{readable:t,writable:o},(function(e){if(e)return a(e);u=!0,a()}));var l=!1;return function(t){if(!u&&!l)return l=!0,c(e)?e.abort():"function"===typeof e.destroy?e.destroy():void a(t||new s("pipe"))}}function f(e){e()}function h(e,t){return e.pipe(t)}function d(e){return e.length?"function"!==typeof e[e.length-1]?u:e.pop():u}function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new a("streams");var o=t.map((function(e,n){var a=n<t.length-1,s=n>0;return l(e,a,s,(function(e){r||(r=e),e&&o.forEach(f),a||(o.forEach(f),i(r))}))}));return t.reduce(h)}e.exports=p},28552:function(e,t,n){"use strict";var r=n(78230).q.ERR_INVALID_OPT_VALUE;function i(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}function o(e,t,n,o){var a=i(t,o,n);if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||a<0){var s=o?n:"highWaterMark";throw new r(s,a)}return Math.floor(a)}return e.objectMode?16:16384}e.exports={getHighWaterMark:o}},69767:function(e,t,n){e.exports=n(87041).EventEmitter},5701:function(e,t,n){t=e.exports=n(92345),t.Stream=t,t.Readable=t,t.Writable=n(1607),t.Duplex=n(91606),t.Transform=n(32784),t.PassThrough=n(33091),t.finished=n(32626),t.pipeline=n(83329)},15600:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(62810))},62810:function(e,t,n){"use strict";function r(e,t){t=t||"";var n=t.indexOf("#");if(n>0&&(t=t.substr(0,n)),!e.length){if(t.indexOf(":")<0)throw new Error("Found invalid baseIRI '".concat(t,"' for value '").concat(e,"'"));return t}if(e.startsWith("?")){var r=t.indexOf("?");return r>0&&(t=t.substr(0,r)),t+e}if(e.startsWith("#"))return t+e;if(!t.length){var a=e.indexOf(":");if(a<0)throw new Error("Found invalid relative IRI '".concat(e,"' for a missing baseIRI"));return o(e,a)}var s=e.indexOf(":");if(s>=0)return o(e,s);var u=t.indexOf(":");if(u<0)throw new Error("Found invalid baseIRI '".concat(t,"' for value '").concat(e,"'"));var c,l=t.substr(0,u+1);if(0===e.indexOf("//"))return l+o(e,s);if(t.indexOf("//",u)===u+1){if(c=t.indexOf("/",u+3),c<0)return t.length>u+3?t+"/"+o(e,s):l+o(e,s)}else if(c=t.indexOf("/",u+1),c<0)return l+o(e,s);if(0===e.indexOf("/"))return t.substr(0,c)+i(e);var f=t.substr(c),h=f.lastIndexOf("/");return h>=0&&h<f.length-1&&(f=f.substr(0,h+1),"."===e[0]&&"."!==e[1]&&"/"!==e[1]&&e[2]&&(e=e.substr(1))),e=f+e,e=i(e),t.substr(0,c)+e}function i(e){var t=[],n=0;while(n<e.length)switch(e[n]){case"/":if("."===e[n+1])if("."===e[n+2]){if(!a(e[n+3])){t.push([]),n++;break}t.pop(),e[n+3]||t.push([]),n+=3}else{if(!a(e[n+2])){t.push([]),n++;break}e[n+2]||t.push([]),n+=2}else t.push([]),n++;break;case"#":case"?":t.length||t.push([]),t[t.length-1].push(e.substr(n)),n=e.length;break;default:t.length||t.push([]),t[t.length-1].push(e[n]),n++;break}return"/"+t.map((function(e){return e.join("")})).join("/")}function o(e,t){var n=t+1;t>=0?"/"===e[t+1]&&"/"===e[t+2]&&(n=t+3):"/"===e[0]&&"/"===e[1]&&(n=2);var r=e.indexOf("/",n);if(r<0)return e;var o=e.substr(0,r),a=e.substr(r);return o+i(a)}function a(e){return!e||"#"===e||"?"===e||"/"===e}n(21703),n(92222),n(23157),n(69600),n(21249),Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=r,t.removeDotSegments=i,t.removeDotSegmentsOfPath=o},53161:function(e,t,n){e=n.nmd(e);var r,i,o,a=n(50476),s=n(17964)["default"];n(82526),n(41817),n(41539),n(39341),n(73706),n(10408),n(32165),n(78783),n(33948),n(92222),n(21703),n(23157),n(27852),n(47042),n(74916),n(4723),n(73210),n(23123),n(69720),n(69600),n(68309),n(21249),n(83112),n(39714),n(38862),n(57327),n(43290),n(40561),n(26833),n(36210),n(77601),n(2707),n(69826),n(15306),n(47941),n(74819),n(81299),n(26699),n(32023),n(52262),n(24506),n(70189),n(54747),n(49337),function(a,u){"object"==s(t)&&"object"==s(e)?e.exports=u(n(67696),n(97077),n(34229),n(85272)):(i=[n(67696),n(97077),n(34229),n(85272)],r=u,o="function"===typeof r?r.apply(t,i):r,void 0===o||(e.exports=o))}(window,(function(e,t,n,r){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==s(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t,n){"use strict";n.r(t),n.d(t,"DocumentFormat",(function(){return Me})),n.d(t,"MalformedDocumentError",(function(){return qe})),n.d(t,"NetworkError",(function(){return We})),n.d(t,"SolidContainerModel",(function(){return Rt})),n.d(t,"SolidDocument",(function(){return Fe})),n.d(t,"SolidEngine",(function(){return ft})),n.d(t,"SolidModel",(function(){return Ue}));var r,i=n(0),o=n.n(i),u=n(1),c=n(2),l=n(3),f=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},h=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e},d=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},p=new(function(){function e(){}return e.prototype.resolve=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.shift();e.length>0;){var r=e.shift();r.startsWith("/")?n=this.base(n)+r:r.startsWith("http://")||r.startsWith("https://")?n=r:n.endsWith("/")?n+=r:n+="/"+r}return n},e.prototype.resolveDirectory=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.resolve.apply(this,h(e));return n.endsWith("/")?n:n+"/"},e.prototype.base=function(e){var t=e.indexOf("://"),n=e.substr(t+3).indexOf("/");return-1!==n?e.substring(0,t+3+n):e},e.prototype.parentDirectory=function(e){e.endsWith("/")&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return-1!==t?e.substr(0,t+1):e},e.prototype.fileName=function(e){var t=e.lastIndexOf("/");return-1!==t?e.substr(t+1):""},e.prototype.directoryName=function(e){return e.endsWith("/")||(e=this.parentDirectory(e)),this.fileName(e.slice(0,-1))},e.prototype.parse=function(e){var t=e.trim().match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);if(!t)return null;var n=t[4]||"",r=f(-1===n.indexOf(":")?[n]:n.split(":"),2),i=r[0],o=r[1];return{protocol:t[2]||void 0,domain:i||void 0,port:o||void 0,path:t[5]||void 0,query:t[7]||void 0,fragment:t[9]||void 0}},e.prototype.clean=function(e,t){var n,r,i=this.parse(e);if(!i)return e;try{for(var o=d(Object.entries(i)),a=o.next();!a.done;a=o.next()){var s=f(a.value,2),u=s[0],c=s[1];i[u]=!1!==t[u]&&c||""}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return[i.protocol?i.protocol+"://":"",i.domain||"",i.port?":"+i.port:"",i.path||"",i.query?"?"+i.query:"",i.fragment?"#"+i.fragment:""].join("")},e.prototype.route=function(e){return this.clean(e,{protocol:!0,domain:!0,port:!0,path:!0,query:!1,fragment:!1})},e}()),y=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),v=function(e){this.name=e},b=function(){function e(e,t,n){this.resourceUrl=e,this.name=t,this.value=n}return e.fromStatement=function(e){var t="NamedNode"===e.subject.termType?e.subject.value:null;return e.predicate.value===G("rdf:type")?this.type(t,e.object.value):"NamedNode"===e.object.termType?this.reference(t,e.predicate.value,e.object.value):"BlankNode"===e.object.termType?this.reference(t,e.predicate.value,null):"Variable"===e.object.termType?this.reference(t,e.predicate.value,new v(e.object.value)):this.literal(t,e.predicate.value,e.object.datatype.value===G("xsd:dateTime")?new Date(e.object.value):e.object.value)},e.literal=function(e,t,n){return new g(e,t,n)},e.reference=function(e,t,n){return new m(e,t,n)},e.type=function(e,t){return new w(e,t)},e.toTurtle=function(e,t){return void 0===t&&(t=null),e.map((function(e){return e.toTurtle(t)+" ."})).join("\n")},e.prototype.toTurtle=function(e){return void 0===e&&(e=null),this.getTurtleSubject(e)+" "+this.getTurtlePredicate()+" "+this.getTurtleObject(e)},e.prototype.clone=function(t){switch(t=null!=t?t:this.resourceUrl,this.type){case 2:return e.literal(t,this.name,this.value);case 0:return e.type(t,this.value);case 1:return e.reference(t,this.name,this.value)}},e.prototype.getTurtleReference=function(e,t){var n=null==e?void 0:e.indexOf("#");return e&&e!==t?null!==t&&e.startsWith(t)&&-1!==n?"<#"+e.substr(n+1)+">":"<"+encodeURI(e)+">":"<>"},e.prototype.getTurtleSubject=function(e){return this.getTurtleReference(this.resourceUrl,e)},e.prototype.getTurtlePredicate=function(){return"<"+encodeURI(this.name)+">"},e}(),g=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.type=2,i}return y(t,e),t.prototype.getTurtleObject=function(){if(this.value instanceof Date){var e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.map((function(e){return e.toString().padStart(2,"0")}))};return'"'+e(this.value.getUTCFullYear(),this.value.getUTCMonth()+1,this.value.getUTCDate()).join("-")+"T"+e(this.value.getUTCHours(),this.value.getUTCMinutes(),this.value.getUTCSeconds()).join(":")+'Z"^^<'+G("xsd:dateTime")+">"}return JSON.stringify(this.value)},t}(b),m=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.type=1,i}return y(t,e),t.prototype.getTurtleObject=function(e){return this.value instanceof v?this.value.name:this.getTurtleReference(this.value,e)},t}(b),w=function(e){function t(t,n){var r=e.call(this,t,G("rdf:type"),n)||this;return r.type=0,r}return y(t,e),t.prototype.getTurtlePredicate=function(){return"a"},t.prototype.getTurtleObject=function(){return"<"+encodeURI(this.value)+">"},t}(b),x=b,_=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},E=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(_(arguments[t]));return e},k=function(){function e(e){this.url=e,this.statements=[],this.types=[],this.properties=[],this.propertiesIndex={}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.getPropertyValue(G("foaf:name"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this.getPropertyValue(G("rdfs:label"))},enumerable:!0,configurable:!0}),e.prototype.isType=function(e){return-1!==this.types.indexOf(G(e))},e.prototype.getPropertyValue=function(e,t){void 0===t&&(t=null);var n=_(this.propertiesIndex[G(e)]||[],1)[0];return n?n.value:t},e.prototype.getPropertyValues=function(e){return(this.propertiesIndex[G(e)]||[]).map((function(e){return e.value}))},e.prototype.addStatement=function(e){if(e.subject.value===this.url){var t=x.fromStatement(e);0===t.type&&this.types.push(t.value),this.statements.push(e),this.properties.push(t),this.propertiesIndex[t.name]=E(this.propertiesIndex[t.name]||[],[t])}},e}(),S=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},R=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(S(arguments[t]));return e},O=new(function(){function e(){}return e.prototype.create=function(e){return Array.isArray(e)?e:[e]},e.prototype.clean=function(e){return e.filter((function(e){return!!e}))},e.prototype.contains=function(e,t){return-1!==e.indexOf(t)},e.prototype.filter=function(e){return e.filter((function(e){return!!e}))},e.prototype.flatten=function(e){return e.reduce((function(e,t){return R(e,t)}),[])},e.prototype.last=function(e){return e[e.length-1]},e.prototype.make=function(e,t){return void 0===t&&(t=null),new Array(e).fill(t)},e.prototype.range=function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t},e.prototype.removeItem=function(e,t){var n=e.indexOf(t);return-1!==n&&e.splice(n,1),t},e.prototype.unique=function(e,t){void 0===t&&(t=null);var n=e.map((function(e){return t?t(e):e}));return e.filter((function(e,t){return n.indexOf(n[t])===t}))},e.prototype.without=function(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))},e.prototype.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],r=function(t){n.push(e.map((function(e){return e[t]})))},i=0;i<e[0].length;i++)r(i);return n},e}()),C=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},I=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},D=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},T=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(D(arguments[t]));return e},A=function(){function e(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={}),this.url=e,this.statements=t,this.metadata=n,this.resourcesIndex=this.statements.reduce((function(e,t){var n=t.subject.value;return n in e||(e[n]=new k(n)),e[n].addStatement(t),e}),{}),this.resources=Object.values(this.resourcesIndex),this.properties=this.resources.reduce((function(e,t){return T(e,t.properties)}),[])}return e.prototype.isEmpty=function(){return 0===this.statements.length},e.prototype.hasProperty=function(e,t){return e in this.resourcesIndex&&t in this.resourcesIndex[e].propertiesIndex},e.prototype.toJsonLD=function(){return C(this,void 0,void 0,(function(){return I(this,(function(e){return[2,J.createJsonLD(this.statements)]}))}))},e.prototype.resource=function(e){var t;return null!==(t=this.resourcesIndex[e])&&void 0!==t?t:null},e.prototype.clone=function(t){var n=this;void 0===t&&(t=null);var r=new e(t||this.url),i=O.without(Object.getOwnPropertyNames(this),["url"]);return Object.assign(r,i.reduce((function(e,t){return e[t]=n[t],e}),{})),r},e}(),N=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=function(){return(P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},j=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},L=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},M=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},U=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(M(arguments[t]));return e},V=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},F={foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",posix:"http://www.w3.org/ns/posix/stat#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",xsd:"http://www.w3.org/2001/XMLSchema#"},B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return N(t,e),t}(i.SoukaiError);function G(e,t){if(void 0===t&&(t={}),/^https?:\/\//.test(e))return e;var n=e.indexOf(":");if(-1===n)return e;t=P(P({},F),t);var r=e.substr(0,n);return r in t?t[r]+e.substr(r.length+1):e}var J=new(function(){function e(){}return e.prototype.parseTurtle=function(e,t){var n=this;return void 0===t&&(t={}),new Promise((function(r,i){var o=[],a=new l.Parser({baseIRI:t.baseUrl||"",format:t.format||"text/turtle"}),s={containsRelativeIRIs:!1,describedBy:n.getDescribedBy(t)},u=a._resolveRelativeIRI;a._resolveRelativeIRI=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.containsRelativeIRIs=!0,a._resolveRelativeIRI=u,a._resolveRelativeIRI.apply(a,U(e))},a.parse(e,(function(e,n){e?i(new B(e.message)):n?o.push(n):r(new A(t.baseUrl||"",o,s))}))}))},e.prototype.parseJsonLD=function(e){return j(this,void 0,void 0,(function(){return L(this,(function(t){return[2,new Promise((function(t,n){var r=[],i=new u.JsonLdParser({baseIRI:e["@id"]||""});i.on("data",(function(e){r.push(e)})),i.on("error",n),i.on("end",(function(){return t(new A(e["@id"]||null,r))})),i.write(JSON.stringify(e)),i.end()}))]}))}))},e.prototype.createJsonLD=function(e){return j(this,void 0,void 0,(function(){return L(this,(function(t){return e.sort((function(e,t){return e.subject.value.localeCompare(t.subject.value)})),[2,new Promise((function(t,n){var r,i,o=new c.JsonLdSerializer,a="";o.on("data",(function(e){return a+=e})),o.on("error",n),o.on("end",(function(){return t({"@graph":JSON.parse(a)})}));try{for(var s=V(e),u=s.next();!u.done;u=s.next()){var l=u.value;o.write(l)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}o.end()}))]}))}))},e.prototype.flattenJsonLD=function(e){return j(this,void 0,void 0,(function(){return L(this,(function(t){switch(t.label){case 0:return[4,this.parseJsonLD(e)];case 1:return[2,t.sent().toJsonLD()]}}))}))},e.prototype.getJsonLDProperty=function(e,t){if((t=G(t))in e)return this.getJsonLDPropertyValue(e[t]);if("@context"in e){var n=e["@context"],r=Object.entries(n).find((function(e){var n=M(e,2),r=(n[0],n[1]);return t.startsWith(r)}));if(r){var i=e[("@vocab"===r[0]?"":r[0]+":")+t.substr(r[1].length)];return this.getJsonLDPropertyValue(i)}}},e.prototype.getJsonLDPropertyValue=function(e){if(void 0!==e)return Array.isArray(e)&&1===e.length?e[0]:e},e.prototype.getDescribedBy=function(e){var t,n;if(null===(t=e.headers)||void 0===t?void 0:t.has("Link")){var r=null===(n=e.headers.get("Link"))||void 0===n?void 0:n.match(/<([^>]+)>; rel="describedBy"/i);if(r)return p.resolve(e.baseUrl||"",r[1])}},e}()),K=new(function(){function e(){}return e.prototype.slug=function(e){return e.replace(/[^\d\w]/g,"-").replace(/-+/g,"-").toLowerCase()},e.prototype.fixUrl=function(e){var t=e.indexOf("://")+3;return e.substr(0,t)+e.substr(t).replace(/\/\//g,"/")},e}()),q=new(function(){function e(){}return e.prototype.generate=function(e){return e?(e^16*Math.random()>>e/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,this.generate)},e}()),H=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),W=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},z=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},$=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Q=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Y(arguments[t]));return e},X=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return H(t,e),t.prototype.resolve=function(){return W(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,c=this;return z(this,(function(l){switch(l.label){case 0:this.__modelsInSameDocument&&this.__modelsInOtherDocumentIds||(this.__modelsInSameDocument=[],this.__modelsInOtherDocumentIds=this.parent.getAttribute(this.foreignKeyName)),e={};try{for(t=$(this.__modelsInOtherDocumentIds),n=t.next();!n.done;n=t.next())r=n.value,(i=p.parentDirectory(r))in e||(e[i]=[]),e[i].push(r)}catch(e){s={error:e}}finally{try{n&&!n.done&&(u=t.return)&&u.call(t)}finally{if(s)throw s.error}}return[4,Promise.all(Object.keys(e).map((function(t){return c.relatedClass.from(t).all({$in:e[t]})})))];case 1:return o=l.sent(),a=o.reduce((function(e,t){return e.push.apply(e,Q(t)),e}),[]),this.related=Q(this.__modelsInSameDocument,a),[2,this.related]}}))}))},t.prototype.__loadDocumentModels=function(e,t){return W(this,void 0,void 0,(function(){var n,r,o,a,s,u=this;return z(this,(function(c){switch(c.label){case 0:return n=new i.EngineHelper,r=this.parent.getAttribute(this.foreignKeyName),o=this.relatedClass.prepareEngineFilters(),a=t["@graph"].filter((function(e){return-1!==r.indexOf(e["@id"])})).reduce((function(e,t){return e[t["@id"]]={"@graph":[t]},e}),{}),s=this,[4,Promise.all(Object.entries(n.filterDocuments(a,o)).map((function(t){var n=Y(t,2),r=n[0],i=n[1];return u.relatedClass.createFromEngineDocument(e,i,r)})))];case 1:return s.__modelsInSameDocument=c.sent(),this.__modelsInOtherDocumentIds=r.filter((function(e){return!u.__modelsInSameDocument.some((function(t){return t.url===e}))})),this.__modelsInOtherDocumentIds.length>0||(this.related=this.__modelsInSameDocument.slice(0)),[2]}}))}))},t}(i.BelongsToManyRelation),Z=function(){return(Z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ee=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},te=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},ne=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},re=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ne(arguments[t]));return e},ie=new(function(){function e(){}return e.prototype.tap=function(e,t){return t?(t(e),e):this.proxyTap(e)},e.prototype.proxyTap=function(e){var t=new Proxy(e,{get:function(e,n,r){var i=Reflect.get(e,n,r);return"function"!=typeof i?i:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return i.call.apply(i,re([e],n)),t}}});return t},e}()),oe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},ae=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},se=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},ue=function(){function e(){}return e.prototype.deleteModels=function(e){return oe(this,void 0,void 0,(function(){var t,n=this;return ae(this,(function(r){switch(r.label){case 0:return t=this.decantDocumentModelsByContainer(e),[4,Promise.all(Object.entries(t).map((function(e){var t=se(e,2),r=t[0],i=t[1];return n.deleteContainerDocumentsModels(r,i)})))];case 1:return r.sent(),[2]}}))}))},e.prototype.decantDocumentModelsByContainer=function(e){var t=this.decantModelsByDocument(e);return Object.entries(t).reduce((function(e,t){var n=se(t,2),r=n[0],i=n[1],o=p.parentDirectory(r);return o in e||(e[o]=[]),e[o].push({documentUrl:r,models:i}),e}),{})},e.prototype.decantModelsByDocument=function(e){return e.reduce((function(e,t){var n=t.getDocumentUrl();return n in e||(e[n]=[]),e[n].push(t),e}),{})},e.prototype.deleteContainerDocumentsModels=function(e,t){return oe(this,void 0,void 0,(function(){var n,r=this;return ae(this,(function(i){switch(i.label){case 0:return[4,o.a.requireEngine().readMany(e,{$in:t.map((function(e){return e.documentUrl}))})];case 1:return n=i.sent(),[4,Promise.all(t.map((function(t){var i=t.documentUrl,o=t.models;return r.deleteDocumentModels(n,e,i,o)})))];case 2:return i.sent(),[2]}}))}))},e.prototype.deleteDocumentModels=function(e,t,n,r){return oe(this,void 0,void 0,(function(){var i,a;return ae(this,(function(s){switch(s.label){case 0:return i=o.a.requireEngine(),a=r.map((function(e){return e.url})),e[n]["@graph"].some((function(e){return!a.some((function(t){return t===e["@id"]}))}))?[3,2]:[4,i.delete(t,n)];case 1:return s.sent(),[2];case 2:return[4,i.update(t,n,{"@graph":{$updateItems:{$where:{"@id":{$in:a}},$unset:!0}}})];case 3:return s.sent(),[2]}}))}))},e}(),ce=function(){return(ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},le=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},fe=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},he=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},de=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pe=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(he(arguments[t]));return e},ye=function(){},ve=function(){function e(e,t){void 0===t&&(t=!0),this.declarations={},this.vocabs=Object.entries(e).map((function(e){var t=he(e,2),n=t[0];return{name:n,iriPrefix:t[1],propertyPrefix:n+":",used:!1}})),this.compactIRIs=t,this.vocabs[0].name="@vocab",this.vocabs[0].propertyPrefix="",this.vocabs[0].used=!0}return e.prototype.compactIRI=function(e){var t,n;try{for(var r=de(this.vocabs),i=r.next();!i.done;i=r.next()){var o=i.value;if(e.startsWith(o.iriPrefix))return o.used=!0,""+o.propertyPrefix+e.substr(o.iriPrefix.length)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e},e.prototype.addDeclaration=function(e,t){this.declarations[e]=t},e.prototype.toJsonLD=function(){var e=this.vocabs.filter((function(e){return e.used})).reduce((function(e,t){var n;return ce(ce({},e),((n={})[t.name]=t.iriPrefix,n))}),{});return ce(ce({},e),this.declarations)},e}(),be=function(){function e(){}return e.prototype.serializeToJsonLD=function(e,t){var n,r;void 0===e&&(e=!0),t=t||new ve(this.modelClass.rdfContexts);var i={"@context":{},"@type":null};try{for(var o=de(Object.entries(this.getAttributes())),a=o.next();!a.done;a=o.next()){var s=he(a.value,2),u=s[0],c=s[1];this.setJsonLDField(i,u,c,t)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return e&&this.includeRelatedJsonLDInstances(i,t),this.setJsonLDTypes(i,t),this.setJsonLDContexts(i,t),i},e.prototype.convertJsonLDToAttributes=function(e){return le(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,l,f,h,d,p;return fe(this,(function(y){switch(y.label){case 0:return[4,J.parseJsonLD(e)];case 1:t=y.sent(),n=t.resource(e["@id"]),r=this.modelClass.fields,(i={})[this.modelClass.primaryKey]=e["@id"];try{for(o=de(Object.entries(r)),a=o.next();!a.done;a=o.next())s=he(a.value,2),u=s[0],c=s[1],u!==this.modelClass.primaryKey&&(l=he(n.getPropertyValues(c.rdfProperty)),f=l[0],h=l.slice(1),void 0!==f&&(i[u]=h.length>0?pe([f],h):f))}catch(e){d={error:e}}finally{try{a&&!a.done&&(p=o.return)&&p.call(o)}finally{if(d)throw d.error}}return[2,i]}}))}))},e.prototype.convertEngineFiltersToJsonLD=function(e){var t={},n=new ve(this.modelClass.rdfContexts),r=pe(this.modelClass.rdfsClasses),i=r.map((function(e){return n.compactIRI(e)})),o=[];r.length>0&&(o.push({$contains:i}),o.push({$contains:r})),1===r.length&&(o.push({$eq:i[0]}),o.push({$eq:r[0]})),e.$in&&(t.$in=e.$in,delete e.$in);var a=this.convertAttributeValuesToJsonLD(e);return o.length>0&&(a["@type"]={$or:o}),Object.keys(a).length>0&&(t["@graph"]={$contains:a}),t},e.prototype.convertEngineUpdatesToJsonLD=function(e){return this.convertAttributeValuesToJsonLD(e)},e.prototype.setJsonLDField=function(e,t,n,r){if(t!==this.modelClass.primaryKey){var i=this.modelClass.fields[t],o=i?i.rdfProperty:this.getDefaultRdfContext()+t;this.setJsonLDProperty(e,r.compactIRIs?r.compactIRI(o):o,n,i)}else e["@id"]=n.toString()},e.prototype.includeRelatedJsonLDInstances=function(e,t){var n,r,o=this,a=this.modelClass.relations.map((function(e){return[e,o.getRelation(e)]})),s=function(n,r){if(!r.loaded||!(r instanceof i.HasManyRelation||r instanceof i.HasOneRelation))return"continue";var o=G(r.foreignKeyName,r.relatedClass.rdfContexts),a=function(e){var n=e.serializeToJsonLD(!1,t);return delete n["@context"],delete n[o],n};e[n]=r instanceof i.HasManyRelation?r.related.map((function(e){return a(e)})):a(r.related),t.addDeclaration(n,{"@reverse":o})};try{for(var u=de(a),c=u.next();!c.done;c=u.next()){var l=he(c.value,2);s(l[0],l[1])}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}},e.prototype.setJsonLDTypes=function(e,t){var n=pe(this.modelClass.rdfsClasses).map((function(e){return t.compactIRI(e)}));1===n.length?e["@type"]=n[0]:n.length>0&&(e["@type"]=n)},e.prototype.setJsonLDContexts=function(e,t){e["@context"]=t.toJsonLD()},e.prototype.setJsonLDProperty=function(e,t,n,r){return void 0===r&&(r=null),("object"!=s(n)||1!==Object.keys(n).length||Object.keys(n)[0].startsWith("$"))&&(n=this.castJsonLDValue(n,r)),!(n instanceof ye)&&(e[t]=n,!0)},e.prototype.castJsonLDValue=function(e,t){var n=this;switch(void 0===t&&(t=null),t&&t.type||null){case i.FieldType.Key:return{"@id":e.toString()};case i.FieldType.Date:return{"@type":"http://www.w3.org/2001/XMLSchema#dateTime","@value":new Date(e).toISOString()};case i.FieldType.Array:switch(e.length){case 0:return new ye;case 1:return this.castJsonLDValue(e[0],t.items);default:return e.map((function(e){return n.castJsonLDValue(e,t.items)}))}default:return JSON.parse(JSON.stringify(e))}},e.prototype.convertAttributeValuesToJsonLD=function(e){var t,n,r=new ve(this.modelClass.rdfContexts,!1),i={};try{for(var o=de(Object.entries(e)),a=o.next();!a.done;a=o.next()){var s=he(a.value,2),u=s[0],c=s[1];this.setJsonLDField(i,u,c,r)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},e}(),ge=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),me=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},we=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},xe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},_e=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(xe(arguments[t]));return e},Ee=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.__newModels=[],t.useSameDocument=!1,t}return ge(t,e),t.prototype.resolve=function(){return me(this,void 0,void 0,(function(){var e;return we(this,(function(t){switch(t.label){case 0:return this.__modelsInSameDocument&&this.__modelsInOtherDocumentIds?[4,this.relatedClass.all({$in:this.__modelsInOtherDocumentIds})]:[2,[]];case 1:return e=t.sent(),this.related=_e(this.__modelsInSameDocument,e),[2,this.related]}}))}))},t.prototype.create=function(e){return void 0===e&&(e={}),me(this,void 0,void 0,(function(){var t;return we(this,(function(n){switch(n.label){case 0:return this.assertLoaded("create"),t=this.relatedClass.newInstance(e),[4,this.save(t)];case 1:return n.sent(),[2,t]}}))}))},t.prototype.save=function(e){return me(this,void 0,void 0,(function(){return we(this,(function(t){switch(t.label){case 0:return this.assertLoaded("save"),this.add(e),this.useSameDocument?[3,2]:[4,e.save()];case 1:return t.sent(),[3,4];case 2:return this.parent.exists()?[4,this.parent.save()]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},t.prototype.add=function(e){this.assertLoaded("add"),this.related.includes(e)||this.__newModels.includes(e)||(this.parent.exists()&&this.initializeInverseRelations(e),e.exists()||this.__newModels.push(e),this.related.push(e))},t.prototype.usingSameDocument=function(e){return void 0===e&&(e=!0),this.useSameDocument=e,this},t.prototype.__loadDocumentModels=function(e,t){var n;return me(this,void 0,void 0,(function(){var r,o,a,u,c,l=this;return we(this,(function(f){switch(f.label){case 0:return r=new i.EngineHelper,o=null===(n=this.relatedClass.fields[this.foreignKeyName])||void 0===n?void 0:n.rdfProperty,a=this.relatedClass.prepareEngineFilters(),u=t["@graph"].filter((function(e){var t=J.getJsonLDProperty(e,o);return"object"==s(t)&&"@id"in t&&t["@id"]===l.parent.url})).reduce((function(e,t){return e[t["@id"]]={"@graph":[t]},e}),{}),c=this,[4,Promise.all(Object.entries(r.filterDocuments(u,a)).map((function(t){var n=xe(t,2),r=n[0],i=n[1];return l.relatedClass.createFromEngineDocument(e,i,r)})))];case 1:return c.__modelsInSameDocument=f.sent(),this.__modelsInOtherDocumentIds=Object.keys(u).filter((function(e){return!l.__modelsInSameDocument.some((function(t){return t.url===e}))})),this.__modelsInOtherDocumentIds.length>0||(this.related=this.__modelsInSameDocument.slice(0)),[2]}}))}))},t.prototype.initializeInverseRelations=function(e){var t,n,r=this.parent.constructor;try{for(var o=Ee(this.relatedClass.relations),a=o.next();!a.done;a=o.next()){var s=a.value,u=e.getRelation(s);u.relatedClass===r&&(u instanceof i.BelongsToManyRelation?(e.setAttribute(u.foreignKeyName,[this.parent.url]),u.related=[this.parent]):u instanceof i.BelongsToOneRelation&&(e.setAttribute(u.foreignKeyName,this.parent.url),u.related=this.parent))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},t.prototype.assertLoaded=function(e){if(!this.loaded){if(this.parent.exists())throw new i.SoukaiError('The "'+e+'" method cannot be called before loading the relationship');this.related=[]}},t}(i.HasManyRelation),Se=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Re=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Oe=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ce=function(e){function t(t,n){return e.call(this,t,n,"url")||this}return Se(t,e),t.prototype.resolve=function(){return Re(this,void 0,void 0,(function(){var e,t,n;return Oe(this,(function(r){switch(r.label){case 0:return e=this.relatedClass.collection,t=p.parentDirectory(this.parent.url),n=this,[4,this.relatedClass.from(p.parentDirectory(t)).find(t)];case 1:return n.related=r.sent(),this.relatedClass.collection=e,[2,this.related]}}))}))},t}(i.SingleModelRelation),Ie=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),De=function(){return(De=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Te=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Ae=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ne=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Pe=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ne(arguments[t]));return e},je=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Le=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._sourceDocumentUrl=null,t}return Ie(t,e),t.from=function(e){return this.collection=e,this},t.at=function(e){return this.from(e)},t.boot=function(t){var n=this;e.boot.call(this,t),this.rdfContexts=De(De({},this.rdfContexts),{solid:"http://www.w3.org/ns/solid/terms#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",ldp:"http://www.w3.org/ns/ldp#",purl:"http://purl.org/dc/terms/"});var r=this.instance.getDefaultRdfContext();for(var i in this.instance.hasAutomaticTimestamp("createdAt")&&void 0===this.fields.createdAt.rdfProperty&&(this.fields.createdAt.rdfProperty=G("purl:created")),this.instance.hasAutomaticTimestamp("updatedAt")&&void 0===this.fields.updatedAt.rdfProperty&&(this.fields.updatedAt.rdfProperty=G("purl:modified")),this.rdfsClasses=new Set(Pe(this.rdfsClasses).map((function(e){return-1===e.indexOf(":")?r+e:G(e,n.rdfContexts)}))),this.fields)this.fields[i].rdfProperty=G(this.fields[i].rdfProperty||""+r+i,this.rdfContexts);this.fields[this.primaryKey].rdfProperty=null},t.createFromEngineDocument=function(e,t,n){return this.instance.createFromEngineDocument(e,t,n)},t.find=function(e){return Te(this,void 0,void 0,(function(){var t,n,r,i;return Ae(this,(function(a){switch(a.label){case 0:t=this.instance.serializeKey(e),n=p.route(t),r=p.parentDirectory(n),this.ensureBooted(),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,o.a.requireEngine().readOne(r,n)];case 2:return i=a.sent(),[2,this.instance.createFromEngineDocument(n,i,t)];case 3:return a.sent(),[2,null];case 4:return[2]}}))}))},t.all=function(t){var n=this;return void 0===t&&(t={}),t=this.prepareEngineFilters(t),this.withCollection((function(){return e.all.call(n,t)}))},t.prepareEngineFilters=function(e){return void 0===e&&(e={}),this.instance.convertEngineFiltersToJsonLD(e)},t.newInstance=function(e,t){return void 0===t&&(t=!1),new this(e,t)},t.newFromJsonLD=function(e,t){return Te(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,f;return Ae(this,(function(h){switch(h.label){case 0:return[4,J.flattenJsonLD(e)];case 1:return n=h.sent(),r=t||p.route(e["@id"]),[4,this.instance.parseEngineDocumentAttributes(r,n,e["@id"])];case 2:return i=h.sent(),[4,(o=new this(i)).loadDocumentModels(r,n)];case 3:h.sent(),o.resetEngineData(),a=function(e){var t=o._relations[e],n=t.getLoadedModels();n.forEach((function(e){return e.resetEngineData()})),t instanceof ke&&(n.forEach((function(e){delete e[t.foreignKeyName],t.__newModels.push(e)})),t.__modelsInSameDocument=[])};try{for(s=je(this.relations),u=s.next();!u.done;u=s.next())c=u.value,a(c)}catch(e){l={error:e}}finally{try{u&&!u.done&&(f=s.return)&&f.call(s)}finally{if(l)throw l.error}}return[2,o]}}))}))},t.withCollection=function(e,t){return void 0===e&&(e=""),Te(this,void 0,void 0,(function(){var n,r;return Ae(this,(function(o){switch(o.label){case 0:if(n=this.collection,"string"!=typeof e&&(t=e,e=""),!t)throw new i.SoukaiError("Invalid method given to withCollection (SolidModel internals)");return this.collection=e||n,[4,t()];case 1:return r=o.sent(),this.collection=n,[2,r]}}))}))},t.prototype.save=function(t){var n=this;return this.modelClass.withCollection(t||this.guessCollection(),(function(){return Te(n,void 0,void 0,(function(){var t;return Ae(this,(function(n){switch(n.label){case 0:!this.url&&this.modelClass.mintsUrls&&this.mintUrl(),n.label=1;case 1:return n.trys.push([1,3,,5]),[4,e.prototype.save.call(this)];case 2:return n.sent(),[3,5];case 3:if(!((t=n.sent())instanceof i.DocumentAlreadyExists))throw t;return this.url=this.newUniqueUrl(this.url),[4,e.prototype.save.call(this)];case 4:return n.sent(),[3,5];case 5:return[2,this]}}))}))}))},t.prototype.delete=function(){var t=this;return this.modelClass.withCollection(this.guessCollection()||"",(function(){return e.prototype.delete.call(t)}))},t.prototype.mintUrl=function(e,t,n){this.setAttribute(this.modelClass.primaryKey,this.newUrl(e,n)),e&&(this._documentExists=null==t||t)},t.prototype.toJsonLD=function(){return this.serializeToJsonLD()},t.prototype.getIdAttribute=function(){return this.getAttribute("url")},t.prototype.setExists=function(t){this._documentExists=t&&this._documentExists,e.prototype.setExists.call(this,t)},t.prototype.documentExists=function(){return this._documentExists},t.prototype.setDocumentExists=function(e){this._documentExists=e},t.prototype.isDirty=function(t){return t?e.prototype.isDirty.call(this,t):!!e.prototype.isDirty.call(this)||this.getDirtyDocumentModels().length>0},t.prototype.getDocumentUrl=function(){return this.url?p.route(this.url):null},t.prototype.getSourceDocumentUrl=function(){return this._sourceDocumentUrl},t.prototype.getContainerUrl=function(){var e=this.getDocumentUrl();return e?p.parentDirectory(e):null},t.prototype.getSourceContainerUrl=function(){var e=this.getSourceDocumentUrl();return e?p.parentDirectory(e):null},t.prototype.initialize=function(t,n){e.prototype.initialize.call(this,t,n),this._documentExists=n},t.prototype.createFromEngineDocument=function(e,t,n){return Te(this,void 0,void 0,(function(){var r,i=this;return Ae(this,(function(o){switch(o.label){case 0:return[4,function(){return Te(i,void 0,void 0,(function(){var r;return Ae(this,(function(i){switch(i.label){case 0:return[4,this.parseEngineDocumentAttributes(e,t,n)];case 1:return(r=i.sent())[this.modelClass.primaryKey]=n||e,[2,new this.modelClass(r,!0)]}}))}))}()];case 1:return[4,(r=o.sent()).loadDocumentModels(e,t)];case 2:return o.sent(),[2,ie.tap(r,(function(t){return t._sourceDocumentUrl=e}))]}}))}))},t.prototype.createManyFromEngineDocuments=function(e){return Te(this,void 0,void 0,(function(){var t,n,r,i=this;return Ae(this,(function(o){switch(o.label){case 0:return t=Pe(this.modelClass.rdfsClasses),n=function(e){return!t.some((function(t){return!e.isType(t)}))},[4,Promise.all(Object.entries(e).map((function(e){var t=Ne(e,2),r=t[0],o=t[1];return Te(i,void 0,void 0,(function(){var e,t=this;return Ae(this,(function(i){switch(i.label){case 0:return[4,J.parseJsonLD(o)];case 1:return e=i.sent(),[2,Promise.all(e.resources.filter(n).map((function(e){return Te(t,void 0,void 0,(function(){return Ae(this,(function(t){return[2,this.createFromEngineDocument(r,o,e.url)]}))}))})))]}}))}))})))];case 1:return r=o.sent(),[2,O.flatten(r)]}}))}))},t.prototype.loadDocumentModels=function(e,t){return Te(this,void 0,void 0,(function(){var n;return Ae(this,(function(r){switch(r.label){case 0:return n=Object.values(this._relations).filter((function(e){return e instanceof ke||e instanceof X})),[4,Promise.all(n.map((function(n){return n.__loadDocumentModels(e,t)})))];case 1:return r.sent(),[2]}}))}))},t.prototype.syncDirty=function(){return Te(this,void 0,void 0,(function(){var e,t,n,r,i,a,s=this;return Ae(this,(function(u){switch(u.label){case 0:return e=o.a.requireEngine(),t=this.getSerializedPrimaryKey(),n=this.getDocumentUrl(),r=function(){return e.create(s.modelClass.collection,s.toEngineDocument(),n||void 0)},i=function(){return e.update(s.modelClass.collection,n,{"@graph":{$push:s.serializeToJsonLD(!1)}})},a=function(){return e.update(s.modelClass.collection,n,s.getDirtyEngineDocumentUpdates())},[4,function(){return s._documentExists?s._exists?a():i():r()}()];case 1:return u.sent(),[2,t]}}))}))},t.prototype.cleanDirty=function(){var t,n,r;e.prototype.cleanDirty.call(this),this.getDirtyDocumentModels().map((function(e){return e.cleanDirty()})),this._documentExists=!0;var i=Object.values(this._relations).filter((function(e){return e instanceof ke&&e.useSameDocument}));try{for(var o=je(i),a=o.next();!a.done;a=o.next()){var s=a.value;s.__modelsInSameDocument=s.__modelsInSameDocument||[],(r=s.__modelsInSameDocument).push.apply(r,Pe(s.__newModels)),s.__newModels=[]}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},t.prototype.deleteModelsFromEngine=function(e){return Te(this,void 0,void 0,(function(){return Ae(this,(function(t){switch(t.label){case 0:return[4,this.deleteModels(e)];case 1:return t.sent(),[2]}}))}))},t.prototype.hasMany=function(e,t,n){return new ke(this,e,t,n)},t.prototype.belongsToMany=function(e,t,n){return new X(this,e,t,n)},t.prototype.isContainedBy=function(e){return new Ce(this,e)},t.prototype.getDefaultRdfContext=function(){return Object.values(this.modelClass.rdfContexts).shift()||""},t.prototype.toEngineDocument=function(){return{"@graph":Pe([this.serializeToJsonLD(!1)],this.prepareDirtyDocumentModels().map((function(e){return e.serializeToJsonLD(!1)})))}},t.prototype.getDirtyEngineDocumentUpdates=function(){var t=[];if(t.push.apply(t,Pe(this.prepareDirtyDocumentModels().map((function(e){return{$push:e.serializeToJsonLD(!1)}})))),e.prototype.isDirty.call(this)){var n=e.prototype.getDirtyEngineDocumentUpdates.call(this);t.push({$updateItems:{$where:{"@id":this.url},$update:this.convertEngineUpdatesToJsonLD(n)}})}return 1===t.length?{"@graph":t[0]}:{"@graph":{$apply:t}}},t.prototype.parseEngineDocumentAttributes=function(e,t,n){return void 0===n&&(n=null),Te(this,void 0,void 0,(function(){var r;return Ae(this,(function(i){return n=n||e,r=t["@graph"].find((function(e){return e["@id"]===n})),[2,this.convertJsonLDToAttributes(r)]}))}))},t.prototype.castAttribute=function(t,n){return n&&n.type===i.FieldType.Array&&!Array.isArray(t)?[t]:e.prototype.castAttribute.call(this,t,n)},t.prototype.newUrl=function(e,t){return(e=null!=e?e:p.resolve(this.modelClass.collection,q.generate()))+"#"+(null!=t?t:this.modelClass.defaultResourceHash)},t.prototype.newUniqueUrl=function(e){return(e=null!=e?e:this.newUrl())+"-"+q.generate()},t.prototype.guessCollection=function(){if(this.url)return p.parentDirectory(this.url)},t.prototype.getDirtyDocumentModels=function(){var e=this,t=this.getDocumentUrl();return O.flatten(Object.values(this._relations).filter((function(e){return e.loaded&&e instanceof ke&&e.useSameDocument})).map((function(n){var r,i,o=Pe(n.__newModels),a=function(e){if(!e.isDirty()||e.getDocumentUrl()!==t||o.some((function(t){return t===e})))return"continue";o.push(e)};try{for(var s=je(n.getLoadedModels()),u=s.next();!u.done;u=s.next())a(u.value)}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o.forEach((function(t){return t.setAttribute(n.foreignKeyName,e.url)})),o})))},t.prototype.prepareDirtyDocumentModels=function(){var e=this,t=this.getDirtyDocumentModels();if(0===t.length)return[];this.url||this.mintUrl();var n=this.getDocumentUrl();return t.forEach((function(t){return!t.url&&t.mintUrl(n,e._documentExists,q.generate())})),t},t.primaryKey="url",t.rdfContexts={},t.rdfsClasses=[],t.defaultResourceHash="it",t.mintsUrls=!0,t}(i.Model);!function(e,t){var n,r,i=t.reduce((function(e,t){return Z(Z({},e),Object.getOwnPropertyDescriptors(t.prototype))}),{});try{for(var o=ee(Object.entries(i)),a=o.next();!a.done;a=o.next()){var s=te(a.value,2),u=s[0],c=s[1];Object.defineProperty(e.prototype,u,c)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(Le,[ue,be]);var Me,Ue=Le,Ve=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ve(t,e),t.timestamps=["updatedAt"],t}(Ue),Be=function(e,t){this.resourceUrl=e,this.newResourceUrl=t,this.type=2},Ge=function(e,t,n){this.resourceUrl=e,this.property=t,this.value=n,this.type=1},Je=function(e){this.property=e,this.type=0},Ke=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){e.RDF="RDF"}(Me||(Me={}));var qe=function(e){function t(t,n,r){var i=e.call(this,"Malformed "+n+" document found at "+t+" - "+r)||this;return i.documentUrl=t,i.documentFormat=n,i.malformationDetails=r,i}return Ke(t,e),t}(i.SoukaiError),He=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),We=function(e){function t(t,n){var r=e.call(this,t+" ("+n.message+")")||this;return r.original=n,r}return He(t,e),t}(i.SoukaiError),ze=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$e=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Ye=new(function(){function e(){}return e.prototype.createMap=function(e,t){var n,r,i={};try{for(var o=ze(e),a=o.next();!a.done;a=o.next()){var s=a.value;i[s[t]]=s}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},e.prototype.deepEquals=function(e,t){if(e===t)return!0;var n=s(e);if(n!==s(t))return!1;if("object"!==n||null===e||null===t)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!this.deepEquals(e[r],t[r]))return!1;return!0},e.prototype.withoutEmpty=function(e){var t,n,r={};try{for(var i=ze(Object.entries(e)),o=i.next();!o.done;o=i.next()){var a=$e(o.value,2),s=a[0],u=a[1];null!=u&&(r[s]=u)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e}()),Qe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Xe=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ze=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},et=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ze(arguments[t]));return e},tt=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},nt=[G("ldp:contains"),G("posix:mtime"),G("posix:size"),G("purl:modified")],rt=[G("ldp:Container"),G("ldp:BasicContainer")],it=function(){function e(e){var t=this;this.fetch=function(n,r){return Qe(t,void 0,void 0,(function(){var t,i;return Xe(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,e(n,r)];case 1:return[2,o.sent()];case 2:throw t=o.sent(),i="object"==s(n)?n.url:n,new We("Error fetching "+i,t);case 3:return[2]}}))}))}}return e.prototype.createDocument=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=[]),Qe(this,void 0,void 0,(function(){var r;return Xe(this,(function(i){return r=G("ldp:Container"),[2,n.some((function(e){return e.resourceUrl===t&&0===e.type&&e.value===r}))?this.createContainerDocument(e,t,n):this.createNonContainerDocument(e,t,n)]}))}))},e.prototype.getDocument=function(e){return Qe(this,void 0,void 0,(function(){var t,n,r;return Xe(this,(function(i){switch(i.label){case 0:return[4,this.fetch(e,{headers:{Accept:"text/turtle"}})];case 1:return 200!==(t=i.sent()).status?[2,null]:[4,t.text()];case 2:n=i.sent(),i.label=3;case 3:return i.trys.push([3,5,,6]),[4,J.parseTurtle(n,{headers:t.headers,baseUrl:e})];case 4:return[2,i.sent()];case 5:throw r=i.sent(),new qe(e,Me.RDF,r.message);case 6:return[2]}}))}))},e.prototype.getDocuments=function(e,t){return void 0===t&&(t=!1),Qe(this,void 0,void 0,(function(){var n,r;return Xe(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),t?[4,this.getContainerDocuments(e)]:[3,2];case 1:return n=i.sent(),[3,4];case 2:return[4,this.getNonContainerDocumentsUsingGlobbing(e)];case 3:n=i.sent(),i.label=4;case 4:return[2,n];case 5:if((r=i.sent())instanceof B)throw new qe(e,Me.RDF,r.message);return a.error(r),[2,[]];case 6:return[2]}}))}))},e.prototype.updateDocument=function(e,t){var n;return Qe(this,void 0,void 0,(function(){var r;return Xe(this,(function(o){switch(o.label){case 0:return 0===t.length?[2]:[4,this.getDocument(e)];case 1:if(null===(r=o.sent()))throw new i.DocumentNotFound(e);return this.processChangeUrlOperations(r,t),this.processUpdatePropertyOperations(r,t),(null===(n=r.resource(e))||void 0===n?void 0:n.isType(G("ldp:Container")))?[4,this.updateContainerDocument(r,t)]:[3,3];case 2:return o.sent(),[3,5];case 3:return[4,this.updateNonContainerDocument(r,t)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))},e.prototype.deleteDocument=function(e){var t;return Qe(this,void 0,void 0,(function(){var n,r,i,o=this;return Xe(this,(function(a){switch(a.label){case 0:return[4,this.getDocument(e)];case 1:return null===(n=a.sent())?[2]:(null===(t=n.resource(e))||void 0===t?void 0:t.isType(G("ldp:Container")))?[4,Promise.all([this.getDocuments(e,!0),this.getDocuments(e)])]:[3,4];case 2:return r=a.sent(),[4,Promise.all(O.flatten(r).map((function(e){return o.deleteDocument(e.url)})))];case 3:a.sent(),a.label=4;case 4:return[4,this.fetch(e,{method:"DELETE"})];case 5:return i=a.sent(),this.assertSuccessfulResponse(i,"Error deleting document at "+e),[2]}}))}))},e.prototype.documentExists=function(e){return Qe(this,void 0,void 0,(function(){var t;return Xe(this,(function(n){switch(n.label){case 0:return[4,this.fetch(e,{headers:{Accept:"text/turtle"}})];case 1:return 200!==(t=n.sent()).status?[3,3]:[4,t.text()];case 2:return[2,n.sent().length>0];case 3:if(404===t.status)return[2,!1];throw new i.SoukaiError("Couldn't determine if document at "+e+" exists, got "+t.status+" response");case 4:return[2]}}))}))},e.prototype.createContainerDocument=function(e,t,n){return Qe(this,void 0,void 0,(function(){var r,o;return Xe(this,(function(a){switch(a.label){case 0:if(t&&!t.startsWith(e))throw new i.SoukaiError("Explicit document url should start with the parent url");if(t&&!t.endsWith("/"))throw new i.SoukaiError("Container urls must end with a trailing slash, given "+t);return r=t?"at "+t:"under "+e,[4,this.fetch(e,{method:"POST",headers:Ye.withoutEmpty({"Content-Type":"text/turtle",Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',Slug:t?p.directoryName(t):null}),body:x.toTurtle(this.withoutReservedContainerProperties(t,n),t)})];case 1:return o=a.sent(),this.assertSuccessfulResponse(o,"Error creating container "+r),[2,t||p.resolve(e,o.headers.get("Location")||"")]}}))}))},e.prototype.createNonContainerDocument=function(e,t,n){return Qe(this,void 0,void 0,(function(){var r,o;return Xe(this,(function(a){switch(a.label){case 0:return t?[3,2]:[4,this.fetch(e,{headers:{"Content-Type":"text/turtle"},method:"POST",body:x.toTurtle(n,t)})];case 1:return r=a.sent(),this.assertSuccessfulResponse(r,"Error creating document under "+e),[2,p.resolve(e,r.headers.get("Location")||"")];case 2:if(!t.startsWith(e))throw new i.SoukaiError("A minted document url should start with the parent url");return[4,this.fetch(t,{method:"PATCH",headers:{"Content-Type":"application/sparql-update","If-None-Match":"*"},body:"INSERT DATA { "+x.toTurtle(n,t)+" }"})];case 3:return o=a.sent(),this.assertSuccessfulResponse(o,"Error creating document at "+t),[2,t]}}))}))},e.prototype.getContainerDocuments=function(e){var t;return Qe(this,void 0,void 0,(function(){var n,r,i,o=this;return Xe(this,(function(a){switch(a.label){case 0:return[4,this.fetch(e,{headers:{Accept:"text/turtle"}})];case 1:return n=a.sent(),this.assertSuccessfulResponse(n,"Error getting container documents from "+e),[4,n.text()];case 2:return r=a.sent(),[4,J.parseTurtle(r,{baseUrl:e})];case 3:return i=a.sent(),[4,Promise.all((null===(t=i.resource(e))||void 0===t?void 0:t.getPropertyValues("ldp:contains").map((function(e){return i.resource(e)})).filter((function(e){return null!==e&&e.isType("ldp:Container")})).map((function(e){return o.getDocument(e.url)})))||[])];case 4:return[2,a.sent()]}}))}))},e.prototype.getNonContainerDocumentsUsingGlobbing=function(e){return Qe(this,void 0,void 0,(function(){var t,n,r,i;return Xe(this,(function(o){switch(o.label){case 0:return[4,this.fetch(e+"*",{headers:{Accept:"text/turtle"}})];case 1:return t=o.sent(),this.assertSuccessfulResponse(t,"Error getting container documents using globbing from "+e),[4,t.text()];case 2:return n=o.sent(),[4,J.parseTurtle(n,{baseUrl:e})];case 3:return r=o.sent(),i=r.statements.reduce((function(e,t){var n=p.clean(t.subject.value,{fragment:!1});return n in e||(e[n]=[]),e[n].push(t),e}),{}),[2,Object.entries(i).map((function(e){var t=Ze(e,2),n=t[0],r=t[1];return new A(n,r)}))]}}))}))},e.prototype.updateContainerDocument=function(e,t){return Qe(this,void 0,void 0,(function(){var n,r;return Xe(this,(function(i){switch(i.label){case 0:return n=function(t){return new Ge(e.url,t)},r=function(t){return new Ge(e.url,G("rdf:type"),t)},t.push.apply(t,et(nt.map(n))),t.push.apply(t,et(rt.map(r))),[4,this.updateNonContainerDocument(e.clone(e.metadata.describedBy||e.url+".meta"),t)];case 1:return i.sent(),[2]}}))}))},e.prototype.updateNonContainerDocument=function(e,t){return Qe(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Xe(this,(function(u){switch(u.label){case 0:return n=Ze(function(e){return e.reduce((function(e,t){switch(t.type){case 0:e[0].push(t.property);break;case 1:e[1].push(O.filter([t.resourceUrl,t.property,t.value]))}return e}),[[],[]])}(t),2),r=n[0],i=n[1],o=x.toTurtle(r,e.url),a=x.toTurtle(e.properties.filter((function(e){return i.some((function(t){var n=Ze(t,3),r=n[0],i=n[1],o=n[2];return!(r!==e.resourceUrl||i&&i!==e.name||o&&o!==e.value)}))})),e.url),[4,this.fetch(e.url,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:O.filter([a.length>0&&"DELETE DATA { "+a+" }",o.length>0&&"INSERT DATA { "+o+" }"]).join(" ; ")})];case 1:return s=u.sent(),this.assertSuccessfulResponse(s,"Error updating document at "+e.url),[2]}}))}))},e.prototype.withoutReservedContainerProperties=function(e,t){return t.filter((function(t){return t.resourceUrl!==e||!function(e){return O.contains(nt,e.name)}(t)&&!function(e){return 0===e.type&&O.contains(rt,e.value)}(t)}))},e.prototype.processChangeUrlOperations=function(e,t){var n,r,i=function(e){var t;return e.reduce((function(e,t){return e[t.type].push(t),e}),((t={})[0]=[],t[1]=[],t[2]=[],t))}(t),o=function(n){var r=e.resource(n.resourceUrl);if(!r)return"continue";var o=i[0].filter((function(e){return e.property.resourceUrl===n.resourceUrl})),a=i[1].filter((function(e){return e.resourceUrl===n.resourceUrl}));o.forEach((function(e){return e.property=e.property.clone(n.newResourceUrl)})),a.forEach((function(e){return e.resourceUrl=n.newResourceUrl})),t.push(new Ge(n.resourceUrl)),t.push.apply(t,et(r.properties.filter((function(e){return!o.some((function(t){return t.property.name===e.name}))&&!a.some((function(t){return!t.property||t.property===e.name}))})).map((function(e){return new Je(e.clone(n.newResourceUrl))})))),O.removeItem(t,n)};try{for(var a=tt(i[2]),s=a.next();!s.done;s=a.next())o(s.value)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},e.prototype.processUpdatePropertyOperations=function(e,t){var n,r,i=t.filter((function(t){return 0===t.type&&0!==t.property.type&&e.hasProperty(t.property.resourceUrl,t.property.name)}));try{for(var o=tt(i),a=o.next();!a.done;a=o.next()){var s=a.value.property;t.push(new Ge(s.resourceUrl,s.name))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.assertSuccessfulResponse=function(e,t){if(2!==Math.floor(e.status/100))throw new i.SoukaiError(t+", returned "+e.status+" status code")},e}(),ot=function(){return(ot=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},at=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},st=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ut=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},ct=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ut(arguments[t]));return e},lt=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ft=function(){function e(e,t){void 0===t&&(t={}),this.listeners=[],this.helper=new i.EngineHelper,this.client=new it(e),this.config=ot({globbingBatchSize:5},t)}return e.prototype.create=function(e,t,n){return at(this,void 0,void 0,(function(){var r,o;return st(this,(function(a){switch(a.label){case 0:return this.validateJsonLDGraph(t),(r=n)?[4,this.client.documentExists(n)]:[3,2];case 1:r=a.sent(),a.label=2;case 2:if(r)throw new i.DocumentAlreadyExists(n);return[4,this.getJsonLDGraphProperties(t)];case 3:return o=a.sent(),[4,this.client.createDocument(e,n,o)];case 4:return[2,a.sent()]}}))}))},e.prototype.readOne=function(e,t){return at(this,void 0,void 0,(function(){var e,n;return st(this,(function(r){switch(r.label){case 0:return[4,this.client.getDocument(t)];case 1:if(null===(e=r.sent()))throw new i.DocumentNotFound(t);return n=this.convertToEngineDocument(e),this.emit("onRDFDocumentLoaded",e.url,e.metadata),[2,n]}}))}))},e.prototype.readMany=function(e,t){return void 0===t&&(t={}),at(this,void 0,void 0,(function(){var n,r,i=this;return st(this,(function(o){switch(o.label){case 0:return[4,this.getDocumentsForFilters(e,t)];case 1:return n=o.sent(),r=n.reduce((function(e,t){return e[t.url]=i.convertToEngineDocument(t),i.emit("onRDFDocumentLoaded",t.url,t.metadata),e}),{}),[2,this.helper.filterDocuments(r,t)]}}))}))},e.prototype.update=function(e,t,n){return at(this,void 0,void 0,(function(){var e;return st(this,(function(r){switch(r.label){case 0:return[4,this.extractJsonLDGraphUpdate(n)];case 1:return e=r.sent(),[4,this.client.updateDocument(t,e)];case 2:return r.sent(),[2]}}))}))},e.prototype.delete=function(e,t){return at(this,void 0,void 0,(function(){return st(this,(function(e){switch(e.label){case 0:return[4,this.client.deleteDocument(t)];case 1:return e.sent(),[2]}}))}))},e.prototype.addListener=function(e){this.listeners.push(e)},e.prototype.removeListener=function(e){var t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.listeners.forEach((function(n){var r;return null===(r=n[e])||void 0===r?void 0:r.call.apply(r,ct([n],t))}))},e.prototype.getDocumentsForFilters=function(e,t){return at(this,void 0,void 0,(function(){var n,r;return st(this,(function(i){switch(i.label){case 0:return n=this.extractJsonLDGraphTypes(t),t.$in?[4,this.getDocumentsFromUrls(t.$in,n)]:[3,2];case 1:return r=i.sent(),[3,4];case 2:return[4,this.getContainerDocuments(e,n)];case 3:r=i.sent(),i.label=4;case 4:return[2,r]}}))}))},e.prototype.getDocumentsFromUrls=function(e,t){return at(this,void 0,void 0,(function(){var n,r,i,o=this;return st(this,(function(a){switch(a.label){case 0:return n=e.reduce((function(e,t){var n,r=p.parentDirectory(t);return ot(ot({},e),((n={})[r]=ct(e[r]||[],[t]),n))}),{}),r=Object.entries(n).map((function(e){var n=ut(e,2),r=n[0],i=n[1];return at(o,void 0,void 0,(function(){var e,n=this;return st(this,(function(o){switch(o.label){case 0:return null!==this.config.globbingBatchSize&&i.length>=this.config.globbingBatchSize?[2,this.getContainerDocuments(r,t)]:(e=i.map((function(e){return n.client.getDocument(e)})),[4,Promise.all(e)]);case 1:return[2,o.sent().filter((function(e){return null!=e}))]}}))}))})),[4,Promise.all(r)];case 1:return i=a.sent(),[2,O.flatten(i)]}}))}))},e.prototype.getContainerDocuments=function(e,t){return at(this,void 0,void 0,(function(){return st(this,(function(n){switch(n.label){case 0:return[4,this.client.getDocuments(e,-1!==t.indexOf(G("ldp:Container")))];case 1:return[2,n.sent()]}}))}))},e.prototype.convertToEngineDocument=function(e){return{"@graph":e.resources.map((function(e){var t,n,r={},i=function(e,t){var n=ut(t),i=n[0],o=n.slice(1),a=e,s=function(e){return e};switch(i.type){case 0:a="@type";break;case 1:s=function(e){return{"@id":e}};break;case 2:s=function(e){return e instanceof Date?{"@type":"http://www.w3.org/2001/XMLSchema#dateTime","@value":e.toISOString()}:e}}r[a]=0===o.length?s(i.value):ct([i],o).map((function(e){return s(e.value)}))};try{for(var o=lt(Object.entries(e.propertiesIndex)),a=o.next();!a.done;a=o.next()){var s=ut(a.value,2);i(s[0],s[1])}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r["@id"]=e.url,r}))}},e.prototype.validateJsonLDGraph=function(e){if(!Array.isArray(e["@graph"]))throw new i.SoukaiError("Invalid JSON-LD graph provided for SolidEngine. Are you using a model that isn't a SolidModel?")},e.prototype.extractJsonLDGraphUpdate=function(e){return at(this,void 0,void 0,(function(){var t,n,r=this;return st(this,(function(o){switch(o.label){case 0:if(!this.isJsonLDGraphUpdate(e))throw new i.SoukaiError("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");return t=[],e["@graph"].$updateItems&&t.push.apply(t,ct(O.flatten(O.create(e["@graph"].$updateItems).map((function(e){return r.extractJsonLDGraphItemsUpdate(e)}))))),e["@graph"].$push?[4,this.extractJsonLDGraphItemPush(e["@graph"].$push)]:[3,2];case 1:n=o.sent(),t.push.apply(t,ct(n)),o.label=2;case 2:return[2,t]}}))}))},e.prototype.extractJsonLDGraphItemsUpdate=function(e){var t,n,r=e.$where,o=e.$update,a=e.$unset;if(!r||!("@id"in r))throw new i.SoukaiError("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");if(a)return r["@id"].$in.map((function(e){return new Ge(e)}));var u=r["@id"],c=o,l=[];try{for(var f=lt(Object.entries(c)),h=f.next();!h.done;h=f.next()){var d=ut(h.value,2),p=d[0],y=d[1];if(null===y)throw new i.SoukaiError("SolidEngine doesn't support setting properties to null, delete");"object"==s(y)&&"$unset"in y?l.push(new Ge(u,p)):"object"==s(y)&&"@id"in y?l.push(new Je(x.reference(u,p,y["@id"]))):"object"==s(y)&&"@type"in y&&"http://www.w3.org/2001/XMLSchema#dateTime"===y["@type"]?l.push(new Je(x.literal(u,p,new Date(y["@value"])))):"@id"!==p?"@type"!==p?l.push(new Je(x.literal(u,p,y))):l.push(new Je(x.type(u,y))):l.push(new Be(u,y))}}catch(e){t={error:e}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}return l},e.prototype.extractJsonLDGraphItemPush=function(e){return at(this,void 0,void 0,(function(){return st(this,(function(t){switch(t.label){case 0:return[4,this.getJsonLDGraphProperties(e)];case 1:return[2,t.sent().map((function(e){return new Je(e)}))]}}))}))},e.prototype.extractJsonLDGraphTypes=function(e){if(!this.isJsonLDGraphTypesFilter(e))return[];var t=e["@graph"].$contains["@type"].$or.reduce((function(e,t){return"$contains"in t&&e.push.apply(e,ct(t.$contains)),"$eq"in t&&e.push(t.$eq),e}),[]);return O.unique(t.filter((function(e){return e.startsWith("http")})))},e.prototype.getJsonLDGraphProperties=function(e){return at(this,void 0,void 0,(function(){return st(this,(function(t){switch(t.label){case 0:return[4,J.parseJsonLD(e)];case 1:return[2,t.sent().properties]}}))}))},e.prototype.isJsonLDGraphUpdate=function(e){return"object"==s(e["@graph"])&&("object"==s(e["@graph"].$updateItems)||"object"==s(e["@graph"].$push))},e.prototype.isJsonLDGraphTypesFilter=function(e){return"object"==s(e["@graph"])&&"object"==s(e["@graph"].$contains)&&"object"==s(e["@graph"].$contains["@type"])&&Array.isArray(e["@graph"].$contains["@type"].$or)},e}(),ht=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},pt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},yt=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},vt=function(e){function t(t){return e.call(this,t,Fe,"resourceUrls")||this}return ht(t,e),Object.defineProperty(t.prototype,"container",{get:function(){return this.parent},enumerable:!0,configurable:!0}),t.prototype.resolve=function(){return dt(this,void 0,void 0,(function(){var t,n=this;return pt(this,(function(r){switch(r.label){case 0:return o.a.engine instanceof ft?[2,e.prototype.resolve.call(this)]:[4,o.a.engine.readMany(this.container.getDocumentUrl())];case 1:return t=r.sent(),this.related=Object.entries(t).map((function(e){var t=yt(e,2),r=t[0],i=t[1];return new Fe({url:r,updatedAt:n.getLatestUpdateDate(i["@graph"])})})),[2,this.related]}}))}))},t.prototype.getLatestUpdateDate=function(e){var t=e.reduce((function(e,t){var n,r,i,o,a=(null!==(o=null!==(i=null!==(r=null!==(n=t["purl:modified"])&&void 0!==n?n:t["http://purl.org/dc/terms/modified"])&&void 0!==r?r:t["purl:created"])&&void 0!==i?i:t["http://purl.org/dc/terms/created"])&&void 0!==o?o:{"@value":0})["@value"],s=new Date(a).getTime();return Math.max(e,s)}),0);return new Date(t)},t}(X),bt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},mt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},wt=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},xt=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(wt(arguments[t]));return e},_t=function(e){function t(t,n){return e.call(this,t,n,"resourceUrls","url")||this}return bt(t,e),t.prototype.resolve=function(){return gt(this,void 0,void 0,(function(){var e;return mt(this,(function(t){switch(t.label){case 0:return e=this,[4,this.relatedClass.from(this.parent.url).all({$in:this.parent.resourceUrls})];case 1:return e.related=t.sent(),[2,this.related]}}))}))},t.prototype.create=function(e){return void 0===e&&(e={}),gt(this,void 0,void 0,(function(){var t;return mt(this,(function(n){switch(n.label){case 0:return t=this.relatedClass.newInstance(e),[4,this.save(t)];case 1:return n.sent(),[2,t]}}))}))},t.prototype.save=function(e){return gt(this,void 0,void 0,(function(){return mt(this,(function(t){switch(t.label){case 0:if(!this.parent.exists())throw new i.SoukaiError("Cannot save a model because the container doesn't exist");return[4,e.save(this.parent.url)];case 1:return t.sent(),o.a.engine instanceof ft?[3,3]:[4,this.parent.update({resourceUrls:xt(this.parent.resourceUrls,[e.getDocumentUrl()])})];case 2:t.sent(),t.label=3;case 3:return this.loaded&&this.related.push(e),[2]}}))}))},t}(i.BelongsToManyRelation),Et=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},St=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Et(t,e),t.boot=function(t){e.boot.call(this,t),this.rdfsClasses.add(G("ldp:Container")),this.fields.resourceUrls={type:i.FieldType.Array,required:!1,rdfProperty:"http://www.w3.org/ns/ldp#contains",items:{type:i.FieldType.Key}},Fe.boot("SolidDocument")},t.prototype.documentsRelationship=function(){return new vt(this)},t.prototype.save=function(t){return kt(this,void 0,void 0,(function(){return St(this,(function(n){switch(n.label){case 0:return[4,e.prototype.save.call(this,t)];case 1:return n.sent(),this.wasRecentlyCreated()&&!this.isRelationLoaded("documents")&&this.setRelationModels("documents",[]),[2,this]}}))}))},t.prototype.contains=function(e){return new _t(this,e)},t.prototype.newUrl=function(){var e=this.hasAttribute("name")?K.slug(this.getAttribute("name")):q.generate();return p.resolveDirectory(this.modelClass.collection,e)},t.prototype.newUniqueUrl=function(e){e=null!=e?e:this.newUrl();var t=q.generate(),n=p.directoryName(e);return p.resolveDirectory(p.parentDirectory(e),n+"-"+t)},t}(Ue),Ot=new(function(){function e(){}return e.prototype.loadSolidModels=function(){o.a.loadModels({SolidDocument:Fe})},e}());t.default=Ot}])}))},67696:function(e,t,n){e=n.nmd(e);var r,i,o,a=n(50476),s=n(1834)["default"],u=n(13861)["default"],c=n(17964)["default"];n(78975),n(68309),n(21703),n(41539),n(82526),n(41817),n(32165),n(78783),n(33948),n(47941),n(84944),n(33792),n(92222),n(70189),n(54747),n(21249),n(57327),n(69600),n(74916),n(23123),n(69826),n(26833),n(36210),n(30489),n(27852),n(69720),n(74819),n(81299),n(23157),n(83593),n(52586),n(39714),n(15306),n(47042),n(4129),n(26699),n(32023),n(2707),n(87714),n(82801),n(1174),n(51532),n(38862),n(4723),function(n,a){"object"==c(t)&&"object"==c(e)?e.exports=a():(i=[],r=a,o="function"===typeof r?r.apply(t,i):r,void 0===o||(e.exports=o))}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r,i=(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return r.name=n.name,Object.setPrototypeOf(r,n.prototype),r}return i(t,e),t}(Error),l=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},f=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},h=new(function(){function e(){this._bootedModels={}}return e.prototype.useEngine=function(e){this._engine=e},e.prototype.model=function(e){return this._bootedModels[e]},e.prototype.loadModel=function(e,t){e in t||(t.boot(e),this._bootedModels[e]=t)},e.prototype.loadModels=function(e){for(var t in e)e.hasOwnProperty(t)&&this.loadModel(t,e[t])},e.prototype.requireEngine=function(){if(!this._engine)throw new o("Engine must be initialized before performing any operations. Learn more at https://soukai.js.org/guide/engines.html");return this._engine},e.prototype.closeConnections=function(){return l(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return this._engine&&"closeConnections"in this._engine?[4,this._engine.closeConnections()]:[2];case 1:return e.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),e}()),d=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(e){function t(t,n){var r=e.call(this,"Model "+t+": "+n+". Learn more at https://soukai.js.org/guide/defining-models.html")||this;return r.modelName=t,r}return d(t,e),t}(o),y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};function v(e){for(var t in e=y({},e))e.hasOwnProperty(t)&&null!==e[t]&&"object"==c(e[t])&&e[t].constructor===Object&&(e[t]=v(e[t]));return e}function b(e,t){if(e===t)return!0;var n=c(e);if(n!==c(t))return!1;if("object"!==n||null===e||null===t)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!b(e[r],t[r]))return!1;return!0}function g(e){return"object"==c(e)&&null!==e&&!Array.isArray(e)}var m={deepClone:v,deepEquals:b,isObject:g},w=new(function(){function e(){}return e.prototype.contains=function(e,t){return-1!==e.indexOf(t)},e.prototype.flatten=function(e){return"flat"in e?e.flat():[].concat.apply([],e)},e.prototype.unique=function(e){var t=new Set(e),n=[];return t.forEach((function(e){return n.push(e)})),n},e.prototype.withoutIndexes=function(e,t){var n=this;return e.map((function(e,t){return[e,t]})).filter((function(e){e[0];var r=e[1];return!n.contains(t,r)})).map((function(e){return e[0]}))},e}());function x(e){return e.split(/_|\s/).map((function(e){return e.length>0?e.substr(0,1).toUpperCase()+e.substr(1):e})).join("")}function _(e){return e.split(/_|\s|(?=[A-Z])/).map((function(e,t){return 0===e.length?e:0===t?e.toLowerCase():e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()})).join("")}var E,k=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},S=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},R=function(){function e(e,t,n,r){this.related=null,this.deleteStrategy=null,this.parent=e,this.relatedClass=t,this.foreignKeyName=n,this.localKeyName=r||t.primaryKey}return Object.defineProperty(e.prototype,"loaded",{get:function(){return null!==this.related},enumerable:!0,configurable:!0}),e.prototype.getModels=function(){return k(this,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:return this.loaded?[3,2]:[4,this.resolve()];case 1:e.sent(),e.label=2;case 2:return[2,this.getLoadedModels()]}}))}))},e.prototype.getLoadedModels=function(){return Array.isArray(this.related)?this.related:this.related?[this.related]:[]},e.prototype.unload=function(){this.related=null},e.prototype.onDelete=function(e){return this.deleteStrategy=e,this},e}(),O=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),C=function(e){function t(t,n,r,i){return e.call(this,t,n,r||_(n.name+"_"+n.primaryKey+"s"),i)||this}return O(t,e),t}(R),I=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),D=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},T=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return I(t,e),t.prototype.resolve=function(){return D(this,void 0,void 0,(function(){var e,t,n,r;return T(this,(function(i){switch(i.label){case 0:return e=this.parent.getAttribute(this.foreignKeyName),t=this,this.localKeyName!==this.relatedClass.primaryKey?[3,2]:[4,this.relatedClass.all({$in:e})];case 1:return n=i.sent(),[3,4];case 2:return[4,this.relatedClass.all((r={},r[this.localKeyName]={$or:e.map((function(e){return{$eq:e}})).concat(e.map((function(e){return{$contains:e}})))},r))];case 3:n=i.sent(),i.label=4;case 4:return t.related=n,[2,this.related]}}))}))},t}(C),N=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=function(e){function t(t,n,r,i){return e.call(this,t,n,r||_(n.name+"_"+n.primaryKey),i)||this}return N(t,e),t}(R),j=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),L=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},M=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return j(t,e),t.prototype.resolve=function(){return L(this,void 0,void 0,(function(){var e,t,n,r;return M(this,(function(i){switch(i.label){case 0:return e=this.parent.getAttribute(this.foreignKeyName),t=this,this.localKeyName!==this.relatedClass.primaryKey?[3,2]:[4,this.relatedClass.find(e)];case 1:return n=i.sent(),[3,4];case 2:return[4,this.relatedClass.first((r={},r[this.localKeyName]=e,r))];case 3:n=i.sent(),i.label=4;case 4:return t.related=n,[2,this.related]}}))}))},t}(P),V=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),F=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},B=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return V(t,e),t.prototype.resolve=function(){return F(this,void 0,void 0,(function(){var e,t,n;return B(this,(function(r){switch(r.label){case 0:return e=this.parent.getAttribute(this.localKeyName),t=this,[4,this.relatedClass.all((n={},n[this.foreignKeyName]={$or:[{$eq:e},{$contains:e}]},n))];case 1:return t.related=r.sent(),[2,this.related]}}))}))},t}(C),J=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},q=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return J(t,e),t.prototype.resolve=function(){return K(this,void 0,void 0,(function(){var e,t,n;return q(this,(function(r){switch(r.label){case 0:return e=this.parent.getAttribute(this.localKeyName),t=this,[4,this.relatedClass.first((n={},n[this.foreignKeyName]={$or:[{$eq:e},{$contains:e}]},n))];case 1:return t.related=r.sent(),[2,this.related]}}))}))},t}(P),W=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},z=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},$=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};!function(e){e.Number="number",e.String="string",e.Boolean="boolean",e.Array="array",e.Object="object",e.Date="date",e.Key="key"}(E||(E={}));var Y=Object.values(E),Q=["createdAt","updatedAt"],X=function(){function e(e,t){if(void 0===e&&(e={}),void 0===t&&(t=!1),!("__pureInstance"in e))return this.modelClass.ensureBooted(),this.initialize(e,t),this._proxy}return Object.defineProperty(e,"instance",{get:function(){return new this},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureInstance",{get:function(){return new this({__pureInstance:!0})},enumerable:!0,configurable:!0}),e.boot=function(t){var n=this,r={};if(void 0===n.collection)n.collection=t.toLowerCase()+"s";else if("string"!=typeof n.collection)throw new p(t,"Collection name not defined or invalid format");if("boolean"==typeof n.timestamps||void 0===n.timestamps)if(void 0===n.timestamps||n.timestamps){for(var i=0,o=Q;i<o.length;i++)r[u=o[i]]={type:E.Date,required:!1};n.timestamps=Q}else n.timestamps=[];else{if(!Array.isArray(n.timestamps))throw new p(t,"Invalid timestamps definition");for(var a=0,s=n.timestamps;a<s.length;a++){var u=s[a];if(-1===Q.indexOf(u))throw new p(t,"Invalid timestamp field defined ("+u+")");r[u]={type:E.Date,required:!1}}}if(void 0!==n.fields)for(var u in n.fields)if(n.fields.hasOwnProperty(u)&&(r[u]=Z(t,u,n.fields[u]),-1!==n.timestamps.indexOf(u)&&(r[u].type!==E.Date||r[u].required)))throw new p(t,"Field "+u+" definition must be type date and not required because it is used an automatic timestamp. Learn more at https://soukai.js.org/guide/defining-models.html#automatic-timestamps");n.primaryKey in r||(r[n.primaryKey]={type:E.Key,required:!1});for(var c=Object.getOwnPropertyNames(n.pureInstance),l=[],f=Object.getPrototypeOf(n.pureInstance);f!==e.prototype;){c.push.apply(c,f.constructor.classFields);for(var h=0,d=Object.getOwnPropertyNames(f);h<d.length;h++){var y=d[h];y.endsWith("Relationship")&&"function"==typeof n.pureInstance[y]&&l.push(y.substring(0,y.length-12))}f=Object.getPrototypeOf(f)}n.classFields=w.unique(c),n.relations=w.unique(l),n.fields=r,n.modelName=t},e.create=function(e){return void 0===e&&(e={}),new this(e).save()},e.createFromEngineDocument=function(e,t){return this.instance.createFromEngineDocument(e,t)},e.createManyFromEngineDocuments=function(e){return this.instance.createManyFromEngineDocuments(e)},e.find=function(e){var t=this;return this.ensureBooted(),h.requireEngine().readOne(this.collection,this.instance.serializeKey(e)).then((function(n){return t.createFromEngineDocument(e,n)})).catch((function(){return null}))},e.all=function(e){return z(this,void 0,void 0,(function(){var t;return $(this,(function(n){switch(n.label){case 0:return this.ensureBooted(),[4,h.requireEngine().readMany(this.collection,e)];case 1:return t=n.sent(),[4,this.createManyFromEngineDocuments(t)];case 2:return[2,n.sent()]}}))}))},e.first=function(e){return z(this,void 0,void 0,(function(){return $(this,(function(t){switch(t.label){case 0:return[4,this.all(e)];case 1:return[2,t.sent()[0]||null]}}))}))},e.ensureBooted=function(){if(void 0===this.modelName)throw new o("Model has not been booted (did you forget to call Soukai.loadModel?) Learn more at https://soukai.js.org/guide/defining-models.html")},Object.defineProperty(e.prototype,"modelClass",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.prototype.update=function(e){for(var t in void 0===e&&(e={}),e=this.castAttributes(e,this.modelClass.fields))this.setAttribute(t,e[t]);return this.hasAutomaticTimestamp("updatedAt")&&this.touch(),this.save()},e.prototype.hasRelation=function(e){return-1!==this.modelClass.relations.indexOf(e)},e.prototype.getRelation=function(e){return this._relations[e]||null},e.prototype.loadRelation=function(e){return this.requireRelation(e).resolve()},e.prototype.loadRelationIfUnloaded=function(e){return z(this,void 0,void 0,(function(){return $(this,(function(t){return[2,this.isRelationLoaded(e)?this.getRelationModels(e):this.loadRelation(e)]}))}))},e.prototype.unloadRelation=function(e){this.requireRelation(e).unload()},e.prototype.getRelationModels=function(e){return this.requireRelation(e).related},e.prototype.setRelationModels=function(e,t){this.requireRelation(e).related=t},e.prototype.isRelationLoaded=function(e){return this.requireRelation(e).loaded},e.prototype.hasAttribute=function(e){for(var t=e.split("."),n=re(this._attributes,this.modelClass.fields);t.length>0;)if(void 0===(n=n[t.shift()]))return!1;return!0},e.prototype.setAttribute=function(e,t){t=this.castAttribute(t,this.modelClass.fields[e]),this._attributes[e]=t,delete this._dirtyAttributes[e],m.deepEquals(this._originalAttributes[e],t)||(this._dirtyAttributes[e]=t),this.hasAutomaticTimestamp("updatedAt")&&"updatedAt"!==e&&this.touch()},e.prototype.setAttributes=function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=n[t],i=r[0],o=r[1];this.setAttribute(i,o)}},e.prototype.getAttribute=function(e,t){void 0===t&&(t=!1);for(var n=e.split("."),r=this.getAttributes(t);n.length>0;)if(void 0===(r=r[n.shift()]))return r;return r},e.prototype.getAttributes=function(e){return void 0===e&&(e=!1),e?v(this._attributes):re(this._attributes,this.modelClass.fields)},e.prototype.unsetAttribute=function(e){this._attributes.hasOwnProperty(e)&&(e in this.modelClass.fields?this._attributes[e]=void 0:delete this._attributes[e],void 0!==this._originalAttributes[e]&&(this._dirtyAttributes[e]=void 0),this.hasAutomaticTimestamp("updatedAt")&&this.touch())},e.prototype.isDirty=function(e){return e?e in this._dirtyAttributes:Object.values(this._dirtyAttributes).length>0},e.prototype.getPrimaryKey=function(){return this._attributes[this.modelClass.primaryKey]},e.prototype.getSerializedPrimaryKey=function(){var e=this.getPrimaryKey();return e?this.serializeKey(e):null},e.prototype.delete=function(){return z(this,void 0,void 0,(function(){var e;return $(this,(function(t){switch(t.label){case 0:return this._exists?[4,this.getCascadeModels()]:[2,this];case 1:return e=t.sent(),[4,this.deleteModelsFromEngine(e)];case 2:return t.sent(),e.forEach((function(e){return e.resetEngineData()})),[2,this]}}))}))},e.prototype.save=function(){return z(this,void 0,void 0,(function(){var e,t;return $(this,(function(n){switch(n.label){case 0:return te(this._attributes,this.modelClass.fields),this.isDirty()?(e=this._exists,[4,this.syncDirty()]):[2,this];case 1:return t=n.sent(),this._wasRecentlyCreated=this._wasRecentlyCreated||!e,this._attributes[this.modelClass.primaryKey]=this.parseKey(t),this.cleanDirty(),[2,this]}}))}))},e.prototype.touch=function(){this.setAttribute("updatedAt",new Date)},e.prototype.setExists=function(e){this._exists=e},e.prototype.exists=function(){return this._exists},e.prototype.wasRecentlyCreated=function(){return this._wasRecentlyCreated},e.prototype.initialize=function(e,t){this._exists=t,this._wasRecentlyCreated=!1,this.initializeProxy(),this.initializeAttributes(e,t),this.initializeRelations()},e.prototype.initializeProxy=function(){this._proxy=new Proxy(this,{get:function(e,t,n){if("string"!=typeof t||t in e||-1!==e.modelClass.classFields.indexOf(t))return Reflect.get(e,t,n);var r="get"+x(t)+"Attribute";if("function"==typeof e[r])return e[r]();if(e.hasRelation(t))return e.isRelationLoaded(t)?e.getRelationModels(t):void 0;if(t.startsWith("related")){var i=_(t.substr(7));if(e.hasRelation(i))return e._relations[i]}return e.getAttribute(t)},set:function(e,t,n,r){return"string"!=typeof t||t in e||-1!==e.modelClass.classFields.indexOf(t)?Reflect.set(e,t,n,r):e.hasRelation(t)?(e.setRelationModels(t,n),!0):(e.setAttribute(t,n),!0)},deleteProperty:function(e,t){return"string"!=typeof t||t in e?Reflect.deleteProperty(e,t):e.hasRelation(t)?(e.unloadRelation(t),!0):t in e._attributes&&-1===e.modelClass.classFields.indexOf(t)?(e.unsetAttribute(t),!0):Reflect.deleteProperty(e,t)}})},e.prototype.initializeAttributes=function(e,t){this._attributes=m.deepClone(e),this._originalAttributes=t?m.deepClone(e):{},this._dirtyAttributes=t?{}:m.deepClone(e),t||(this.hasAutomaticTimestamp("createdAt")&&!("createdAt"in e)&&(this._attributes.createdAt=new Date,this._dirtyAttributes.createdAt=this._attributes.createdAt),this.hasAutomaticTimestamp("updatedAt")&&!("updatedAt"in e)&&(this._attributes.updatedAt=new Date,this._dirtyAttributes.updatedAt=this._attributes.updatedAt)),this._attributes=this.castAttributes(ee(this._attributes,this.modelClass.fields),this.modelClass.fields)},e.prototype.initializeRelations=function(){var e=this;this._relations=this.modelClass.relations.reduce((function(t,n){var r=e._proxy[_(n)+"Relationship"]();return r.name=n,t[n]=r,t}),{})},e.prototype.createFromEngineDocument=function(e,t){return z(this,void 0,void 0,(function(){var n;return $(this,(function(r){switch(r.label){case 0:return[4,this.parseEngineDocumentAttributes(e,t)];case 1:return(n=r.sent())[this.modelClass.primaryKey]=e,[2,new this.modelClass(n,!0)]}}))}))},e.prototype.createManyFromEngineDocuments=function(e){return z(this,void 0,void 0,(function(){var t=this;return $(this,(function(n){return[2,Promise.all(Object.entries(e).map((function(e){var n=e[0],r=e[1];return t.createFromEngineDocument(t.parseKey(n),r)})))]}))}))},e.prototype.syncDirty=function(){return z(this,void 0,void 0,(function(){var e,t,n;return $(this,(function(r){switch(r.label){case 0:return e=h.requireEngine(),this._exists?(t=this.getDirtyEngineDocumentUpdates(),n=this.getSerializedPrimaryKey(),[4,e.update(this.modelClass.collection,n,t)]):[2,e.create(this.modelClass.collection,this.toEngineDocument(),this.getSerializedPrimaryKey()||void 0)];case 1:return r.sent(),[2,n]}}))}))},e.prototype.cleanDirty=function(){this._originalAttributes=m.deepClone(this._attributes),this._dirtyAttributes={},this._exists=!0},e.prototype.getCascadeModels=function(){return z(this,void 0,void 0,(function(){var e,t,n,r=this;return $(this,(function(i){switch(i.label){case 0:return e=this.modelClass.relations.map((function(e){return r._relations[e]})).filter((function(e){return"cascade"===e.deleteStrategy})).map((function(e){return z(r,void 0,void 0,(function(){return $(this,(function(t){switch(t.label){case 0:return[4,e.getModels()];case 1:return[2,t.sent().map((function(e){return e.getCascadeModels()}))]}}))}))})),[4,Promise.all(e)];case 1:return t=i.sent(),[4,Promise.all(w.flatten(t))];case 2:return n=i.sent(),[2,w.flatten(n).concat([this]).filter((function(e){return e.exists()}))]}}))}))},e.prototype.deleteModelsFromEngine=function(e){return z(this,void 0,void 0,(function(){var t,n;return $(this,(function(r){switch(r.label){case 0:return t=h.requireEngine(),n=e.map((function(e){return[e.modelClass.collection,e.getSerializedPrimaryKey()]})),[4,Promise.all(n.map((function(e){var n=e[0],r=e[1];return t.delete(n,r)})))];case 1:return r.sent(),[2]}}))}))},e.prototype.resetEngineData=function(){delete this._attributes[this.modelClass.primaryKey],this._exists=!1,this._dirtyAttributes=m.deepClone(this._attributes)},e.prototype.hasOne=function(e,t,n){return new H(this,e,t,n)},e.prototype.belongsToOne=function(e,t,n){return new U(this,e,t,n)},e.prototype.hasMany=function(e,t,n){return new G(this,e,t,n)},e.prototype.belongsToMany=function(e,t,n){return new A(this,e,t,n)},e.prototype.castAttributes=function(e,t){var n={};for(var r in e)n[r]=this.castAttribute(e[r],t[r]);return n},e.prototype.castAttribute=function(e,t){var n=this;if(ne(e))return e;if(void 0===t)switch(c(e)){case"object":return e.toString();case"symbol":case"function":case"undefined":return;default:return e}switch(t.type){case E.Date:return new Date(e);case E.Object:return this.castAttributes(e,t.fields);case E.Array:return e.map((function(e){return n.castAttribute(e,t.items)}));case E.Boolean:return!!e;case E.Number:return parseFloat(e);case E.String:return e.toString();default:return e}},e.prototype.hasAutomaticTimestamp=function(e){return-1!==this.modelClass.timestamps.indexOf(e)},e.prototype.toEngineDocument=function(){return re(this._attributes,this.modelClass.fields)},e.prototype.getDirtyEngineDocumentUpdates=function(){var e=m.deepClone(this._dirtyAttributes);for(var t in e)void 0===e[t]&&(e[t]={$unset:!0});return e},e.prototype.parseEngineDocumentAttributes=function(e,t){return z(this,void 0,void 0,(function(){return $(this,(function(e){return[2,W({},t)]}))}))},e.prototype.serializeKey=function(e){return e.toString()},e.prototype.parseKey=function(e){return e},e.prototype.requireRelation=function(e){if(!(e in this._relations))throw new o("Attempting to use undefined "+e+" relation.");return this._relations[e]},e.primaryKey="id",e.classFields=[],e.relations=[],e}();function Z(e,t,n,r){void 0===r&&(r=!0);var i={};if(-1!==Y.indexOf(n))i.type=n;else{if("object"!=c(n))throw new p(e,"Invalid field definition "+t);i=n}if(void 0===i.type)i={fields:i,type:E.Object};else if(-1===Y.indexOf(i.type))throw new p(e,"Invalid field definition "+t);switch(r&&(i.required=!!i.required),i.type){case E.Object:if(void 0===i.fields)throw new p(e,"Field definition of type object requires fields attribute "+t);for(var o in i.fields)i.fields.hasOwnProperty(o)&&(i.fields[o]=Z(e,o,i.fields[o]));break;case E.Array:if(void 0===i.items)throw new p(e,"Field definition of type array requires items attribute. Field: '"+t+"'");i.items=Z(e,"items",i.items,!1)}return i}function ee(e,t){for(var n in t){var r=t[n];if(!(n in e))switch(r.type){case E.Object:e[n]={};break;case E.Array:e[n]=[];break;default:e[n]=void 0}r.type===E.Object&&(e[n]=ee(e[n],r.fields))}return e}function te(e,t){for(var n in t){var r=t[n];if(r.required&&(!(n in e)||ne(e[n])))throw new o("The "+n+" attribute is required.");n in e&&!ne(e[n])&&r.type===E.Object&&te(e[n],r.fields)}}function ne(e){return null==e}function re(e,t,n){for(var r in void 0===n&&(n=!1),e=v(e))if(void 0===e[r])delete e[r];else if(r in t&&t[r].type===E.Object){var i=re(e[r],t[r].fields,!0);void 0===i?delete e[r]:e[r]=i}return n&&0===Object.keys(e).length?void 0:e}var ie,oe,ae=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),se=function(e){function t(t){var n=e.call(this,"Could not create document with id "+t+" because it is already in use.")||this;return n.id=t,n}return ae(t,e),t}(o),ue=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ce=function(e){function t(t){var n=e.call(this,"Couldn't find document with id "+t+".")||this;return n.id=t,n}return ue(t,e),t}(o),le={generate:function e(t){return t?(t^16*Math.random()>>t/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e)}},fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},he=function(){function e(){var e=this;this.documentsIn=function(e,t,n){return w.contains(n,e)},this.attributeEq=function(e,t,n){return b(e[t],n)},this.attributeContains=function(t,n,r){Array.isArray(r)||(r=[r]);var i=t&&t[n];return!!Array.isArray(i)&&!r.find((function(t){return!i.find((function(n){return e.filterValue(n,t)}))}))},this.attributeOr=function(t,n,r){return!!r.find((function(r){return!!e.filterValue(t,(i={},i[n]=r,i));var i}))},this.attributeIn=function(e,t,n){return w.contains(n,e[t])},this.attributeUpdate=function(t,n,r){g(r)?e.isOperation(r,e.attributeUpdates)?e.runOperation(r,e.attributeUpdates,t,n):g(t[n])?e.updateAttributes(t[n],r):t[n]=r:t[n]=r},this.attributeUpdateItems=function(t,n,r){Array.isArray(r)||(r=[r]);for(var i=function(r,i,o){r&&r.$in&&(r.$in=r.$in.map((function(e){return e.toString()})));var a=e.requireArrayProperty("$updateItems",t,n),s=e.filterDocuments(a.reduce((function(e,t,n){return fe({},e,((r={})[n]=g(t)?t:{},r));var r}),{}),r||{});i&&Object.keys(s).forEach((function(t){var n;e.updateAttributes(s,((n={})[t]=i,n)),a[t]=s[t]})),o&&(t[n]=w.withoutIndexes(a,Object.keys(s).map(parseInt)))},o=0,a=r;o<a.length;o++){var s=a[o];i(s.$where,s.$update,s.$unset)}},this.attributePush=function(t,n,r){e.requireArrayProperty("$push",t,n).push(r)},this.attributeUnset=function(e,t,n){if(!0!==n)for(var r=0,i=n=Array.isArray(n)?n:[n];r<i.length;r++){var o=i[r];delete e[t][o]}else delete e[t]},this.attributeApply=function(t,n,r){for(var i=0,o=r;i<o.length;i++){var a=o[i];e.runOperation(a,e.attributeUpdates,t,n)}},this.rootFilters={$in:this.documentsIn},this.attributeFilters={$eq:this.attributeEq,$contains:this.attributeContains,$or:this.attributeOr,$in:this.attributeIn},this.attributeUpdates={$update:this.attributeUpdate,$updateItems:this.attributeUpdateItems,$push:this.attributePush,$unset:this.attributeUnset,$apply:this.attributeApply}}return e.prototype.filterDocuments=function(e,t){var n=this;return void 0===t&&(t={}),Object.entries(e).reduce((function(e,r){var i=r[0],o=r[1];return n.filterDocument(i,o,t)&&(e[i]=o),e}),{})},e.prototype.updateAttributes=function(e,t){if(this.isOperation(t,{$unset:this.attributeUnset}))for(var n=t.$unset,r=0,i=Array.isArray(n)?n:[n];r<i.length;r++){var o=i[r];this.attributeUnset(e,o,!0)}else for(var a=0,s=Object.entries(t);a<s.length;a++){var u=s[a],c=u[0],l=u[1];this.attributeUpdate(e,c,l)}},e.prototype.obtainDocumentId=function(e){return e||le.generate()},e.prototype.filterDocument=function(e,t,n){var r=this;void 0===n&&(n={}),n=fe({},n);for(var i=0,o=Object.keys(n).filter((function(e){return e in r.rootFilters}));i<o.length;i++){var a=o[i];if(!this.rootFilters[a](e,t,n[a]))return!1;delete n[a]}return this.filterValue(t,n)},e.prototype.filterValue=function(e,t){var n=this;return void 0===t&&(t={}),g(t)?this.isOperation(t,this.attributeFilters)?this.runOperation(t,this.attributeFilters,{value:e},"value"):!!g(e)&&!Object.entries(t).find((function(t){var r=t[0],i=t[1];return!(n.isOperation(i,n.attributeFilters)?n.runOperation(i,n.attributeFilters,e,r):n.attributeEq(e,r,i))})):this.attributeEq({value:e},"value",t)},e.prototype.isOperation=function(e,t){if(!g(e))return!1;var n=Object.keys(e),r=n[0],i=n.slice(1);return!(!r||0!==i.length||!(r in t))},e.prototype.runOperation=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=Object.entries(e)[0],o=i[0],a=i[1];return t[o].apply(t,n.concat([a]))},e.prototype.requireArrayProperty=function(e,t,n){if(!t||!Array.isArray(t[n]))throw new Error(e+" operator can only be applied to array attributes");return t[n]},e}(),de=new WeakMap,pe=new WeakMap,ye=new WeakMap,ve=new WeakMap,be=new WeakMap,ge={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return pe.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ye.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xe(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function me(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(_e(this),n),xe(de.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xe(e.apply(_e(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=e.call.apply(e,[_e(this),t].concat(r));return ye.set(o,t.sort?t.sort():[t]),xe(o)}}function we(e){return"function"==typeof e?me(e):(e instanceof IDBTransaction&&function(e){if(!pe.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=function(){t(),r()},o=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));pe.set(e,t)}}(e),t=e,(ie||(ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,ge):e);var t}function xe(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",o)},i=function(){t(xe(e.result)),r()},o=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((function(t){t instanceof IDBCursor&&de.set(t,e)})).catch((function(){})),be.set(t,e),t}(e);if(ve.has(e))return ve.get(e);var t=we(e);return t!==e&&(ve.set(e,t),be.set(t,e)),t}var _e=function(e){return be.get(e)};function Ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,o=n.blocking,a=n.terminated,s=indexedDB.open(e,t),u=xe(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(xe(s.result),e.oldVersion,e.newVersion,xe(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){a&&e.addEventListener("close",(function(){return a()})),o&&e.addEventListener("versionchange",(function(){return o()}))})).catch((function(){})),u}function ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.blocked,r=indexedDB.deleteDatabase(e);return n&&r.addEventListener("blocked",(function(){return n()})),xe(r).then((function(){}))}var Se=["get","getKey","getAll","getAllKeys","count"],Re=["put","add","delete","clear"],Oe=new Map;function Ce(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(Oe.get(t))return Oe.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Re.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Se.includes(n))){var o=function(){var e=u(regeneratorRuntime.mark((function e(t){var o,a,s,u,c,l,f,h=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a=this.transaction(t,i?"readwrite":"readonly"),s=a.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];if(r&&(s=s.index(c.shift())),f=(o=s)[n].apply(o,c),e.t0=i,!e.t0){e.next=9;break}return e.next=9,a.done;case 9:return e.abrupt("return",f);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Oe.set(t,o),o}}}ge=function(e){return s(s({},e),{},{get:function(t,n,r){return Ce(t,n)||e.get(t,n,r)},has:function(t,n){return!!Ce(t,n)||e.has(t,n)}})}(ge);var Ie=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},De=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Te=function(){function e(e){void 0===e&&(e=null),this.database=e?"soukai-"+e:"soukai",this.helper=new he}return e.prototype.purgeDatabase=function(){return Ie(this,void 0,void 0,(function(){var e=this;return De(this,(function(t){switch(t.label){case 0:return this.closeConnections(),[4,Promise.all([ke(this.database+"-meta",{blocked:function(){return e.throwDatabaseBlockedError()}}),ke(this.database,{blocked:function(){return e.throwDatabaseBlockedError()}})])];case 1:return t.sent(),[2]}}))}))},e.prototype.closeConnections=function(){return Ie(this,void 0,void 0,(function(){return De(this,(function(e){return this._metadataConnection&&this._metadataConnection.close(),this._documentsConnection&&this._documentsConnection.close(),delete this._metadataConnection,delete this._documentsConnection,[2]}))}))},e.prototype.create=function(e,t,n){return Ie(this,void 0,void 0,(function(){return De(this,(function(r){switch(r.label){case 0:return n=this.helper.obtainDocumentId(n),[4,this.documentExists(e,n)];case 1:if(r.sent())throw new se(n);return[4,this.createDocument(e,n,t)];case 2:return r.sent(),[2,n]}}))}))},e.prototype.readOne=function(e,t){return Ie(this,void 0,void 0,(function(){var n;return De(this,(function(r){switch(r.label){case 0:return[4,this.collectionExists(e)];case 1:if(!r.sent())throw new ce(t);return[4,this.getDocument(e,t)];case 2:if(!(n=r.sent()))throw new ce(t);return[2,n]}}))}))},e.prototype.readMany=function(e,t){return Ie(this,void 0,void 0,(function(){var n,r;return De(this,(function(i){switch(i.label){case 0:return n={},[4,this.getCollections()];case 1:return-1===(r=i.sent()).indexOf(e)?[2,n]:[4,this.withDocumentsTransaction(r,e,"readonly",(function(e){var t=function e(t){if(t)return n[t.key]=t.value,t.continue().then(e)};return e.store.openCursor().then(t)}))];case 2:return i.sent(),[2,this.helper.filterDocuments(n,t)]}}))}))},e.prototype.update=function(e,t,n){return Ie(this,void 0,void 0,(function(){var r;return De(this,(function(i){switch(i.label){case 0:return[4,this.getDocument(e,t)];case 1:if(!(r=i.sent()))throw new ce(t);return this.helper.updateAttributes(r,n),[4,this.updateDocument(e,t,r)];case 2:return i.sent(),[2]}}))}))},e.prototype.delete=function(e,t){return Ie(this,void 0,void 0,(function(){return De(this,(function(n){switch(n.label){case 0:return[4,this.documentExists(e,t)];case 1:if(!n.sent())throw new ce(t);return[4,this.deleteDocument(e,t)];case 2:return n.sent(),[2]}}))}))},e.prototype.collectionExists=function(e){return Ie(this,void 0,void 0,(function(){return De(this,(function(t){switch(t.label){case 0:return[4,this.getCollections()];case 1:return[2,-1!==t.sent().indexOf(e)]}}))}))},e.prototype.documentExists=function(e,t){return Ie(this,void 0,void 0,(function(){return De(this,(function(n){switch(n.label){case 0:return[4,this.getDocument(e,t)];case 1:return[2,!!n.sent()]}}))}))},e.prototype.getDocument=function(e,t){return Ie(this,void 0,void 0,(function(){var n;return De(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,this.getCollections()];case 1:return-1===(n=r.sent()).indexOf(e)?[2,null]:[4,this.withDocumentsTransaction(n,e,"readonly",(function(e){return e.store.get(t)}))];case 2:return[2,r.sent()||null];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},e.prototype.createDocument=function(e,t,n){return Ie(this,void 0,void 0,(function(){var r;return De(this,(function(i){switch(i.label){case 0:return[4,this.getCollections()];case 1:return-1!==(r=i.sent()).indexOf(e)?[3,3]:[4,this.createCollection(e)];case 2:i.sent(),r.push(e),i.label=3;case 3:return[2,this.withDocumentsTransaction(r,e,"readwrite",(function(e){return e.store.add(n,t),e.done}))]}}))}))},e.prototype.updateDocument=function(e,t,n){return Ie(this,void 0,void 0,(function(){var r;return De(this,(function(i){switch(i.label){case 0:return[4,this.getCollections()];case 1:return r=i.sent(),[2,this.withDocumentsTransaction(r,e,"readwrite",(function(e){return e.store.put(n,t),e.done}))]}}))}))},e.prototype.deleteDocument=function(e,t){return Ie(this,void 0,void 0,(function(){var n;return De(this,(function(r){switch(r.label){case 0:return[4,this.getCollections()];case 1:return n=r.sent(),[2,this.withDocumentsTransaction(n,e,"readwrite",(function(e){return e.store.delete(t),e.done}))]}}))}))},e.prototype.withMetadataTransaction=function(e,t){return Ie(this,void 0,void 0,(function(){var n,r,i=this;return De(this,(function(o){switch(o.label){case 0:return n=this,(r=this._metadataConnection)?[3,2]:[4,Ee(this.database+"-meta",1,{upgrade:function(e){e.objectStoreNames.contains("collections")||e.createObjectStore("collections",{keyPath:"name"})},blocked:function(){return i.throwDatabaseBlockedError()}})];case 1:r=o.sent(),o.label=2;case 2:return n._metadataConnection=r,[2,this.retryingOnTransactionInactive((function(){var n=i._metadataConnection.transaction("collections",e);return t(n)}))]}}))}))},e.prototype.withDocumentsTransaction=function(e,t,n,r){return Ie(this,void 0,void 0,(function(){var i,o,a=this;return De(this,(function(s){switch(s.label){case 0:return i=this,(o=this._documentsConnection)?[3,2]:[4,Ee(this.database,e.length,{upgrade:function(t){for(var n=0,r=e;n<r.length;n++){var i=r[n];t.objectStoreNames.contains(i)||t.createObjectStore(i)}},blocked:function(){return a.throwDatabaseBlockedError()}})];case 1:o=s.sent(),s.label=2;case 2:return i._documentsConnection=o,[2,this.retryingOnTransactionInactive((function(){var e=a._documentsConnection.transaction(t,n);return r(e)}))]}}))}))},e.prototype.retryingOnTransactionInactive=function(e){try{return e()}catch(t){if(!(t instanceof Error)||!t.name.toLowerCase().includes("inactive")&&!t.message.toLowerCase().includes("inactive"))throw t;return e()}},e.prototype.getCollections=function(){return Ie(this,void 0,void 0,(function(){return De(this,(function(e){return[2,this.withMetadataTransaction("readonly",(function(e){return e.store.getAllKeys()}))]}))}))},e.prototype.createCollection=function(e){return Ie(this,void 0,void 0,(function(){return De(this,(function(t){switch(t.label){case 0:return[4,this.withMetadataTransaction("readwrite",(function(t){return t.store.add({name:e}),t.done}))];case 1:return t.sent(),this._documentsConnection&&(this._documentsConnection.close(),delete this._documentsConnection),[2]}}))}))},e.prototype.throwDatabaseBlockedError=function(){throw new o("An attempt to open an IndexedDB connection has been blocked, remember to call IndexedDBEngine.closeConnections when necessary. Learn more at https://developer.mozilla.org/en-US/docs/Web/API/IDBOpenDBRequest/blocked_event")},e}(),Ae=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Ne=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Pe=function(){function e(){this.db={},this.helper=new he}return Object.defineProperty(e.prototype,"database",{get:function(){return this.db},enumerable:!0,configurable:!0}),e.prototype.create=function(e,t,n){var r=this.collection(e);if((n=this.helper.obtainDocumentId(n))in r)throw new se(n);return r[n]=t,Promise.resolve(n)},e.prototype.readOne=function(e,t){var n=this.collection(e);return t in n?Promise.resolve(n[t]):Promise.reject(new ce(t))},e.prototype.readMany=function(e,t){return Ae(this,void 0,void 0,(function(){var n;return Ne(this,(function(r){return this.hasCollection(e)?(n=this.collection(e),[2,this.helper.filterDocuments(n,t)]):[2,{}]}))}))},e.prototype.update=function(e,t,n){var r=this.collection(e);if(t in r){var i=r[t];return this.helper.updateAttributes(i,n),Promise.resolve()}return Promise.reject(new ce(t))},e.prototype.delete=function(e,t){var n=this.collection(e);return t in n?(delete n[t],Promise.resolve()):Promise.reject(new ce(t))},e.prototype.hasCollection=function(e){return e in this.db},e.prototype.collection=function(e){return this.hasCollection(e)||(this.db[e]={}),this.db[e]},e}(),je=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Le=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Me=function(){function e(e){void 0===e&&(e=""),this.prefix=e,this.helper=new he}return e.prototype.clear=function(){for(var e=0,t=Object.keys(localStorage);e<t.length;e++){var n=t[e];n.startsWith(this.prefix)&&localStorage.removeItem(n)}},e.prototype.create=function(e,t,n){return je(this,void 0,void 0,(function(){var r;return Le(this,(function(i){if(r=this.readItem(e,{}),(n=this.helper.obtainDocumentId(n))in r)throw new se(n);return r[n]=this.serializeAttributes(t),this.writeItem(e,r),[2,n]}))}))},e.prototype.readOne=function(e,t){return je(this,void 0,void 0,(function(){var n;return Le(this,(function(r){if(n=this.readItem(e,{}),!(t in n))throw new ce(t);return[2,this.deserializeAttributes(n[t])]}))}))},e.prototype.readMany=function(e,t){return je(this,void 0,void 0,(function(){var n,r;return Le(this,(function(i){for(r in n=this.readItem(e,{}))n[r]=this.deserializeAttributes(n[r]);return[2,this.helper.filterDocuments(n,t)]}))}))},e.prototype.update=function(e,t,n){return je(this,void 0,void 0,(function(){var r,i;return Le(this,(function(o){if(r=this.readItem(e,{}),!(t in r))throw new ce(t);return i=this.deserializeAttributes(r[t]),this.helper.updateAttributes(i,n),r[t]=this.serializeAttributes(i),this.writeItem(e,r),[2]}))}))},e.prototype.delete=function(e,t){return je(this,void 0,void 0,(function(){var n;return Le(this,(function(r){if(n=this.readItem(e,{}),!(t in n))throw new ce(t);return delete n[t],this.writeItem(e,n),[2]}))}))},e.prototype.readItem=function(e,t){void 0===t&&(t=null);var n=localStorage.getItem(this.prefix+e);return null!==n?JSON.parse(n):t},e.prototype.writeItem=function(e,t){localStorage.setItem(this.prefix+e,JSON.stringify(t))},e.prototype.serializeAttributes=function(e){for(var t in e){var n=e[t];e[t]=this.serializeAttributeValue(n)}return e},e.prototype.serializeAttributeValue=function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.serializeAttributeValue(e)})):e instanceof Date?{__dateTime:e.getTime()}:"object"==c(e)?this.serializeAttributes(e):e},e.prototype.deserializeAttributes=function(e){for(var t in e){var n=e[t];e[t]=this.deserializeAttributeValue(n)}return e},e.prototype.deserializeAttributeValue=function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.deserializeAttributeValue(e)})):"object"==c(e)&&"__dateTime"in e?new Date(e.__dateTime):e},e}(),Ue=function(){function e(e){this.engine=e}return e.prototype.create=function(e,t,n){return a.log("CREATE",e,t,n),this.engine.create(e,t,n).then((function(e){return a.log("CREATED",e),e})).catch((function(e){throw a.error(e),e}))},e.prototype.readOne=function(e,t){return a.log("READ ONE",e,t),this.engine.readOne(e,t).then((function(e){return a.log("FOUND",e),e})).catch((function(e){throw a.error(e),e}))},e.prototype.readMany=function(e,t){return a.log("READ ALL",e,t),this.engine.readMany(e,t).then((function(e){return a.log("FOUND",e),e})).catch((function(e){throw a.error(e),e}))},e.prototype.update=function(e,t,n){return a.log("UPDATE",e,t,n),this.engine.update(e,t,n).then((function(){return a.log("UPDATED")})).catch((function(e){throw a.error(e),e}))},e.prototype.delete=function(e,t){return a.log("DELETE",e,t),this.engine.delete(e,t).then((function(){return a.log("DELETED")})).catch((function(e){throw a.error(e),e}))},e}();function Ve(e){for(var t={},n=0,r=e.keys();n<r.length;n++){var i=r[n],o=(i.match(/^(?:\.\/)?(.+)\.(j|t)s$/)||[])[1];void 0!==o&&(t[o]=e(i).default)}return t}n.d(t,"definitionsFromContext",(function(){return Ve})),n.d(t,"Model",(function(){return X})),n.d(t,"Soukai",(function(){return h})),n.d(t,"EngineHelper",(function(){return he})),n.d(t,"LogEngine",(function(){return Ue})),n.d(t,"InMemoryEngine",(function(){return Pe})),n.d(t,"LocalStorageEngine",(function(){return Me})),n.d(t,"IndexedDBEngine",(function(){return Te})),n.d(t,"SoukaiError",(function(){return o})),n.d(t,"DocumentNotFound",(function(){return ce})),n.d(t,"DocumentAlreadyExists",(function(){return se})),n.d(t,"InvalidModelDefinition",(function(){return p})),n.d(t,"BelongsToManyRelation",(function(){return A})),n.d(t,"BelongsToOneRelation",(function(){return U})),n.d(t,"HasManyRelation",(function(){return G})),n.d(t,"HasOneRelation",(function(){return H})),n.d(t,"MultiModelRelation",(function(){return C})),n.d(t,"Relation",(function(){return R})),n.d(t,"SingleModelRelation",(function(){return P})),n.d(t,"FieldType",(function(){return E})),t.default=h}])}))},66639:function(e,t,n){e.exports=o;var r=n(87041).EventEmitter,i=n(66110);function o(){r.call(this)}i(o,r),o.Readable=n(92345),o.Writable=n(1607),o.Duplex=n(91606),o.Transform=n(32784),o.PassThrough=n(33091),o.finished=n(32626),o.pipeline=n(83329),o.Stream=o,o.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",u));var a=!1;function s(){a||(a=!0,e.end())}function u(){a||(a=!0,"function"===typeof e.destroy&&e.destroy())}function c(e){if(l(),0===r.listenerCount(this,"error"))throw e}function l(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",c),e.removeListener("error",c),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("error",c),e.on("error",c),n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e}},52225:function(e,t,n){"use strict";n(21703),n(41539),n(39714),n(47042);var r=n(40837).Buffer,i=r.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){if(!e)return"utf8";var t;while(1)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function a(e){var t=o(e);if("string"!==typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}function s(e){var t;switch(this.encoding=a(e),this.encoding){case"utf16le":this.text=p,this.end=y,t=4;break;case"utf8":this.fillLast=f,t=4;break;case"base64":this.text=v,this.end=b,t=3;break;default:return this.write=g,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function u(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function c(e,t,n){var r=t.length-1;if(r<n)return 0;var i=u(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=u(t[r]),i>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=u(t[r]),i>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0))}function l(e,t,n){if(128!==(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,""}}function f(e){var t=this.lastTotal-this.lastNeed,n=l(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function h(e,t){var n=c(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function p(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function y(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function v(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function b(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function g(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}t.s=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=d,s.prototype.text=h,s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},40837:function(e,t,n){n(21703),n(43290);
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=n(89914),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"===typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},94728:function(e,t,n){var r=n(50476);function i(e,t){if(o("noDeprecation"))return e;var n=!1;function i(){if(!n){if(o("throwDeprecation"))throw new Error(t);o("traceDeprecation")?r.trace(t):r.warn(t),n=!0}return e.apply(this,arguments)}return i}function o(e){try{if(!n.g.localStorage)return!1}catch(r){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}n(21703),e.exports=i},52361:function(){},94616:function(){}}]);
//# sourceMappingURL=288-legacy.2ade3bef.js.map